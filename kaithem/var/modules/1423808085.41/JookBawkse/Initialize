{
    "action": "s = '<b>Now Playing:'+ module.played[-1] + \"</b><br><ol>\"\r\nx = 0\r\n\r\nfor i in module.playlist:\r\n    if x == module.pointer:\r\n        s+='<li class=\"specialentry\">'+i+'<a class=\"button\" href=\"/pages/JookBawkse/Remove?i=' +kaithem.web.url(i)+'\">Remove</a><a class=\"button\" href=\"/pages/JookBawkse/mtf?i='+kaithem.web.url(i)+'\">Move to front</a></li>'\r\n    else:\r\n        s+='<li>'+i+'<a class=\"button\" href=\"/pages/JookBawkse/Remove?i=' +kaithem.web.url(i)+'\">Remove</a><a class=\"button\" href=\"/pages/JookBawkse/mtf?i='+kaithem.web.url(i)+'\">Move to front</a></li>'\r\n    x+=1\r\ns +='</ol>'\r\nmodule.pld.write(s)\r\n",
    "continual": true,
    "disabled": false,
    "once": true,
    "priority": "interactive",
    "rate-limit": 1.0,
    "resource-type": "event",
    "setup": "import os\r\nmodule.playlist = []\r\nmodule.played = [\"Silence\"]\r\n\r\nmodule.pld = kaithem.widget.TextDisplay()\r\nmodule.pld.require(\"/users/jookbawkse/view\")\r\nmodule.pld.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.shuffle = kaithem.widget.Switch()\r\nmodule.shuffle.require(\"/users/jookbawkse/view\")\r\nmodule.shuffle.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\n\r\nmodule.fullscreen = kaithem.widget.Switch()\r\nmodule.fullscreen.require(\"/users/jookbawkse/view\")\r\nmodule.fullscreen.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.play = kaithem.widget.Button()\r\nmodule.play.require(\"/users/jookbawkse/view\")\r\nmodule.play.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.remaining = kaithem.widget.DynamicSpan()\r\nmodule.remaining.require(\"/users/jookbawkse/view\")\r\nmodule.remaining.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.toPlay = 0;\r\nmodule.continual = kaithem.widget.Switch()\r\nmodule.continual.require(\"/users/jookbawkse/view\")\r\nmodule.continual.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\ndef pushplay(u,v):\r\n    if 'pushed' in v:\r\n        module.toPlay = len(module.playlist)\r\n        module.remaining.write(str(module.toPlay))\r\n        if module.continual.read():\r\n            module.remaining.write(\"Looping\")\r\n            \r\nmodule.play.attach(pushplay)\r\n\r\n\r\n\r\ndef looptoggle(u,v):\r\n    if v:\r\n        module.remaining.write(\"Looping\")\r\n    else:\r\n        module.remaining.write(str(module.toPlay))\r\n\r\nmodule.continual.attach(looptoggle)\r\nmodule.pointer = 0\r\ncache = None\r\ndef rescan():\r\n    global cache\r\n    cache = None\r\n    get_media()\r\nmodule.rescan = rescan\r\ndef get_media():\r\n    global cache\r\n    if cache:\r\n        return cache\r\n    else:\r\n        x = []\r\n        for i in os.walk(kaithem.registry.get(\"jookbawkse/mediadir\")):\r\n            for j in i[2]:\r\n                if j.split('.')[-1] in ['mp3','ogg','flac','wav','m4p','wma','mp4','wma','avi','3gp','qt','flv']:\r\n                    x.append((os.path.basename(j),os.path.join(i[0],j)))\r\n        cache=x\r\n        return x\r\n            \r\nmodule.get_media = get_media\r\n\r\nmodule.volume = kaithem.widget.Slider(min=0,max=1,step=0.01)\r\nmodule.volume.require(\"/users/jookbawkse/view\")\r\nmodule.volume.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.volume.write(0.8)\r\n\r\nmodule.party = kaithem.widget.Switch()\r\nmodule.party.require(\"/users/jookbawkse/view\")\r\nmodule.party.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.playedcount = 0\r\n\r\n\r\ndef f(usr,val):\r\n    kaithem.sound.setvol(val,\"jookbawkse\")\r\nmodule.volume.attach(f)\r\n            ",
    "trigger": "True",
    "versions": {
        "action": "s = '<b>Now Playing:'+ module.played[-1] + \"</b><br><ol>\"\r\nx = 0\r\n\r\nfor i in module.playlist:\r\n    if x == module.pointer:\r\n        s+='<li class=\"specialentry\">'+i+'<a class=\"button\" href=\"/pages/JookBawkse/Remove?i=' +kaithem.web.url(i)+'\">Remove</a><a class=\"button\" href=\"/pages/JookBawkse/mtf?i='+kaithem.web.url(i)+'\">Move to front</a></li>'\r\n    else:\r\n        s+='<li>'+i+'<a class=\"button\" href=\"/pages/JookBawkse/Remove?i=' +kaithem.web.url(i)+'\">Remove</a><a class=\"button\" href=\"/pages/JookBawkse/mtf?i='+kaithem.web.url(i)+'\">Move to front</a></li>'\r\n    x+=1\r\ns +='</ol>'\r\nmodule.pld.write(s)\r\n",
        "continual": true,
        "priority": "interactive",
        "rate-limit": 1.0,
        "resource-type": "event",
        "setup": "import os\r\nmodule.playlist = []\r\nmodule.played = [\"Silence\"]\r\n\r\nmodule.pld = kaithem.widget.TextDisplay()\r\nmodule.pld.require(\"/users/jookbawkse/view\")\r\nmodule.pld.requireToWrite*\"/users/jookbawkse/use\")\r\n\r\nmodule.shuffle = kaithem.widget.Switch()\r\nmodule.shuffle.require(\"/users/jookbawkse/view\")\r\nmodule.shuffle.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\n\r\nmodule.fullscreen = kaithem.widget.Switch()\r\nmodule.fullscreen.require(\"/users/jookbawkse/view\")\r\nmodule.fullscreen.requireToWrite*\"/users/jookbawkse/use\")\r\n\r\nmodule.play = kaithem.widget.Button()\r\nmodule.play.require(\"/users/jookbawkse/view\")\r\nmodule.play.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.remaining = kaithem.widget.DynamicSpan()\r\nmodule.remaining.require(\"/users/jookbawkse/view\")\r\nmodule.remaining.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.toPlay = 0;\r\nmodule.continual = kaithem.widget.Switch()\r\nmodule.continual.require(\"/users/jookbawkse/view\")\r\nmodule.continual.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\ndef pushplay(u,v):\r\n    if 'pushed' in v:\r\n        module.toPlay = len(module.playlist)\r\n        module.remaining.write(str(module.toPlay))\r\n        if module.continual.read():\r\n            module.remaining.write(\"Looping\")\r\n            \r\nmodule.play.attach(pushplay)\r\n\r\n\r\n\r\ndef looptoggle(u,v):\r\n    if v:\r\n        module.remaining.write(\"Looping\")\r\n    else:\r\n        module.remaining.write(str(module.toPlay))\r\n\r\nmodule.continual.attach(looptoggle)\r\nmodule.pointer = 0\r\ncache = None\r\ndef rescan():\r\n    global cache\r\n    cache = None\r\n    get_media()\r\nmodule.rescan = rescan\r\ndef get_media():\r\n    global cache\r\n    if cache:\r\n        return cache\r\n    else:\r\n        x = []\r\n        for i in os.walk(kaithem.registry.get(\"jookbawkse/mediadir\")):\r\n            for j in i[2]:\r\n                if j.split('.')[-1] in ['mp3','ogg','flac','wav','m4p','wma','mp4','wma','avi','3gp','qt','flv']:\r\n                    x.append((os.path.basename(j),os.path.join(i[0],j)))\r\n        cache=x\r\n        return x\r\n            \r\nmodule.get_media = get_media\r\n\r\nmodule.volume = kaithem.widget.Slider(min=0,max=2.5,step=0.01)\r\nmodule.volume.require(\"/users/jookbawkse/view\")\r\nmodule.volume.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.volume.write(0.8)\r\n\r\nmodule.party = kaithem.widget.Switch()\r\nmodule.party.require(\"/users/jookbawkse/view\")\r\nmodule.party.requireToWrite(\"/users/jookbawkse/use\")\r\n\r\nmodule.playedcount = 0\r\n\r\n\r\ndef f(usr,val):\r\n    kaithem.sound.setvol(val,\"jookbawkse\")\r\nmodule.volume.attach(f)\r\n            ",
        "trigger": "True"
    }
}