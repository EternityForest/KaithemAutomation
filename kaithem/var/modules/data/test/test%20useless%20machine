{continual: true, enable: true, once: true, priority: interactive, rate-limit: 0.0,
  resource-type: event, trigger: 'True'}

#End metadata. Format: metadata, setup, action, delimited by --- on it's own line.
---
#This code runs once when the event loads. It also runs when you save the event during the test compile
#and may run multiple times when kaithem boots due to dependancy resolution
__doc__=''
import time

depend = module.uselessmachine
---
module['UselessMachine'].start()
module.uselessmachine =  time.time()

time.sleep(1)
if module.uselessmachine:
    raise RuntimeError("Useless machine didn't work")

module['UselessMachine'].stop()
time.sleep(1)

module.uselessmachine =  time.time()
time.sleep(2)
if not module.uselessmachine:
    raise RuntimeError("Useless machine didn't turn off")


module['UselessMachine'].start()

module.uselessmachine =  time.time()
time.sleep(1)
if module.uselessmachine:
    raise RuntimeError("Useless machine didn't turn back on")
print("success")
