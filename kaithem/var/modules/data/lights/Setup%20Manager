allow-origins: ['*']
allow-xss: false
auto-reload: false
auto-reload-interval: 5.0
dont-show-in-index: false
no-header: false
no-navheader: true
require-method: [GET, POST]
require-permissions: []
resource-type: page

#End YAML metadata, page body mako code begins on first line after ---
---
<%!
#Code Here runs once when page is first rendered. Good place for import statements.
__doc__= ""
boardname = "default"
%>
    
<%
#Python Code here runs every page load
if 'namech_id' in kwargs:
	module.boards[boardname].setChannelName(int(kwargs['namech_id']), name=kwargs['namech_name'])
%>
    
    
<script src="/modules/module/jslibs/getfileresource/jquery-3.1.0.min.js"></script>
<script src="/modules/module/jslibs/getfileresource/vue-1.0.26.min.js"></script>
<script type="text/javascript" src="/static/widget.js"></script>

<h2>Lighting Desk</h2>
    
<div style="float:left">
	<form id=namech action="/pages/lights/Setup Manager">
		<input type=numeric name=namech_id placeholder="Channel Number"><br>
        <input name=namech_name placeholder="Channel Name"><br>
        <input type="submit" value="Name Channel">
    </form>
          <div class=scrollbox>

    <ul>
        <%
           c=module.boards[boardname].channelNames
          %>
        %for i in c:
            <li>${i}: ${c[i]}</li>
        %endfor
     </ul>
</div>
    </div>
              
<div style="float:right">
   <div class=scrollbox>
    <ul id=scenes>
    <li v-for="i in activescenes">{{i[0]}}</li>
    </ul>
        </div>
</div>
 
${module.boards[boardname].link.render('api_link')}
    
<script>
    appData =
        {
         'activescenes': ${[[i.name,i.id] for i in module.boards[boardname].activeScenes]}
        }
        
    var sceneslist =new Vue({
  el: '#scenes',
  data: appData
})
    
function f(v)
    {
        console.log(v[1])
        c = v[0]
        if(c=="go")
        {
            appData.activescenes.push([v[1],v[0]])
        }
    }

api_link.upd = f
</script>
