{% extends "base.html" %}

{% block sidebar %}
  <input class="w-full" id="table-search" placeholder="table name..." type="text" />
  <ul class="nav nav-pills" role="tablist">
    {% set virtual_tables = dataset.get_virtual_tables() %}
    {% set virtual_tables_corollary = dataset.get_corollary_virtual_tables() %}
    {% for table_name in dataset.tables|sort %}
      {% if table_name not in virtual_tables_corollary %}
      <li class="nav-item table-link">
        <a class="nav-link{% if table and table_name == table %} active{% endif %}" href="{{ url_for('table_content', file=file, table=table_name) }}" title="{{ table_name }}">
          {{ table_name|truncate(24, True, leeway=2) }}
          {% if table_name in virtual_tables %}
            <sup>(v)</sup>
          {% endif %}
        </a>
      </li>
      {% endif %}
    {% endfor %}
  </ul>
  <hr />

    <form action="{{ url_for('table_create', file=file) }}" class="" method="post" style="margin-top: 10px;">
      <input name="redirect" type="hidden" value="{{ request.full_path }}" />{# full-path begins with "/" and includes querystring #}
      <input class="form-inline form-control-sm" name="table_name" placeholder="new_table_name" />
      <button class="btn btn-primary btn-sm" type="submit">Create</button>
    </form>
  
  <p><a href="#" id="toggle-helper-tables">Toggle helper tables</a></p>
  <ul class="nav nav-pills nav-stacked" id="helper-tables" role="tablist"{% if table not in virtual_tables_corollary %} style="display:none;"{% endif %}>
    {% for table_name in virtual_tables_corollary|sort %}
      <li{% if table and table_name == table %} class="active"{% endif %}>
        <a href="{{ url_for('table_content', file=file, table=table_name) }}" title="{{ table_name }}">
          <small>{{ table_name|truncate(24, True, leeway=2) }}</small>
        </a>
      </li>
    {% endfor %}
  </ul>
{% endblock %}
