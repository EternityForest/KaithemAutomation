<%include file="/pageheader.html"/>
<title>Kaithem Help</title>
<h2>Change Log</h2>

<div class="sectionbox">


<h3>0.60(dev)</h3>
<ul>
    <li>Can now view event history</li>
    <li>Lighting module cue matrix view</li>
    <li>Add breakpoint function</li>
    <li>UTF-8 encoding in page responses</li>
    <li>kaithem.time.lantime() for a time value automatically synced across the LAN
        (py3.3 only, netifaces required)</li>
    <li><b>BREAKING CHANGE</b> Widget.doCallback,onRequest, and onUpdate now expect a connection ID parameter.</li>
    <li>New Widget.attach2(f) function for 3 parameter callbacks, username,value, and connection ID</li>
    <li>New widget.sendTo(val,target) function to send to a specific connection ID</li>
    <li>apiwidget.now() function added on javascript side to get the current server time.</li>
    <li>Correctly attribute "And ninety-nine are with dreams content..." to a Ted Olson poem, not Poe as the internet claims./li>
</ul>

<h3>0.59</h3>
<ul>
    <li>Object inspector now handles weak references, weakvaluedicts, and objects with __slots__</li>
    <li>Lighting module has changed to a new cue based system(Not compatible with the old one)</li>
    <li>Fix python2 bug that prevented booting</li>
    <li>Tweak mako autoformat options and log formatting</li>
</ul>


<h3>0.58</h3>
<ul>
    <li>Safer handling of tokens to resist timing attacks</li>
    <li>Get rid of excessively tiny stack size that caused ocassional segfaults</li>
    <li>Fix bug that caused annoying widget.js error messages</li>
    <li>Switch to microsoft's monaco editor instead of CodeMirror</li>
    <li>(SOMEWHAT BREAKING CHANGE) Users are now limited by default to 64k request HTTP bodies. You can allow users
        a larger limit on a per-group basis. Users with __all_permissions__ have no such limit, and the limit is
        4Gb in certain contexts for users with the permissions to edit pages or settings.</li>
    <li>Increase maxrambytes in cherrypy. It should work slightly better on embedded systems now.</li>
    <li>Add command line option --nosecurity 1 to disable all security(For testing and localhost only use)</li>
    <li>Better template when creating new pages</li>
    <li>(SOMEWHAT BREAKING CHANGE)Use Recur instead of recurrent to handle !times, greatly improving performance.</li>
    <li>Add lighting control features in the modules library.</li>
</ul>
</div>


<h3>0.57</h3>
<div class="sectionbox">
<ul>
    <li>Dump traceback in the event of a segfault.</li>
    <li>Raise error if you try to send non-serializable widget value</li>
    <li>Add raw pages that aren't processed through Mako's templating</li>
    <li>Live logs now properly escaped</li>
    <li>Rate limit login attempts with passwords under 32 chars to 1 per 3s</li>
    <li>Auth tokens don't expire for 3 years</li>
    <li>New page to view login failures</li>
    <li>Support for IPv4/IPv6 dual stack</li>
    <li>Host config option to bind to a specific IP(overrides local-access-only if specified)</li>
    <li>Scheduler error handling no longer spams the logs</li>
</ul>
</div>

<h3>0.56.1</h3>
<div class="sectionbox">
<ul>
    <li>Fix bug when deleting realtime events</li>
    <li>Format log records immediately instead of keeping record objects around</li>
</ul>
</div>

<h3>0.56</h3>
<div class="sectionbox">
<ul>
<li>Eliminate the frame-based polling system, polled events are now scheduled using the scheduler,
    which should improve performance when there no events used that poll quickly.<li>
<li>Events with priority of realtime now run in their own threads</li>
<li>Kaithem.persist now assumes relative paths are relative to vardir/moduledata, which is a new folder defined for modules to store large
amounts of variable data without cluttering the registry.</li>
<li>Add kaithem.web.goto(url) function</li>
<li>New Virtual Resource mechanism for updatable objects</li>
<li>Option not to have APIWidgets echo back messages sent to server</li>
<li>New state machines API</li>
<li>Fix the uptime function</li>
<li>No longer log every event run, it was causing a performance hit with realtime events and wasn't that useful</li>
<li>Logging is now based on python's builtin logging module, meaning log dumps are readable now.</li>
<li>Realtime scrolling log feeds powered by the new scrollbox widget.</li>
<li>Logging format defaults to null</li>
<li>Fix security error in viewing logs</li>
</ul>
</div>

<h3>0.55</h3>
<div class="sectionbox">
<ul>
<li>Fix bug where si formatted numbers were rounded down</li>
<li>Multiple message bus subscribers run simultaneously instead of sequentially</li>
<li>Events now have an enable option</li>
<li>Message events can now be ratelimited, additional messages are simply ignored</li>
<li>Slight theming improvements</li>
<li>Sound search path feature, added built in sounds</li>
<li>Modules now display MD5 sums(Calculated by dumping to UTF-8 JSON in the most compact way with sorted keys.
    Module and resource names are also hashed, but the locations of external modules are ignored)</li>
<li>Use of the print function in an event under python3 will print both to the console and to the event's editing page(only most recent 2500 bytes kept)</li>
<li>Change the way the scheduler works</li>
<li>Setup actions no longer run twice when saving! (However, setup actions may run and retry any number of times due to dependancy resolution at bootup)</li>
<li>Fix bug where references in the locals of deleted or modified events sometimes still hung around and messed up APIs based on __del__</li>
<li>Stable initial event loading attempt order(Sorted by (module,resource) tuple.) Failed events will be retried up to the max attempts in the same order.</li>
<li>Kaithem now appears to shut down properly without the old workaround</li>
<li>Ship with the requests library included, but prefer the installed version if possible</li>
<li>Add ability to store individual modules outside of kaithem's directory, useful for develpoment</li>
<li>Support for embedded file resources in modules</li>
<li>Eliminate polling from all builtin widgets. Switched to a pure push model.
    THIS IS A POSSIBLE BREAKING CHANGE FOR CUSTOM WIDGETS,
    although since those were never really properly documented it will likely be fine,
    and only minor changes will be required to accomodate this new behavior. All default widgets are exactly the same from a user perspective,
    only faster and more efficient.</li>
<li>Can now inspect event scopes just like module objects. Inspectors have been greatly improved.</li>
<li>Run a garbage collection sweep after deleting events or modules.</li>
<li>Fix bug where "don't add aditional content" still added a footer.</li>
<li>kaithem.web.resource lookups</li>
<li>Add jslibs module</li>
<li>Can now manually run any event</li>
<li>Lots of stability improvements</li>
<li>No more widget callbacks running twice</li>
<li>Add six.py to thirdparty library(Cherrypy now depends on it)</li>
<li>Fix bug saving data with unicode in it on some versions</li>
<li>Fix error loading resources with DOS style line endings</li>
<li>Fix spelling error in quotes file</li>
</ul>
</div>

<h3>0.54</h3>
<div class="sectionbox">
<ul>
<li>New file browser like module view</li>
<li>New resource type: folder</li>
<li>Support for __index__ pages</li>
<li>Raise exception if port not free instead of exiting silently.</li>
<li>New config option: log-format: null discards logs instead of saving them.</li>
<li>Slider widgets only show a few decimal places now</li>
<li>Fix pagename not defined issue that interfered with proper error logging in pages</li>
<li>Add more complete logging info to page error logs. The user's IP, and the exact URL they tried will be logged.</li>
<li>Flag errors in red in log page</li>
<li>Fix bug where message events were not stopping when deleted</li>
<li>Page Error logs now show IP address of requester and any cookies(requires permission "users/logs.view")</li>
<li>Retrying logging in no longer redirects to same error page even if sucessful</li>
<li>Fix weird file not found linux error in file manager that made dangling symlinks screw everything up</li>
<li>Fix bug where text selection and links sometimes don't work in text display widgets</li>
<li>Errors in zip uploads show up on the event pages themselves</li>
<li>Add JS to sliders to try to stop unintentional page slipping around on mobile</li>
<li>Errors in widget callback functions now post to /system/errors/widget s</li>
<li>Can now inspect module objects</li>
<li>Page acesses can be logged</li>
<li>Adding a __doc__ string to the code in the setup portion of an event will now add a description on the module index.</li>
<li>You can also add doc string descriptions to pages with a module level block comment and __doc__="str" </li>
<li>One must have either /admin/modules.edit, /users/logs.view, or /admin/errors.view to view page or event errors.</li>
<li>Better default new page contents</lI>
<li>Mouse over the unsaved change asterix to view specifically what has unsaved changes.</li>
<li>Unsaved registry changes now have the asterix</li>
<li>Paginated logs, fix major bug with logging</li>
<li>/system/notifications/important notifications are highlighted</li>
<li>Switch to CodeMirror instead of ace for better theming and mobile support(You may need to anable it in your user settings)</li>
<li>Improve normalization of messagebus topics, which had caused some problems with missed messages in the log.</li>
<li>Basic Debian packaging tools</li>
<li>Private option for kaithem.persist.save</li>
<li>Errors occurring in widget callbacks are now reported on the front page errors log.</li>
<li>Threads page tells you what the thread class is</li>
<li>New(Fully compatible with old saves) save format that is much easier to work with manually and with git</li>
<li>kaithem.misc.version and kaithem.misc.version_info values</li>
<li>Usability Improvements</li>
<li>!function event triggers let you trigger an event by calling a function</li>
<li>Remove unsafe GET requests</li>
<li>Fix security hole in loading library module that allowed any user to do so.</li>
<li>Increase stack size to 256K per thread, preventing segfaults</li>
<li>Fix bug where all accesses to user pages had to use the same lock which meant that accessing a page could actually cause a deadlock if accessing that page caused an HTTP to another page</li>
<li>Lots of misc changes</li>
</ul>
</div>

<h3>0.53</h3>
<div class="sectionbox">
<p class="warning">
This version differs by only a single line from 0.52 and fixes a critical security flaw. All users of the previous version should upgrade immediately.
</p>
<ul>
<li>Fix bug that let anyone, even an unregistered user change the settings for any user.</li>
</ul>
</div>


<h3>0.52(Minor Bugfix Release)</h3>
<div class="sectionbox">
<ul>
<li>Fix about box error on windows</li>
<li>Fix non-cross platform default strftime</li>
<li>Should the user enter a bad strftime, revert to the default.</li>
<li>Fix error saving uncompressed logs</li>
<li>Add mplayer and lm-sensors to acknowledgements</li>
</ul>
</div>


<h3>0.51(Security Patch Release)</h3>
<div class="sectionbox">
<ul>
<li>Fix very old and very important security bug where kaithem's folders in it's var directory were readable by other users.</li>
</ul>
</div>


<h3>0.5</h3>
<div class="sectionbox">
<ul>
<li>kaithem.time.accuracy() returns an estimate of the max error in the current system time in seconds using NTP.</li>
<li>Slight performance boost for low-priority events</li>
<li>kaithem.misc.errors(f) calls f with no args and returns any exceptions that might result.</li>
<li>Automatic daily check of mail settings in case someone changed things.</li>
<li>kaithem.string.formatTimeInterval()</li>
<li>When a user logs in, his [username,ip] is posted to /system/auth/login, or to /auth/user/logout when he logs out.</li>
<li>Ability to set default vaules for lattitude and longitude in astro functions.</li>
<li>When a user logs in, logs out, or fails to log in, his username and IP address are posted to /auth/user/loginfail</li>
<li>Lots of misc logging</li>
<li>(very) Basic versioning support for events, will save your draft in case of error, and allows reverting.</li>
<li>Auto fall back to tilde version if kaithem.persist.load fails(autorecover=false to disable this)</li>
<li>One page with syntax errors can no longer crash kaithem at loadtime</li>
<li>Support for !time trigger expressions</li>
<li>About Page now shows module versions</li>
<li>Defaults for precision parameter of kaithem.string methods</li>
<li>Default strftime string now only uses portable characters</li>
<li>Revert cherrypy to 3.2.3 for users running python 2.</li>
<li>Fix error pages on python2</li>
<li>Fix python2 inability to create new events</li>
<li>Default FPS is 60 instead of 24</li>
<li>Fix intermittent error that sliders sometimes raised because write() was converting to string</li>
<li>Fix documentation on the widget system</li>
<li>(partial)Ability to reload the configuration files</li>
<li>File manager now sorted</li>
<li>New APIWidget allows you to easily interact with the server in custom javascript.</li>
<li>Onrelease slider widget lets you see what you are doing before you let go</li>
<li>mplayer backend works even without pulseaudio</li>
<li>Document kaithem.registry functions</li>
<li>Pause, unpause, and set volume now work correctly in python2</li>
<li>JookBawkse module now has better interface, shows now playing in realtime, allows rescanning the media library</li>
<li>Fix bug where the registry entries were the same object as what you set instead of a copy.</li>
<li>Fix Bug where some pages were not showing up in the pagelisting even if the user had permissions</li>
<li>Fix bug where trying to render a widget with write permissions crashed if a __guest__ tried</li>

</ul>
</div>

<h3>0.45 Hotfix 001</h3>
<div class="sectionbox">
<ul>
<li>Fix "changed size during iteration" event bug, Replace outdated event scoping documentation.</li>
</ul>
</div>

<h3>0.45</h3>
<div class="sectionbox">
<ul>
<li>Built in profiling(with yappi)</li>
<li>View processes on the server(on linux)</li>
<li>Bash Console</li>
<li>Upgrade cherrypy version to 3.3.0(Only for python 3)</li>
<li>Cleaner toolbar layout</li>
<li>Support for MPlayer as an audio backend</li>
<li>File Browser</li>
<li>Kaithem.persist API for working with files on disk</li>
<li>Pause/Unpause/change volume while playing(mplayer only)</li>
<li>Fixed lack of HTML escaping on the non-ace event editor</li>
<li>Change autoreload interval to 5 seconds for a slight performance boost on raspi</li>
<li>kaithem.misc.uptime()</li>
<li>Modules Library</li>
<li>Horizontal Slider Widgets</li>
<li>Stop sounds from settings page</li>
<li>__default__ pages catch nonexistant pages</li>
<li>Fix bash console</li>
<li>/system/modules/loaded and /system/modules/unloaded messages</li>
<li>New __all_permissions__ permission that grants every permission on the system.</li>
<li>kaithem.string.userstrftime and kaithem.string.SIFormat</li>
<li>User Settings Page shows a list of what permissions you have</li>
</ul>
</div>

<h3>Version 0.4</h3>
<div class="sectionbox">
<ul>
<li>New AJAX widgets(!)</li>
<li>Critical dependancy resolution/initialization bugfix</li>
<li>Critical ependancy resolution bugfix</li>
<li>Critical bugfix for the error that prevented editing things that errored during initialization</li>
<li>Minor bugfix: event rate limit displays properly</li>
<li>Status bar notifications work with chrome now</li>
<li>Ability to disable JS code highlighting per user(for mobile browsers)</li>
<li>Kaithem Registry</li>
<li>Theming Improvements</li>
<li>kaithem.time.moonAge() renamed to kaithem.time.moonPhase()</li>
</ul>
</div>