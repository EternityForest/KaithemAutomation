<%!
from src.util import url
from src import pages,newevt,usrpages,unitsofmeasure,util,widgets,kaithemobj
import json,re,cherrypy,inspect
%>

<%include file="/pageheader.html"/>
<title>Object Inspector</title>

<h2>Inspecting ${objname|h}</h2>
${obj.__class__|h}
<pre>${util.saferepr(obj)|h}</pre>
<article>

%if hasattr(obj,'__dict__'):
<h3>Object Attributes</h3>
<div class="sectionbox">
<dl>
%for i in obj.__dict__:
<dt><a href="?objname=${objname}.${i}&objpath=${objpath},a${i}">${i|h}</a></dt>
<dd>${util.saferepr(obj.__dict__[i])|h}</dd>
%endfor
</div>
%endif


<h3>Source Code</h3>
<pre>
%try:
${inspect.getsource(obj)|h}
%except:
<p>No Source Code Found</p>
%endtry
</pre>

%if isinstance(obj, (list)):
<h3>List Contents (${len(obj)} items)</h3>
<ol start=0>
%for n, i in enumerate(obj):
<li><a href="?objname=${objname}[${n}]&objpath=${objpath|h},i${n}">${util.saferepr(i)|h}</a></li>
%endfor
</ol>
%endif

%if isinstance(obj, (dict)):
<h3>Dict Contents (${len(obj)} items)</h3>
<div class="sectionbox">
<dl>
%for i in obj:
<dt><a href="?objname=${objname}['${i}']&objpath=${objpath},s${i}">${i|h}</a></dt>
<dd>${util.saferepr(obj[i])|h}</dd>
%endfor
</div>
%endif

</article>
