<%include file="/pageheader.html"/>

<%!
from src import tagpoints
import gc
%>



<script src="/static/widget.js"></script>
<h1>Tag Points</h1>
<div class="sectionbox">
<p class="help">
    This page lists all Tag Points currently managed by Kaithem.
</p>
<table border="1">
<tr><th>Name</th><th>Value</th><th>Interval</th><th>Active Claim</th><th>Owner</th><th>Subscribers</th></tr>
%for i in tagpoints.allTagsAtomic:
%if tagpoints.allTagsAtomic[i]() and isinstance(tagpoints.allTagsAtomic[i](),tagpoints._NumericTagPoint):
<tr>
    <td><a href="/tagpoints/${i|u}">${i|h}</h></td>
    <td>${tagpoints.allTagsAtomic[i]().meterWidget.render()}</td>
    <td>${tagpoints.allTagsAtomic[i]().interval}</td>
    <td>${tagpoints.allTagsAtomic[i]().activeClaim[2]}</td>
    <td>${tagpoints.allTagsAtomic[i]().owner}</td>
    <td>${len(tagpoints.allTagsAtomic[i]().subscribers)}</td>

</tr>
%endif

%if tagpoints.allTagsAtomic[i]() and isinstance(tagpoints.allTagsAtomic[i](),tagpoints._StringTagPoint):
<tr>
    <td><a href="/tagpoints/${i|u}">${i|h}</h></td>
    <td>${tagpoints.allTagsAtomic[i]().spanWidget.render()}</td>
    <td>${tagpoints.allTagsAtomic[i]().interval}</td>
    <td>${tagpoints.allTagsAtomic[i]().activeClaim[2]}</td>
    <td>${tagpoints.allTagsAtomic[i]().owner}</td>
    <td>${len(tagpoints.allTagsAtomic[i]().subscribers)}</td>
</tr>
%endif

%if tagpoints.allTagsAtomic[i]()==None:
<tr>
    <td>${i|h}</td>
    <td>DELETED</td>
    <td>DELETED</td>
    <td>DELETED</td>
    <td>DELETED</td>
</tr>
%endif

%endfor
</table>
</div>
<%include file="/pagefooter.html"/>