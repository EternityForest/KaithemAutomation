<%include file="/pageheader.html"/>
<%!

%>
<script src="/static/js/thirdparty/image-map-creator.bundle.js"></script>
<script src="/static/js/thirdparty/p5/p5.min.js"></script>
<script src="/static/js/thirdparty/p5/addons/p5.dom.min.js"></script>
<div>
<h1>Leaflet maps demo</h1>
</div>
<div class="window paper" style="height: auto;">



<!DOCTYPE html>
<html>
<head>
	
	<title>map tile server Maps</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	

    <link rel="stylesheet" href="/static/js/thirdparty/leaflet/leaflet.css"/>
    <script src="/static/js/thirdparty/leaflet/leaflet.min.js" ></script>
    <script src="/static/js/thirdparty/leaflet/leaflet.tilelayer.fallback.js"></script>


	
</head>
<body>


<p>To update or get new maps, either browse around or add them to vardir/maptiles/opentopomap/z/x/y.png</p>
<p>If available maps are served to anyone with /users/maptiles.view.   If the user has /admin/settings.edit, the tiles will be fetched
	automatically from opentopomap.org.
</p>

<p>This is a rather large privacy issue if you aren't careful, as it allows people with the view permission to see which maps
	are cached and thus which areas someone must have been looking at.  Avoid using this for highly sensitive applications.
</p>
<p>Use /static/js/leaflet/leaflet.min.js and /static/js/leaflet/leaflet.css to make your own map-enabled modules.  Kaithem's builtin tile server is on: /maptiles/tile/{z}/{x}/{y}.png when
    enabled.
</p>

<p></p>

<div id="mapid" style="width: 80vw; height: 80vh;"></div>
<script>

	var mymap = L.map('mapid').setView([51.505, -0.09], 6);

    
    var myTileLayer = L.tileLayer.fallback('/maptiles/tile/{z}/{x}/{y}.png', {
		attribution: 'OpenTopoMap (CC-BY-SA)' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
		id: 'osm/streets-v11',
		tileSize: 512,
		zoomOffset: -1
    });

    myTileLayer.addTo(mymap);

	var popup = L.popup();

	function onMapClick(e) {
		popup
			.setLatLng(e.latlng)
			.setContent("You clicked the map at " + e.latlng.toString())
			.openOn(mymap);
	}

	mymap.on('click', onMapClick);

</script>



</body>
</html>

</div>
<%include file="/pagefooter.html"/>