<%!
from src.util import url
from src import modules
%>
<%include file="/pageheader.html"/>
<h2> Modules <sup><a href="/docs#modules">[help]</a></sup></h2>
<title>Kaithem Modules</title>
<div class="sectionbox">
<div class="menubar">
Modules State MD5: <b>${modules.moduleshash}</b></br>
<a class="button createbutton" href="/modules/newmodule">Add New Module</a>
<a class="button deletebutton" href="/modules/deletemodule">Delete Module</a>
<a class="button upload-module-button" href="/modules/upload">Upload Modules as ZIP file</a>
<a class="button modules-library-link" href="/modules/library">Modules Library</a>
<form style="display:inline;" action="/modules/search/__all__"><input name="search" placeholder="Search all modules"/><input type=submit value="search"/></form>

<br>
</div>
<p class="help">
The following modules are currently loaded and active on the server.
</p>

<hr>
<ul>
%for i in sorted(ActiveModules.keys()):
<li>\
%if i in modules.unsaved_changed_obj or i in [i[0] for i in modules.unsaved_changed_obj if isinstance(i,tuple)]:
*\
%endif
<a href="/modules/module/${url(i)}#resources" title="MD5: ${modules.getModuleHash(i)}">${i}</a></li>\
%endfor
</ul>
</div>
