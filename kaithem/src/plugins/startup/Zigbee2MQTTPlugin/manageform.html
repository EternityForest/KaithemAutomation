
<h3>Info</h3>
<p class="help">
This device lets you access a Zigbee2MQTT server.
</p>

${obj.apiWidget.render("api")}


<table>
    <tr>
        <td>MQTT Server(Usually localhost)</td>
        <td><input name="device.mqttServer" value="${data.get('device.mqttServer','localhost')|h}"></td>
    </tr>
</table>



<h3>Interactive Manager</h3>
<div id="app">

    <div>
        <h4>Controls</h4>
        <button  type="button" v-on:click="api.send(['enablePairing'])">Enable Pairing for 2 minutes</button>
        <h4>All Devices</h4>
        <table>
            <tr v-for="i in devices">
                <td>
                    {{i.friendly_name}}
                </td>
                <td>
                    {{i?.definition?.vendor}}
                </td>
                <td>
                    {{i?.definition?.description}}
                </td>
                <td>
                    {{i.ieee_address}}
                </td>
            </tr>

        </table>
    </div>


</div>



<script src="/static/js/vue2.js"></script>

<script>

data={
    api: api,
    devices:{},
    selectedDevice:{}
  }
var app = new Vue({
  el: '#app',
  data:data
})

api.upd = function(m){
    if (m[0]=='devices')
    {
        data.devices=m[1]
    }
}

function promptSendText()
{
    x = prompt("Enter Text")
    if (x!=null)
    {
        api.send(['sendText', x])
    }
}

api.send(['getState'])

</script>