function DialogBox(t,e,n,a,i,o){var r=$('<div id="modal_overlay" style="display:none;"></div>'),s=$('<div class="modal"></div>');function l(){r.fadeOut(200,function(){$(this).remove()})}s.append('<header><h2 class="title">'+e+"</h2></header>"),$("<section></section>").appendTo(s).append(t);var d=$("<footer></footer>").appendTo(s);n&&$('<span id="dialog-ok" class="text-button">'+n+"</span>").appendTo(d).click(function(){var t=!1;_.isFunction(i)&&(t=i()),t||l()}),a&&$('<span id="dialog-cancel" class="text-button">'+a+"</span>").appendTo(d).click(function(){_.isFunction(o)&&o(),l()}),r.append(s),$("body").append(r),r.fadeIn(200)}function FreeboardModel(t,e,n){var a=this;this.version=0,this.isEditing=ko.observable(!1),this.allow_edit=ko.observable(!1),this.allow_edit.subscribe(function(t){t?$("#main-header").show():$("#main-header").hide()}),this.header_image=ko.observable(),this.plugins=ko.observableArray(),this.datasources=ko.observableArray(),this.panes=ko.observableArray(),this.datasourceData={};var o={set:function(t,e,n){throw new Error("You cannot directly overwrite a datasource here. Try assigning to one of the properties of the source instead")}};a.protectedDataSourceData=new Proxy(a.datasourceData,o),this.processDatasourceUpdate=function(t,e){var n=t.name();a.datasourceData[n]=e,_.each(a.panes(),function(t){_.each(t.widgets(),function(t){t.processDatasourceUpdate(n)})})},this._datasourceTypes=ko.observable(),this.datasourceTypes=ko.computed({read:function(){a._datasourceTypes();var e=[];return _.each(t,function(t){var n=t.type_name,a=n;_.isUndefined(t.display_name)||(a=t.display_name),e.push({name:n,display_name:a})}),e}}),this._widgetTypes=ko.observable(),this.widgetTypes=ko.computed({read:function(){a._widgetTypes();var t=[];return _.each(e,function(e){var n=e.type_name,a=n;_.isUndefined(e.display_name)||(a=e.display_name),t.push({name:n,display_name:a})}),t}}),this.addPluginSource=function(t){t&&-1==a.plugins.indexOf(t)&&a.plugins.push(t)},this.globalSettings={},this.globalSettingsDefaults={theme:{}},Object.assign(this.globalSettings,this.globalSettingsDefaults),this.globalSettingsHandlers={},this.serialize=function(){var t=[];_.each(a.panes(),function(e){t.push(e.serialize())});var e=[];return _.each(a.datasources(),function(t){e.push(t.serialize())}),{version:1,header_image:a.header_image(),allow_edit:a.allow_edit(),plugins:a.plugins(),panes:t,datasources:e,columns:n.getUserColumns(),globalSettings:a.globalSettings}},this.setGlobalSettings=function(t){for(var e in Object.assign(a.globalSettings,t),a.globalSettingsHandlers)a.globalSettingsHandlers[e](a.globalSettings)},this.globalSettingsHandlers.css=function(t){for(i in t.theme){var e=t.theme[i];i.includes("-image")&&e&&(e="url("+e+")"),document.body.style.setProperty(i,e)}},this.deserialize=async function(i,o){async function r(){n.setUserColumns(i.columns),_.isUndefined(i.allow_edit)?a.allow_edit(!0):a.allow_edit(i.allow_edit),a.version=i.version||0,a.header_image(i.header_image),_.each(i.datasources,async function(e){var n=new DatasourceModel(a,t);await Promise.resolve(n.deserialize(e)),a.addDatasource(n)});var r=_.sortBy(i.panes,function(t){return n.getPositionForScreenSize(t).row});for(var s in _.each(r,function(t){var n=new PaneModel(a,e);n.deserialize(t),a.panes.push(n)}),a.allow_edit()&&0==a.panes().length&&a.setEditing(!0),_.isFunction(o)&&await Promise.resolve(o()),a.globalSettings)delete a.globalSettings[s];Object.assign(a.globalSettings,a.globalSettingsDefaults),a.setGlobalSettings(i.globalSettings||{}),n.processResize(!0)}a.clearDashboard(),_.each(i.plugins,function(t){a.addPluginSource(t)}),_.isArray(i.plugins)&&i.plugins.length>0?head.js(i.plugins,async function(){await r()}):await r()},this.clearDashboard=function(){n.removeAllPanes(),_.each(a.datasources(),function(t){t.dispose()}),_.each(a.panes(),function(t){t.dispose()}),a.plugins.removeAll(),a.datasources.removeAll(),a.panes.removeAll()},this.loadDashboard=function(t,e){n.showLoadingIndicator(!0),a.deserialize(t,function(){n.showLoadingIndicator(!1),_.isFunction(e)&&e(),freeboard.emit("dashboard_loaded")})},this.loadDashboardFromLocalFile=function(){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var t=document.createElement("input");t.type="file",$(t).on("change",function(t){var e=t.target.files;if(e&&e.length>0){var n=e[0],i=new FileReader;i.addEventListener("load",function(t){var e=t.target,n=JSON.parse(e.result);a.loadDashboard(n),a.setEditing(!1)}),i.readAsText(n)}}),$(t).trigger("click")}else alert("Unable to load a file in this browser.")},this.downloadDashboardClicked=function(){var t=$(event.currentTarget),e=t.data("siblings-shown")||!1;e?$(event.currentTarget).siblings("label").fadeOut("slow"):$(event.currentTarget).siblings("label").fadeIn("slow"),t.data("siblings-shown",!e)},this.downloadDashboard=function(t,e){var n=$(e.currentTarget).data("pretty"),i=document.createElement("a");if(n)var o=new Blob([JSON.stringify(a.serialize(),null,"\t")],{type:"application/octet-stream"});else o=new Blob([JSON.stringify(a.serialize())],{type:"application/octet-stream"});document.body.appendChild(i),i.href=window.URL.createObjectURL(o),i.download="dashboard.json",i.target="_self",i.click()},this.addDatasource=function(t){a.datasources.push(t)},this.deleteDatasource=function(t){delete a.datasourceData[t.name()],t.dispose(),a.datasources.remove(t)},this.createPane=function(){var t=new PaneModel(a,e);a.addPane(t)},this.addGridColumnLeft=function(){n.addGridColumnLeft()},this.addGridColumnRight=function(){n.addGridColumnRight()},this.subGridColumnLeft=function(){n.subGridColumnLeft()},this.subGridColumnRight=function(){n.subGridColumnRight()},this.addPane=function(t){a.panes.push(t)},this.deletePane=function(t){t.dispose(),a.panes.remove(t)},this.deleteWidget=function(t){ko.utils.arrayForEach(a.panes(),function(e){e.widgets.remove(t)}),t.dispose()},this.setEditing=function(t,e){if(a.allow_edit()||!t){a.isEditing(t),_.isUndefined(e)&&(e=!0);var i=e?250:0,o=$("#admin-bar").outerHeight();t?($("#toggle-header-icon").addClass("icon-chevron-up").removeClass("icon-wrench"),$(".gridster .gs_w").css({cursor:"pointer"}),$("#main-header").animate({top:"0px"},i),$("#board-content").animate({top:o+20+"px"},i),$("#main-header").data().shown=!0,n.attachWidgetEditIcons($(".sub-section")),n.enableGrid()):($("#toggle-header-icon").addClass("icon-wrench").removeClass("icon-chevron-up"),$(".gridster .gs_w").css({cursor:"default"}),$("#main-header").animate({top:"-"+o+"px"},i),$("#board-content").animate({top:"20"},i),$("#main-header").data().shown=!1,$(".sub-section").unbind(),n.disableGrid()),n.showPaneEditIcons(t,e)}},this.toggleEditing=function(){var t=!a.isEditing();a.setEditing(t)}}function FreeboardUI(){var t,e=10,n=300,a=3,i=e+n+e,o=a,r=$('<div class="wrapperloading"><div class="loading up" ></div><div class="loading down"></div></div>');function s(e){var n=f(),a=function(){};e&&(a=function(e){var a=ko.dataFor(this),i=b(a);$(this).attr("data-sizex",Math.min(a.col_width(),n,t.cols)).attr("data-row",i.row).attr("data-col",i.col),a.processSizeChange()}),u(Math.min(n,o)),p(a),c()}function l(e){u(t.cols+1)&&p(function(){var n,a=ko.dataFor(this),i=t.cols>1?t.cols-1:1,o=a.col[i],r=a.row[i];e?(leftPreviewCol=!0,n={row:r,col:o<t.cols?o+1:t.cols}):(rightPreviewCol=!0,n={row:r,col:o});$(this).attr("data-sizex",Math.min(a.col_width(),t.cols)).attr("data-row",n.row).attr("data-col",n.col)}),c(),o=t.cols}function d(e){u(t.cols-1)&&p(function(){var n,a=ko.dataFor(this),i=t.cols+1,o=a.col[i],r=a.row[i];e?n={row:r,col:o>1?o-1:1}:n={row:r,col:o<=t.cols?o:t.cols};$(this).attr("data-sizex",Math.min(a.col_width(),t.cols)).attr("data-row",n.row).attr("data-col",n.col)}),c(),o=t.cols}function c(){var e=$(".column-tool"),n=$("#board-content").width(),o=Math.floor(n/i);t.cols<=a?e.addClass("min"):e.removeClass("min"),t.cols>=o?e.addClass("max"):e.removeClass("max")}function f(){var t=$("#board-content").width();return Math.floor(t/i)}function u(e){(void 0===e||e<a)&&(e=a);var n=f();e>n&&(e=n);var o=i*e+e;return $(".responsive-column-width").css("max-width",o),e!==t.cols}function p(a){var i=t.$el;i.find("> li").unbind().removeData(),$(".responsive-column-width").css("width",""),t.generate_grid_and_stylesheet(),i.find("> li").each(a),t.init(),$(".responsive-column-width").css("width",t.cols*n+t.cols*e*2)}function h(e,n,a){var i=t.cols;_.isUndefined(n)||(e.row[i]=n),_.isUndefined(a)||(e.col[i]=a)}function g(t,e){_.isUndefined(e)&&(e=!0);var n=e?250:0;t?($(".pane-tools").fadeIn(n),$("#column-tools").fadeIn(n)):($(".pane-tools").fadeOut(n),$("#column-tools").fadeOut(n))}function m(t,e){e?$(t).find(".sub-section-tools").fadeIn(250):$(t).find(".sub-section-tools").fadeOut(250)}function b(e){var n=t.cols;if(_.isNumber(e.row)&&_.isNumber(e.col)){var a={};a[n]=e.row,e.row=a,(a={})[n]=e.col,e.col=a}var i=1,o=1e3;for(var r in e.col){if(r==n)return{row:e.row[r],col:e.col[r]};if(e.col[r]>n)i=n;else{var s=n-r;s<o&&(i=r,o=s)}}return i in e.col&&i in e.row?{row:e.row[i],col:e.col[i]}:{row:1,col:i}}return ko.bindingHandlers.grid={init:function(a,i,o,r,l){t=$(a).gridster({widget_margins:[e,e],widget_base_dimensions:[n,10],resize:{enabled:!1,axes:"x"}}).data("gridster"),s(!1),t.disable()}},{showLoadingIndicator:function(t){!function(t){t?r.fadeOut(0).appendTo("body").fadeIn(500):r.fadeOut(500).remove()}(t)},showPaneEditIcons:function(t,e){g(t,e)},attachWidgetEditIcons:function(t){!function(t){$(t).hover(function(){m(this,!0)},function(){m(this,!1)})}(t)},getPositionForScreenSize:function(t){return b(t)},processResize:function(t){s(t)},disableGrid:function(){t.disable()},enableGrid:function(){t.enable()},addPane:function(e,n,a){!function(e,n,a){var i=b(n),o=i.col,r=i.row,s=Number(n.width()),l=Number(n.getCalculatedHeight());t.add_widget(e,s,l,o,r),a&&g(!0),h(n,r,o),$(e).attrchange({trackValues:!0,callback:function(t){"data-row"==t.attributeName?h(n,Number(t.newValue),void 0):"data-col"==t.attributeName&&h(n,void 0,Number(t.newValue))}})}(e,n,a)},updatePane:function(e,n){!function(e,n){var a=n.getCalculatedHeight(),i=Number($(e).attr("data-sizey")),o=Number($(e).attr("data-sizex"));a==i&&n.col_width()==o||t.resize_widget($(e),n.col_width(),a,function(){t.set_dom_grid_height()})}(e,n)},removePane:function(e){t.remove_widget(e)},removeAllPanes:function(){t.remove_all_widgets()},addGridColumnLeft:function(){l(!0)},addGridColumnRight:function(){l(!1)},subGridColumnLeft:function(){d(!0)},subGridColumnRight:function(){d(!1)},getUserColumns:function(){return o},setUserColumns:function(t){!function(t){o=Math.max(a,t)}(t)}}}function PaneModel(t,e){var n=this;this.title=ko.observable(),this.width=ko.observable(1),this.row={},this.col={},this.col_width=ko.observable(1),this.col_width.subscribe(function(t){n.processSizeChange()}),this.widgets=ko.observableArray(),this.addWidget=function(t){this.widgets.push(t)},this.widgetCanMoveUp=function(t){return n.widgets.indexOf(t)>=1},this.widgetCanMoveDown=function(t){return n.widgets.indexOf(t)<n.widgets().length-1},this.moveWidgetUp=function(t){if(n.widgetCanMoveUp(t)){var e=n.widgets.indexOf(t),a=n.widgets();n.widgets.splice(e-1,2,a[e],a[e-1])}},this.moveWidgetDown=function(t){if(n.widgetCanMoveDown(t)){var e=n.widgets.indexOf(t),a=n.widgets();n.widgets.splice(e,2,a[e+1],a[e])}},this.processSizeChange=function(){setTimeout(function(){_.each(n.widgets(),function(t){t.processSizeChange()})},1e3)},this.getCalculatedHeight=function(){var t=_.reduce(n.widgets(),function(t,e){return t+e.height()},0);t*=6,t+=3,t*=10;var e=getComputedStyle(document.documentElement).getPropertyValue("--title-line-height");e=e.substring(0,e.length-2);var a=Math.ceil((t+parseFloat(e))/30);return Math.max(4,a)},this.serialize=function(){var t=[];return _.each(n.widgets(),function(e){t.push(e.serialize())}),{title:n.title(),width:n.width(),row:n.row,col:n.col,col_width:Number(n.col_width()),widgets:t}},this.deserialize=function(a){n.title(a.title),n.width(a.width),n.row=a.row,n.col=a.col,n.col_width(a.col_width||1),_.each(a.widgets,function(a){var i=new WidgetModel(t,e);i.deserialize(a),n.widgets.push(i)})},this.dispose=function(){_.each(n.widgets(),function(t){t.dispose()})}}function WidgetModel(t,e){var n=function(e){if(!e)return new Function("datasources","value","");var n="";e.includes("=")||e.includes("(")||(n="=value");var a=new Function("datasources","value",e+n);return function(e){return a(t.protectedDataSourceData,e)}};var a=this;this.datasourceRefreshNotifications={},this.calculatedSettingScripts={},this.dataTargets={},this.title=ko.observable(),this.fillSize=ko.observable(!1),this.type="",this.setType=async function(t,n){if(a.type!=t&&(a.type=t,_.isUndefined(a.widgetInstance)||(_.isFunction(a.widgetInstance.onDispose)&&a.widgetInstance.onDispose(),a.widgetInstance=void 0),await a.updateCalculatedSettings(),t in e&&_.isFunction(e[t].newInstance))){var i=e[t];async function o(){await i.newInstance(a.calculatedSettings,function(t){a.fillSize(!0===i.fill_size),a.widgetInstance=t,a.widgetInstance.dataTargets=a.dataTargets,a.widgetInstance.processCalculatedSetting=a.processCalculatedSetting,a.shouldRender(!0),a._heightUpdate.valueHasMutated()})}i.external_scripts?head.js(i.external_scripts.slice(0),o):o()}},this.settings={},this.calculatedSettings={},this.setSettings=async function(t){if(this.settings=t,Object.assign(this.calculatedSettings,this.settings),await a.updateCalculatedSettings(),!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.onSettingsChanged))try{await a.widgetInstance.onSettingsChanged(this.settings)}catch(t){throw freeboard.showDialog($("<pre>").text(String(t)),"Error changing settings","OK"),t}a._heightUpdate.valueHasMutated()},this.processDatasourceUpdate=function(t){var e=a.datasourceRefreshNotifications[t];_.isArray(e)&&_.each(e,function(t){a.processCalculatedSetting(t)})},this.callValueFunction=function(e){return e.call(void 0,t.datasourceData)},this.processSizeChange=function(){!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.onSizeChanged)&&a.widgetInstance.onSizeChanged()},this.processCalculatedSetting=async function(t){if(_.isFunction(a.calculatedSettingScripts[t])){var e=void 0;try{e=a.callValueFunction(a.calculatedSettingScripts[t])}catch(i){var n=a.settings[t];i instanceof ReferenceError&&/^\w+$/.test(n)&&(e=n)}var i=await e;a.calculatedSettings[t]=i,await async function(e){if(!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.onCalculatedValueChanged)&&!_.isUndefined(e))try{await a.widgetInstance.onCalculatedValueChanged(t,e)}catch(t){console.log(t.toString())}}(i)}},this.updateCalculatedSettings=async function(){if(a.datasourceRefreshNotifications={},a.calculatedSettingScripts={},a.type){var t=e[a.type].settings,o=new RegExp("=\\s*datasources.([\\w_-]+)|datasources\\[['\"]([^'\"]+)","g"),r=a.settings;for(var s in t){var l=t[s];if("calculated"==l.type||"target"==l.type){var d=r[l.name];if(_.isUndefined(d))a.dataTargets[l.name]=function(t){};else{var c,f=0,u=0;if(_.isArray(d)){u=1;var p=[];for(i in d)"="==i[0]?p.push(i.substring(1)):"target"==l.type?p.push(i):p.push(JSON.stringify(i));d="["+p.join(",")+"]"}if(d)if("="==d[0]||"target"==l.type||u){"="==d[0]&&(d=d.substring(1));var h,g=d;(d.match(/;/g)||[]).length<=1&&-1==d.indexOf("return")&&(g="return "+d);try{h=new Function("datasources",g)}catch(t){console.log(" arg "+g+"\nlooks like a function but won't compile, treating as text"),f=1}}else f=1;else h=new Function("datasources","return undefined;");if(f){var m=r[l.name].replace(/"/g,'\\"').replace(/[\r\n]/g," \\\n");h=new Function("datasources",'return "'+m+'";')}if(a.calculatedSettingScripts[l.name]=h,"target"==l.type)try{a.dataTargets[l.name]=n(d)}catch(t){console.log("Bad data target: "+d),console.log(t),a.dataTargets[l.name]=function(t){}}for(await a.processCalculatedSetting(l.name);c=o.exec(d);){var b=c[1]||c[2],v=a.datasourceRefreshNotifications[b];_.isUndefined(v)&&(v=[],a.datasourceRefreshNotifications[b]=v),-1==_.indexOf(v,l.name)&&v.push(l.name)}}}}}},this._heightUpdate=ko.observable(),this.height=ko.computed({read:function(){return a._heightUpdate(),!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.getHeight)?a.widgetInstance.getHeight():1}}),this.shouldRender=ko.observable(!1),this.render=async function(t){a.shouldRender(!1),!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.render)&&(a.widgetInstance.render(t),await a.updateCalculatedSettings())},this.dispose=function(){},this.serialize=function(){return{title:a.title(),type:a.type,settings:a.settings}},this.deserialize=async function(t){a.title(t.title),await a.setSettings(t.settings),await a.setType(t.type)}}DatasourceModel=function(t,e){var n=this;function a(){_.isUndefined(n.datasourceInstance)||(_.isFunction(n.datasourceInstance.onDispose)&&n.datasourceInstance.onDispose(),n.datasourceInstance=void 0)}this.name=ko.observable(),this.latestData=ko.observable(),this.settings={},this.setSettings=async function(t){if(n.settings=t,!_.isUndefined(n.datasourceInstance)&&_.isFunction(n.datasourceInstance.onSettingsChanged))try{await n.datasourceInstance.onSettingsChanged(t)}catch(t){throw freeboard.showDialog($("<pre>").text(String(t)),"Error changing settings","OK"),t}},this.updateCallback=function(e){t.processDatasourceUpdate(n,e),n.latestData(e);var a=new Date;n.last_updated(a.toLocaleTimeString())},this.type="",this.setType=async function(t){if(n.type!=t&&(n.type=t,a(),t in e&&_.isFunction(e[t].newInstance))){var i=e[t];async function o(){await i.newInstance(n.settings,function(t){n.datasourceInstance=t,t.updateNow()},n.updateCallback)}i.external_scripts?head.js(i.external_scripts.slice(0),o):await o()}},this.last_updated=ko.observable("never"),this.last_error=ko.observable(),this.serialize=function(){return{name:n.name(),type:n.type,settings:n.settings}},this.deserialize=async function(t){n.setSettings(t.settings),n.name(t.name),n.type=t.type,await n.setType(t.type)},this.getDataRepresentation=function(t){return new Function("data","return "+t+";").call(void 0,n.latestData())},this.updateNow=function(){!_.isUndefined(n.datasourceInstance)&&_.isFunction(n.datasourceInstance.updateNow)&&n.datasourceInstance.updateNow()},this.dispose=function(){a()}},DeveloperConsole=function(t){return{showDeveloperConsole:function(){!function(){var e=[],n=$("<div></div>"),a=$('<div class="table-operation text-button">ADD</div>'),i=$('<table class="table table-condensed sub-table"></table>');i.append($('<thead style=""><tr><th>Plugin Script URL</th></tr></thead>'));var o=$("<tbody></tbody>");function r(t){var n=$("<tr></tr>"),a=$('<ul class="board-toolbar"></ul>'),i=$('<input class="table-row-value" style="width:100%;" type="text">'),r=$('<li><i class="icon-trash icon-white"></i></li>').click(function(t){e=_.without(e,i),n.remove()});e.push(i),t&&i.val(t),a.append(r),o.append(n.append($("<td></td>").append(i)).append($('<td class="table-row-operation">').append(a)))}i.append(o),n.append($("<p>Here you can add references to other scripts to load datasource or widget plugins.</p>")).append(i).append(a).append('<p>To learn how to build plugins for freeboard, please visit <a target="_blank" href="http://freeboard.github.io/freeboard/docs/plugin_example.html">http://freeboard.github.io/freeboard/docs/plugin_example.html</a></p>'),_.each(t.plugins(),function(t){r(t)}),a.click(function(t){r()}),new DialogBox(n,"Developer Console","OK",null,function(){_.each(t.plugins(),function(t){$('script[src^="'+t+'"]').remove()}),t.plugins.removeAll(),_.each(e,function(e){var n=e.val();n&&n.length>0&&(t.addPluginSource(n),head.js(n+"?"+Date.now()))})})}()}}},JSEditor=function(){function t(t){t}return{displayJSEditor:function(t,e){!function(t,e){var n='// Example: Convert temp from C to F and truncate to 2 decimal places.\n// return (datasources["MyDatasource"].sensor.tempInF * 1.8 + 32).toFixed(2);';t||(t=n);var a=$('<div class="code-window"></div>'),i=$('<div class="code-mirror-wrapper"></div>'),o=$('<div class="code-window-footer"></div>'),r=$('<div class="code-window-header cm-s-ambiance">This javascript will be re-evaluated any time a datasource referenced here is updated, and the value you <code><span class="cm-keyword">return</span></code> will be displayed in the widget. You can assume this javascript is wrapped in a function of the form <code><span class="cm-keyword">function</span>(<span class="cm-def">datasources</span>)</code> where datasources is a collection of javascript objects (keyed by their name) corresponding to the most current data in a datasource.</div>');a.append([r,i,o]),$("body").append(a);var s=CodeMirror(i.get(0),{value:t,mode:"javascript",theme:"ambiance",indentUnit:4,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0}),l=$('<span id="dialog-cancel" class="text-button">Close</span>').click(function(){if(e){var t=s.getValue();t===n&&(t=""),e(t),a.remove()}});o.append(l)}(t,e)},setAssetRoot:function(e){t(e)}}},PluginEditor=function(t,e){function n(t,e){var n=$('<div class="validation-error"></div>').html(e);$("#setting-value-container-"+t).append(n)}function a(n,a,i,o,r,s){var l=$("<textarea></textarea>");i.multi_input?l.change(function(){var t=[];$(n).find("textarea").each(function(){var e=$(this).val();e&&(t=t.concat(e))}),a.settings[i.name]=t}):l.change(function(){a.settings[i.name]=$(this).val()}),o&&l.val(o),e.createValueEditor(l);var d=$('<ul class="board-toolbar datasource-input-suffix"></ul>'),c=$('<div class="calculated-setting-row"></div>');if(c.append(l).append(d),s)var f=$('<li><i class="icon-plus icon-white"></i><label>DATATARGET</label></li>').mousedown(function(t){t.preventDefault(),$(l).is(":focus")?$(l).insertAtCaret('datasources["').trigger("freeboard-eval"):$(l).val("").focus().insertAtCaret('datasources["').trigger("freeboard-eval")});else f=$('<li><i class="icon-plus icon-white"></i><label>DATASOURCE</label></li>').mousedown(function(t){t.preventDefault(),0==$(l).val().length&&$(l).insertAtCaret("="),$(l).insertAtCaret('datasources["').trigger("freeboard-eval")});if(d.append(f),!s){var u=$('<li><i class="icon-fullscreen icon-white"></i><label>.JS EDITOR</label></li>').mousedown(function(e){e.preventDefault(),t.displayJSEditor(l.val(),function(t){l.val(t),l.change()})});d.append(u)}if(r){var p=$('<li class="remove-setting-row"><i class="icon-minus icon-white"></i><label></label></li>').mousedown(function(t){t.preventDefault(),c.remove(),$(n).find("textarea:first").change()});d.prepend(p)}$(n).append(c)}function i(t,e,i,o,r){var s,l={type:i,settings:{}};function d(t,e,n){var a=$('<div id="setting-row-'+t+'" class="form-row"></div>').appendTo(c);return a.append('<div class="form-label"><label class="control-label">'+e+"</label></div>"),$('<div id="setting-value-container-'+t+'" class="form-value"></div>').appendTo(a)}var c=$("<div></div>"),f=$('<div id="plugin-description"></div>').hide();c.append(f);var u=[];function p(t,e,n){_.each(t,function(t){!_.isUndefined(t.default_value)&&_.isUndefined(o[t.name])&&(o[t.name]=t.default_value);var i=t.name;_.isUndefined(t.display_name)||(i=t.display_name);var r=d(t.name,i);switch(t.type){case"array":{var s=$('<div class="form-table-value-subtable"></div>').appendTo(r),c=$('<table class="table table-condensed sub-table"></table>').appendTo(s),f=$("<thead></thead>").hide().appendTo(c),p=$("<tr></tr>").appendTo(f),h=$("<tbody></tbody>").appendTo(c),g=[];function m(){l.settings[t.name].length>0?f.show():f.hide()}function b(e){var n=$("<tr></tr>").appendTo(h),a={};_.isArray(l.settings[t.name])||(l.settings[t.name]=[]),l.settings[t.name].push(a),_.each(t.settings,function(i){var r=$("<td></td>").appendTo(n),s="";if(_.isUndefined(e[i.name])||(s=e[i.name]),a[i.name]=s,"option"==i.type){var l=$("<select></select>").appendTo($('<div class="styled-select"></div>').appendTo(r)).change(function(){a[i.name]=$(this).val()});_.each(i.options,function(t){var e,n;_.isObject(t)?(e=t.name,n=t.value):e=t,_.isUndefined(n)&&(n=e),_.isUndefined(x)&&(x=n),$("<option></option>").text(e).attr("value",n).appendTo(l)}),l.val(o[s])}else $('<input class="table-row-value" type="text">').appendTo(r).val(s).attr("list",t.name+i.name+"ac").change(function(){a[i.name]=$(this).val()})}),n.append($('<td class="table-row-operation"></td>').append($('<ul class="board-toolbar"></ul>').append($("<li></li>").append($('<i class="icon-trash icon-white"></i>').click(function(){var e=l.settings[t.name].indexOf(a);-1!=e&&(l.settings[t.name].splice(e,1),n.remove(),m())}))))),s.scrollTop(s[0].scrollHeight),m()}_.each(t.settings,function(e){var n=e.name;_.isUndefined(e.display_name)||(n=e.display_name),$("<th>"+n+"</th>").appendTo(p),["text","datasource","target"].indexOf(e.type)>-1&&e.options&&($("<datalist></datalist>").attr("id",t.name+e.name+"ac").appendTo(p),$.each(e.options(),function(n,a){$("#"+t.name+e.name+"ac").append($("<option>").attr("value",n).text(a))}))}),t.name in o&&(g=o[t.name]),$('<div class="table-operation text-button">ADD</div>').appendTo(r).click(function(){var e={};_.each(t.settings,function(t){e[t.name]=""}),b(e)}),_.each(g,function(t,e){b(t)});break}case"html-wysywig":$.trumbowyg.svgPath=!1,$.trumbowyg.hideButtonTexts=!0,l.settings[t.name]=o[t.name];$("<div><label>"+t.name+'</label> <br> <textarea id="'+t.name+'-trumbo"></textarea></div>').appendTo(r);var v=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd"];$("#"+t.name+"-trumbo").trumbowyg({btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["foreColor","backColor"],["link"],["base64"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"],["fontsize","fontfamily","preformatted"],["emoji","table","specialChars"]],plugins:{colors:{displayAsList:!0,foreColorList:v,backColorList:v},fontfamily:{fontList:[{name:"Seriff",family:"FBSerif"},{name:"Color Emoji",family:"NotoColorEmoji"},{name:"Sans",family:"FBSans"},{name:"Monospace",family:"FBMono"},{name:"Cursive",family:"FBCursive"},{name:"Pandora",family:"Pandora"},{name:"Chalkboard",family:"Chalkboard"},{name:"Handwriting",family:"Handwriting"},{name:"Rough Script",family:"RoughScript"},{name:"Chancery",family:"Chancery"},{name:"Comic",family:"FBComic"},{name:"Blackletter",family:"Blackletter"},{name:"Stencil",family:"Stencil"},{name:"Pixel",family:"Pixel"},{name:"B612",family:"B612"},{name:"DIN",family:"DIN"},{name:"Penguin Attack",family:"PenguinAttack"},{name:"DSEG7",family:"DSEG7"},{name:"DSEG14",family:"DSEG14"}]}}}),$("#"+t.name+"-trumbo").on("tbwchange",function(e){l.settings[t.name]=$("#"+t.name+"-trumbo").trumbowyg("html")}),$("#"+t.name+"-trumbo").on("tbwblur",function(e){l.settings[t.name]=$("#"+t.name+"-trumbo").trumbowyg("html")}),t.name in o&&$("#"+t.name+"-trumbo").trumbowyg("html",o[t.name]),u.push($("#editor").trumbowyg);break;case"boolean":l.settings[t.name]=o[t.name];var y=$('<div class="onoffswitch"><label class="onoffswitch-label" for="'+t.name+'-onoff"><div class="onoffswitch-inner"><span class="on">YES</span><span class="off">NO</span></div><div class="onoffswitch-switch"></div></label></div>').appendTo(r),w=$('<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="'+t.name+'-onoff">').prependTo(y).change(function(){l.settings[t.name]=this.checked});t.name in o&&w.prop("checked",o[t.name]);break;case"button":w=$("<button></button>").appendTo($('<div class="styled-select"></div>').appendTo(r)).html(t.html).on("click",function(){t.onclick(o,freeboard.getDatasourceInstance(o.name))});break;case"option":var x=o[t.name];w=$("<select></select>").appendTo($('<div class="styled-select"></div>').appendTo(r)).change(function(){l.settings[t.name]=$(this).val()});_.each(t.options,function(t){var e,n;_.isObject(t)?(e=t.name,n=t.value):e=t,_.isUndefined(n)&&(n=e),_.isUndefined(x)&&(x=n),$("<option></option>").text(e).attr("value",n).appendTo(w)}),l.settings[t.name]=x,t.name in o&&w.val(o[t.name]);break;default:if(l.settings[t.name]=o[t.name],"calculated"==t.type||"target"==t.type){var k="target"==t.type;if(t.name in o){var S=o[t.name];if(t.multi_input&&_.isArray(S))for(var C=!1,T=0;T<S.length;T++)a(r,l,t,S[T],C,k),C=!0;else a(r,l,t,S,!1,k)}else a(r,l,t,null,!1,k);if(t.multi_input){var D=$('<ul class="board-toolbar"><li class="add-setting-row"><i class="icon-plus icon-white"></i><label>ADD</label></li></ul>').mousedown(function(e){e.preventDefault(),a(r,l,t,null,!0,k)});$(r).siblings(".form-label").append(D)}}else{if("name"==t.name)var I="[a-zA-Z][a-zA-Z0-9_]+";else I=null;var E=t.regex;_.isUndefined(t.regex)&&(E=I),t.options&&($("<datalist></datalist>").attr("id",t.name+"ac").appendTo(r),$.each(t.options(),function(e,n){$("#"+t.name+"ac").append($("<option>").attr("value",e).text(n||e))}));w=$('<input type="text">').appendTo(r).attr("pattern",E).attr("list",t.name+"ac").change(function(){"number"==t.type?l.settings[t.name]=Number($(this).val()):l.settings[t.name]=$(this).val()});if("integer"==t.type&&w.attr("type","number"),t.name in o&&w.val(o[t.name]),e&&t.typeahead_data_field&&w.addClass("typeahead_data_field-"+t.typeahead_data_field),e&&t.typeahead_field){var F=[];w.keyup(function(t){t.which>=65&&t.which<=91&&w.trigger("change")}),$(w).autocomplete({source:F,select:function(t,e){w.val(e.item.value),w.trigger("change")}}),w.change(function(a){var i=w.val(),o=_.template(e)({input:i});$.get(o,function(e){if(n&&(e=e[n]),e=_.select(e,function(e){return e[t.typeahead_field][0]==i[0]}),F=_.map(e,function(e){return e[t.typeahead_field]}),$(w).autocomplete("option","source",F),1==e.length)for(var a in e=e[0])if(e.hasOwnProperty(a)){var o=$(_.template("input.typeahead_data_field-<%= field %>")({field:a}));o&&(o.val(e[a]),o.val()!=w.val()&&o.trigger("change"))}})})}}}_.isUndefined(t.suffix)||r.append($('<div class="input-suffix">'+t.suffix+"</div>")),_.isUndefined(t.description)||r.append($('<div class="setting-description">'+t.description+"</div>"))})}for(var h of(new DialogBox(c,t,"Save","Cancel",function(){$(".validation-error").remove();for(var t=0;t<s.settings.length;t++){var e=s.settings[t];if(e.required&&(_.isUndefined(l.settings[e.name])||""==l.settings[e.name]))return n(e.name,"This is required."),!0;if("integer"==e.type&&l.settings[e.name]%1!=0)return n(e.name,"Must be a whole number."),!0;if("number"==e.type&&(a=l.settings[e.name],isNaN(parseFloat(a))||!isFinite(a)))return n(e.name,"Must be a number."),!0}var a;_.isFunction(r)&&r(l)}),u))h("destroy");var g,m=_.keys(e);if(m.length>1){var b=d("plugin-types","Type");(g=$("<select></select>").appendTo($('<div class="styled-select"></div>').appendTo(b))).append($("<option>Select a type...</option>").attr("value","undefined")),_.each(e,function(t){g.append($("<option></option>").text(t.display_name).attr("value",t.type_name))}),g.change(function(){l.type=$(this).val(),l.settings={},$("#setting-row-instance-name").length?$("#setting-row-instance-name").nextAll().remove():$("#setting-row-plugin-types").nextAll().remove(),s=e[g.val()],_.isUndefined(s)?($("#setting-row-instance-name").hide(),$("#dialog-ok").hide()):($("#setting-row-instance-name").show(),s.description&&s.description.length>0?f.html(s.description).show():f.hide(),$("#dialog-ok").show(),p(s.settings,s.typeahead_source,s.typeahead_data_segment))})}else 1==m.length&&(s=e[m[0]],l.type=s.type_name,l.settings={},p(s.settings));g&&(_.isUndefined(i)?($("#setting-row-instance-name").hide(),$("#dialog-ok").hide()):($("#dialog-ok").show(),g.val(i).trigger("change")))}return{createPluginEditor:function(t,e,n,a,o,r){i(t,e,n,a,o)}}},ValueEditor=function(t){var e=new RegExp('.*datasources\\["([^"]*)("\\])?(.*)$'),n=null,a=0,i=[],o=null,r={ANY:"any",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean"};function s(t,e){return!(!_.isArray(t)&&!_.isObject(t))||l(t,e)}function l(t,e){switch(e){case r.ANY:return!0;case r.ARRAY:return _.isArray(t);case r.OBJECT:return _.isObject(t);case r.STRING:return _.isString(t);case r.NUMBER:return _.isNumber(t);case r.BOOLEAN:return _.isBoolean(t)}}function d(t,e){$(t).parent().find(".validation-error").remove(),l(o,e)||$(t).parent().append("<div class='validation-error'>This field expects an expression that evaluates to type "+e+".</div>")}function c(r,l){var c=$(r).val().substring(0,$(r).getCaretPosition());if(function(t,n,a,r){var l=e.exec(t),d=[];if(l)if(""==l[1]){var c="";""==t&&(c="="),_.each(n,function(t){d.push({value:c+t.name(),entity:void 0,precede_char:"",follow_char:'"]'})})}else if(""!=l[1]&&_.isUndefined(l[2])){var f=l[1];_.each(n,function(t){var e=t.name();e!=f&&0==e.indexOf(f)&&d.push({value:e,entity:void 0,precede_char:"",follow_char:'"]'})})}else{var u=_.find(n,function(t){return t.name()===l[1]});if(!_.isUndefined(u)){var p="data",h="";if(!_.isUndefined(l[2])){var g=l[3].lastIndexOf("]")+1;p+=l[3].substring(0,g),h=(h=(h=l[3].substring(g,l[3].length)).replace(/^[\[\"]*/,"")).replace(/[\"\]]*$/,"")}var m=u.getDataRepresentation(p);if(o=m,_.isArray(m)){for(var b=0;b<m.length;b++)if(0==b.toString().indexOf(h)){var v=m[b];s(v,a)&&d.push({value:b,entity:v,precede_char:"[",follow_char:"]",preview:v.toString()})}}else _.isObject(m)&&_.each(m,function(t,e){0==e.indexOf(h)&&s(t,a)&&d.push({value:e,entity:t,precede_char:'["',follow_char:'"]'})})}}i=d}(c=c.replace(String.fromCharCode(160)," "),t.datasources(),l),i.length>0){n||(n=$('<ul id="value-selector" class="value-dropdown"></ul>').insertAfter(r).width($(r).outerWidth()-2).css("left",$(r).position().left).css("top",$(r).position().top+$(r).outerHeight()-1)),n.empty(),n.scrollTop(0);var f=!0;a=0,_.each(i,function(t,e){var i=function(t,e,i,r){var s=i.value;i.preview&&(s=s+"<span class='preview'>"+i.preview+"</span>");return $("<li>"+s+"</li>").appendTo(n).mouseenter(function(){$(this).trigger("freeboard-select")}).mousedown(function(t){$(this).trigger("freeboard-insertValue"),t.preventDefault()}).data("freeboard-optionIndex",r).data("freeboard-optionValue",i.value).bind("freeboard-insertValue",function(){var e=i.value;e=i.precede_char+e+i.follow_char,$(t).insertAtCaret(e),o=i.entity,$(t).triggerHandler("mouseup")}).bind("freeboard-select",function(){$(this).parent().find("li.selected").removeClass("selected"),$(this).addClass("selected"),a=$(this).data("freeboard-optionIndex")})}(r,0,t,e);f&&($(i).addClass("selected"),f=!1)})}else d(r,l),$(r).next("ul#value-selector").remove(),n=null,a=-1}function f(t,e){$(t).addClass("calculated-value-input").bind("keyup mouseup freeboard-eval",function(a){!n||"keyup"!=a.type||38!=a.keyCode&&40!=a.keyCode&&13!=a.keyCode?c(t,e):a.preventDefault()}).focus(function(){$(t).css({"z-index":3001}),function(t){var e=($(t).val().match(/\n/g)||[]).length,n=Math.min(200,20*(e+1));$(t).css({height:n+"px"})}(t)}).focusout(function(){d(t,e),$(t).css({height:"","z-index":3e3}),$(t).next("ul#value-selector").remove(),n=null,a=-1}).bind("keydown",function(t){if(n)if(38==t.keyCode||40==t.keyCode){t.preventDefault();var e=$(n).find("li");38==t.keyCode?a--:40==t.keyCode&&a++,a<0?a=e.size()-1:a>=e.size()&&(a=0);var i=$(e).eq(a);i.trigger("freeboard-select"),$(n).scrollTop($(i).position().top)}else 13==t.keyCode&&(t.preventDefault(),-1!=a&&$(n).find("li").eq(a).trigger("freeboard-insertValue"))})}return{createValueEditor:function(t,e){f(t,e||r.ANY)},EXPECTED_TYPE:r}},function(t){var e=window.MutationObserver||window.WebKitMutationObserver;t.fn.attrchange=function(n){var a={trackValues:!1,callback:t.noop};if("function"==typeof n?a.callback=n:t.extend(a,n),a.trackValues&&t(this).each(function(e,n){for(var a,i={},o=(e=0,n.attributes),r=o.length;e<r;e++)i[(a=o.item(e)).nodeName]=a.value;t(this).data("attr-old-value",i)}),e){var i={subtree:!1,attributes:!0,attributeOldValue:a.trackValues},o=new e(function(e){e.forEach(function(e){var n=e.target;a.trackValues&&(e.newValue=t(n).attr(e.attributeName)),a.callback.call(n,e)})});return this.each(function(){o.observe(this,i)})}return function(){var t=document.createElement("p"),e=!1;if(t.addEventListener)t.addEventListener("DOMAttrModified",function(){e=!0},!1);else{if(!t.attachEvent)return!1;t.attachEvent("onDOMAttrModified",function(){e=!0})}return t.setAttribute("id","target"),e}()?this.on("DOMAttrModified",function(t){t.originalEvent&&(t=t.originalEvent),t.attributeName=t.attrName,t.oldValue=t.prevValue,a.callback.call(this,t)}):"onpropertychange"in document.body?this.on("propertychange",function(e){e.attributeName=window.event.propertyName,function(e,n){if(e){var a=this.data("attr-old-value");if(n.attributeName.indexOf("style")>=0){a.style||(a.style={});var i=n.attributeName.split(".");n.attributeName=i[0],n.oldValue=a.style[i[1]],n.newValue=i[1]+":"+this.prop("style")[t.camelCase(i[1])],a.style[i[1]]=n.newValue}else n.oldValue=a[n.attributeName],n.newValue=this.attr(n.attributeName),a[n.attributeName]=n.newValue;this.data("attr-old-value",a)}}.call(t(this),a.trackValues,e),a.callback.call(this,e)}):this}}(jQuery),function(t){t.eventEmitter={_JQInit:function(){this._JQ=t(this)},emit:function(t,e){!this._JQ&&this._JQInit(),this._JQ.trigger(t,e)},once:function(t,e){!this._JQ&&this._JQInit(),this._JQ.one(t,e)},on:function(t,e){!this._JQ&&this._JQInit(),this._JQ.bind(t,e)},off:function(t,e){!this._JQ&&this._JQInit(),this._JQ.unbind(t,e)}}}(jQuery);var freeboard=function(){var t={},e={},n=new FreeboardUI,a=new FreeboardModel(t,e,n),i=new JSEditor,o=new ValueEditor(a),r=new PluginEditor(i,o),s=new DeveloperConsole(a),l={values:{"font-family":'"HelveticaNeue-UltraLight", "Helvetica Neue Ultra Light", "Helvetica Neue", sans-serif',color:"#d3d4d4","font-weight":100}};return ko.bindingHandlers.pluginEditor={init:function(i,o,s,l,d){var c=ko.unwrap(o()),f={},u=void 0,p="";"datasource"==c.type?(f=t,p="Datasource"):"widget"==c.type?(f=e,p="Widget"):"pane"==c.type&&(p="Pane"),$(i).click(function(o){if("delete"==c.operation){new DialogBox($("<p>Are you sure you want to delete this "+p+"?</p>"),"Confirm Delete","Yes","No",function(){"datasource"==c.type?a.deleteDatasource(l):"widget"==c.type?a.deleteWidget(l):"pane"==c.type&&a.deletePane(l)})}else{var s=void 0;"datasource"==c.type?"add"==c.operation?u={}:(s=l.type,(u=l.settings).name=l.name()):"widget"==c.type?"add"==c.operation?u={}:(s=l.type,u=l.settings):"pane"==c.type&&(u={},"edit"==c.operation&&(u.title=l.title(),u.col_width=l.col_width()),f={settings:{settings:[{name:"title",display_name:"Title",type:"text"},{name:"col_width",display_name:"Columns",type:"integer",default_value:1,required:!0}]}}),r.createPluginEditor(p,f,s,u,async function(o){if("add"==c.operation){if("datasource"==c.type){var r=new DatasourceModel(a,t);a.addDatasource(r),r.name(o.settings.name),delete o.settings.name,await r.setSettings(o.settings),await r.setType(o.type)}else if("widget"==c.type){r=new WidgetModel(a,e);await r.setSettings(o.settings),await r.setType(o.type),l.widgets.push(r),n.attachWidgetEditIcons(i)}}else"edit"==c.operation&&("pane"==c.type?(l.title(o.settings.title),l.col_width(o.settings.col_width),n.processResize(!1)):("datasource"==c.type&&(l.name(o.settings.name),delete o.settings.name),await l.setType(o.type),await l.setSettings(o.settings)))})}})}},ko.virtualElements.allowedBindings.datasourceTypeSettings=!0,ko.bindingHandlers.datasourceTypeSettings={update:function(t,e,n,a,i){processPluginSettings(t,e,n,a,i)}},ko.bindingHandlers.pane={init:function(t,e,i,o,r){a.isEditing()&&$(t).css({cursor:"pointer"}),n.addPane(t,o,r.$root.isEditing())},update:function(t,e,i,o,r){-1==a.panes.indexOf(o)&&n.removePane(t),n.updatePane(t,o)}},ko.bindingHandlers.widget={init:function(t,e,i,o,r){a.isEditing()&&n.attachWidgetEditIcons($(t).parent())},update:function(t,e,n,a,i){a.shouldRender()&&($(t).empty(),a.render(t))}},$(function(){var t;function e(){n.processResize(!0)}n.showLoadingIndicator(!0),$(window).resize(function(){clearTimeout(t),t=setTimeout(e,500)})}),{model:a,setGlobalSettings:setGlobalSettings=a.setGlobalSettings,globalSettingsHandlers:globalSettingsHandlers=a.globalSettingsHandlers,globalSettings:globalSettings=a.globalSettings,playSound:function(t){var e=a.globalSettings.soundTheme;e.externalSounds&&e.externalSounds[t]&&(t=e.externalSounds[t]),new Howl({src:[t],html5:"file"==window.location.protocol}).play()},getDatasourceInstance:function(t){for(var e of freeboard.model.datasources())if(e.name()==t)return e.datasourceInstance},eval:function(t){return"string"==typeof t&&"="==t[0]?this.compile("return "+t.substring(1))():t},compile:function(t){var e=new Function("datasources",t);return function(){return e(a.datasources)}},initialize:function(t,e){ko.applyBindings(a);var i=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))}("load");""!=i?$.ajax({url:i,success:function(t){a.loadDashboard(t),_.isFunction(e)&&e()}}):(a.allow_edit(t),a.setEditing(t),n.showLoadingIndicator(!1),_.isFunction(e)&&e(),freeboard.emit("initialized"))},newDashboard:function(){a.loadDashboard({allow_edit:!0})},loadDashboard:function(t,e){a.loadDashboard(t,e)},serialize:function(){return a.serialize()},setEditing:function(t,e){a.setEditing(t,e)},isEditing:function(){return a.isEditing()},loadDatasourcePlugin:function(e){_.isUndefined(e.display_name)&&(e.display_name=e.type_name),e.settings.unshift({name:"name",display_name:"Name",type:"text",required:!0}),a.addPluginSource(e.source),t[e.type_name]=e,a._datasourceTypes.valueHasMutated()},resize:function(){n.processResize(!0)},loadWidgetPlugin:function(t){_.isUndefined(t.display_name)&&(t.display_name=t.type_name),a.addPluginSource(t.source),e[t.type_name]=t,a._widgetTypes.valueHasMutated()},setAssetRoot:function(t){i.setAssetRoot(t)},addStyle:function(t,e){var n=t+"{"+e+"}",a=$("style#fb-styles");0==a.length&&(a=$('<style id="fb-styles" type="text/css"></style>'),$("head").append(a)),a[0].styleSheet?a[0].styleSheet.cssText+=n:a.text(a.text()+n)},showLoadingIndicator:function(t){n.showLoadingIndicator(t)},showDialog:function(t,e,n,a,i,o){new DialogBox(t,e,n,a,i,o)},getDatasourceSettings:function(t){var e=a.datasources(),n=_.find(e,function(e){return e.name()===t});return n?n.settings:null},setDatasourceSettings:function(t,e){var n=a.datasources(),i=_.find(n,function(e){return e.name()===t});if(i){var o=_.defaults(e,i.settings);i.setSettings(o)}else console.log("Datasource not found")},getStyleString:function(t){var e="";return _.each(l[t],function(t,n){e=e+n+":"+t+";"}),e},getStyleObject:function(t){return l[t]},showDeveloperConsole:function(){s.showDeveloperConsole()}}}();function generateFreeboardHelp(){return $('\n<div style="overflow:scroll; height:50em;">\n\n<h2>Data targets</h2>\n\n<p>Input widgets use a data target to do something with the data.\nIf the target is just the name of a field of a datasource, it will try to write it there.</p>\n\n<p>If the target contains any javascript, like assignments or function calls,\nit will be interpreted as a function to call to handle new data.\nYou can access the value itself simply by using the variable called \'value\'.</p>\n\n<h2>Calculated values</h2>\n\n<p>These update in real time if the value of the expression changes.\nMuch like a spreadsheet, they must begin with an equals sign,\nor else they get interpreted as just literal data.</p>\n</div>\n\n<h2> Data Tables </h2>\n<p>FreeBoard works with table-like data using the nanoSQl2 library which is always available to the user.   The following 4 special fields are reserved and may be added\n    to rows when used with widgets: _time, the microseconds modification time of the record, _arrival, the microseconds time the record arrived on the local node,\n    _uuid, a canonical UUID for the record, and _name, a nonunique name.<p>\n\n<p>As usual, data targets work with data in (value, timestamp) form for table views.</p>\n\n<p>When using the table widget in the raw data mode, all you need to worry about is your application data, the special fields are added automatically by the table widget.</p>\n\n<p>Tables have a data target for their selected row.  This row acts just like a the data rows in your input array, however, you can write\nthe changes back to the original data table by setting the _arrival property to anything you want(The actual value will be changed to the current time).</p>\n\n<p>Where there is no selection, the selection is just an empty object, with all of the special underscore keys, and a random UUID.  Setting _arrival on this will\ncreate a new entry</p>\n\n<p>All database backends should understand this spec, so to make a database form, you use a table to find the record you want, assign the selection\nto a scratchpad data source, and use the usual controls to edit that selection.  When you\'re done, use a button widget to set the _arrival property, and everything gets saved.</p>\n\n    \n\n<h2>Mustache Templates(Use in the rich text edit component,  3rdparty doc, MIT)</h2>\n<pre>\nNAME\nmustache - Logic-less templates.\n\nSYNOPSIS\nA typical Mustache template:\n\nHello {{name}}\nYou have just won {{value}} dollars!\n{{#in_ca}}\nWell, {{taxed_value}} dollars, after taxes.\n{{/in_ca}}\nGiven the following hash:\n\n{\n  "name": "Chris",\n  "value": 10000,\n  "taxed_value": 10000 - (10000 * 0.4),\n  "in_ca": true\n}\nWill produce the following:\n\nHello Chris\nYou have just won 10000 dollars!\nWell, 6000.0 dollars, after taxes.\nDESCRIPTION\nMustache can be used for HTML, config files, source code - anything. It works by expanding tags in a template using values provided in a hash or object.\n\nWe call it "logic-less" because there are no if statements, else clauses, or for loops. Instead there are only tags. Some tags are replaced with a value, some nothing, and others a series of values. This document explains the different types of Mustache tags.\n\nTAG TYPES\nTags are indicated by the double mustaches. {{person}} is a tag, as is {{#person}}. In both examples, we\'d refer to person as the key or tag key. Let\'s talk about the different types of tags.\n\nVariables\nThe most basic tag type is the variable. A {{name}} tag in a basic template will try to find the name key in the current context. If there is no name key, the parent contexts will be checked recursively. If the top context is reached and the name key is still not found, nothing will be rendered.\n\nAll variables are HTML escaped by default. If you want to return unescaped HTML, use the triple mustache: {{{name}}}.\n\nYou can also use & to unescape a variable: {{& name}}. This may be useful when changing delimiters (see "Set Delimiter" below).\n\nBy default a variable "miss" returns an empty string. This can usually be configured in your Mustache library. The Ruby version of Mustache supports raising an exception in this situation, for instance.\n\nTemplate:\n\n* {{name}}\n* {{age}}\n* {{company}}\n* {{{company}}}\nHash:\n\n{\n  "name": "Chris",\n  "company": "<b>GitHub</b>"\n}\nOutput:\n\n* Chris\n*\n* &lt;b&gt;GitHub&lt;/b&gt;\n* <b>GitHub</b>\nSections\nSections render blocks of text one or more times, depending on the value of the key in the current context.\n\nA section begins with a pound and ends with a slash. That is, {{#person}} begins a "person" section while {{/person}} ends it.\n\nThe behavior of the section is determined by the value of the key.\n\nFalse Values or Empty Lists\n\nIf the person key exists and has a value of false or an empty list, the HTML between the pound and slash will not be displayed.\n\nTemplate:\n\nShown.\n{{#person}}\n  Never shown!\n{{/person}}\nHash:\n\n{\n  "person": false\n}\nOutput:\n\nShown.\nNon-Empty Lists\n\nIf the person key exists and has a non-false value, the HTML between the pound and slash will be rendered and displayed one or more times.\n\nWhen the value is a non-empty list, the text in the block will be displayed once for each item in the list. The context of the block will be set to the current item for each iteration. In this way we can loop over collections.\n\nTemplate:\n\n{{#repo}}\n  <b>{{name}}</b>\n{{/repo}}\nHash:\n\n{\n  "repo": [\n    { "name": "resque" },\n    { "name": "hub" },\n    { "name": "rip" }\n  ]\n}\nOutput:\n\n<b>resque</b>\n<b>hub</b>\n<b>rip</b>\nLambdas\n\nWhen the value is a callable object, such as a function or lambda, the object will be invoked and passed the block of text. The text passed is the literal block, unrendered. {{tags}} will not have been expanded - the lambda should do that on its own. In this way you can implement filters or caching.\n\nTemplate:\n\n{{#wrapped}}\n  {{name}} is awesome.\n{{/wrapped}}\nHash:\n\n{\n  "name": "Willy",\n  "wrapped": function() {\n    return function(text, render) {\n      return "<b>" + render(text) + "</b>"\n    }\n  }\n}\nOutput:\n\n<b>Willy is awesome.</b>\nNon-False Values\n\nWhen the value is non-false but not a list, it will be used as the context for a single rendering of the block.\n\nTemplate:\n\n{{#person?}}\n  Hi {{name}}!\n{{/person?}}\nHash:\n\n{\n  "person?": { "name": "Jon" }\n}\nOutput:\n\nHi Jon!\nInverted Sections\nAn inverted section begins with a caret (hat) and ends with a slash. That is {{^person}} begins a "person" inverted section while {{/person}} ends it.\n\nWhile sections can be used to render text one or more times based on the value of the key, inverted sections may render text once based on the inverse value of the key. That is, they will be rendered if the key doesn\'t exist, is false, or is an empty list.\n\nTemplate:\n\n{{#repo}}\n  <b>{{name}}</b>\n{{/repo}}\n{{^repo}}\n  No repos :(\n{{/repo}}\nHash:\n\n{\n  "repo": []\n}\nOutput:\n\nNo repos :(\nComments\nComments begin with a bang and are ignored. The following template:\n\n<h1>Today{{! ignore me }}.</h1>\nWill render as follows:\n\n<h1>Today.</h1>\nComments may contain newlines.\n\nPartials\nPartials begin with a greater than sign, like {{> box}}.\n\nPartials are rendered at runtime (as opposed to compile time), so recursive partials are possible. Just avoid infinite loops.\n\nThey also inherit the calling context. Whereas in an [ERB](http://en.wikipedia.org/wiki/ERuby) file you may have this:\n\n<%= partial :next_more, :start => start, :size => size %>\nMustache requires only this:\n\n{{> next_more}}\nWhy? Because the next_more.mustache file will inherit the size and start methods from the calling context.\n\nIn this way you may want to think of partials as includes, imports, template expansion, nested templates, or subtemplates, even though those aren\'t literally the case here.\n\nFor example, this template and partial:\n\nbase.mustache:\n<h2>Names</h2>\n{{#names}}\n  {{> user}}\n{{/names}}\n\nuser.mustache:\n<strong>{{name}}</strong>\nCan be thought of as a single, expanded template:\n\n<h2>Names</h2>\n{{#names}}\n  <strong>{{name}}</strong>\n{{/names}}\nSet Delimiter\nSet Delimiter tags start with an equal sign and change the tag delimiters from {{ and }} to custom strings.\n\nConsider the following contrived example:\n\n* {{default_tags}}\n{{=<% %>=}}\n* <% erb_style_tags %>\n<%={{ }}=%>\n* {{ default_tags_again }}\nHere we have a list with three items. The first item uses the default tag style, the second uses erb style as defined by the Set Delimiter tag, and the third returns to the default style after yet another Set Delimiter declaration.\n\nAccording to ctemplates, this "is useful for languages like TeX, where double-braces may occur in the text and are awkward to use for markup."\n\nCustom delimiters may not contain whitespace or the equals sign.\n\nCOPYRIGHT\nMustache is Copyright (C) 2009 Chris Wanstrath\n\nOriginal CTemplate by Google\n\nSEE ALSO\nmustache(1), http://mustache.github.io/\n</pre>\n\n')}function generateFreeboardEmojiCheats(){return $("<h2>Smileys</h2>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>People</h2>\n  <p></p>\n  <h2>Cats</h2>\n  <p></p>\n  <h2>Creatures</h2>\n  <p></p>\n  <h2>Effects</h2>\n  <p></p>\n  <h2>Body</h2>\n  <p></p>\n  <h2>Figures</h2>\n  <p></p>\n  <p></p>\n  <h2>Fashion</h2>\n  <p></p>\n  <h2>Love</h2>\n  <p></p>\n  <h2>SocialMedia</h2>\n  <p></p>\n  <h2>Animals</h2>\n  <p>\n  </p>\n  <p></p>\n  <h2>Earth and Space</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Parties</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Items</h2>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>Arts</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Games</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Food and Drink</h2>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>Symbols</h2>\n  <p>1234567890#</p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>Astrology</h2>\n  <p></p>\n  <p><br></p>\n  <h2>More Symbols</h2>\n  <p></p>\n  <p><br></p>\n  <p></p>\n  <p><br></p>\n  \n  \n  <h2>FontAwesome symbols(Adapted from the official cheetsheet)</h2>\n  <pre>\n  \tad\tf641\n  \taddress-book\tf2b9\n  \taddress-card\tf2bb\n  \tadjust\tf042\n  \tair-freshener\tf5d0\n  \talign-center\tf037\n  \talign-justify\tf039\n  \talign-left\tf036\n  \talign-right\tf038\n  \tallergies\tf461\n  \tambulance\tf0f9\n  \tamerican-sign-language-interpreting\tf2a3\n  \tanchor\tf13d\n  \tangle-double-down\tf103\n  \tangle-double-left\tf100\n  \tangle-double-right\tf101\n  \tangle-double-up\tf102\n  \tangle-down\tf107\n  \tangle-left\tf104\n  \tangle-right\tf105\n  \tangle-up\tf106\n  \tangry\tf556\n  \tankh\tf644\n  \tapple-alt\tf5d1\n  \tarchive\tf187\n  \tarchway\tf557\n  \tarrow-alt-circle-down\tf358\n  \tarrow-alt-circle-left\tf359\n  \tarrow-alt-circle-right\tf35a\n  \tarrow-alt-circle-up\tf35b\n  \tarrow-circle-down\tf0ab\n  \tarrow-circle-left\tf0a8\n  \tarrow-circle-right\tf0a9\n  \tarrow-circle-up\tf0aa\n  \tarrow-down\tf063\n  \tarrow-left\tf060\n  \tarrow-right\tf061\n  \tarrow-up\tf062\n  \tarrows-alt\tf0b2\n  \tarrows-alt-h\tf337\n  \tarrows-alt-v\tf338\n  \tassistive-listening-systems\tf2a2\n  \tasterisk\tf069\n  \tat\tf1fa\n  \tatlas\tf558\n  \tatom\tf5d2\n  \taudio-description\tf29e\n  \taward\tf559\n  \tbaby\tf77c\n  \tbaby-carriage\tf77d\n  \tbackspace\tf55a\n  \tbackward\tf04a\n  \tbacon\tf7e5\n  \tbacteria\te059\n  \tbacterium\te05a\n  \tbahai\tf666\n  \tbalance-scale\tf24e\n  \tbalance-scale-left\tf515\n  \tbalance-scale-right\tf516\n  \tban\tf05e\n  \tband-aid\tf462\n  \tbarcode\tf02a\n  \tbars\tf0c9\n  \tbaseball-ball\tf433\n  \tbasketball-ball\tf434\n  \tbath\tf2cd\n  \tbattery-empty\tf244\n  \tbattery-full\tf240\n  \tbattery-half\tf242\n  \tbattery-quarter\tf243\n  \tbattery-three-quarters\tf241\n  \tbed\tf236\n  \tbeer\tf0fc\n  \tbell\tf0f3\n  \tbell-slash\tf1f6\n  \tbezier-curve\tf55b\n  \tbible\tf647\n  \tbicycle\tf206\n  \tbiking\tf84a\n  \tbinoculars\tf1e5\n  \tbiohazard\tf780\n  \tbirthday-cake\tf1fd\n  \tblender\tf517\n  \tblender-phone\tf6b6\n  \tblind\tf29d\n  \tblog\tf781\n  \tbold\tf032\n  \tbolt\tf0e7\n  \tbomb\tf1e2\n  \tbone\tf5d7\n  \tbong\tf55c\n  \tbook\tf02d\n  \tbook-dead\tf6b7\n  \tbook-medical\tf7e6\n  \tbook-open\tf518\n  \tbook-reader\tf5da\n  \tbookmark\tf02e\n  \tborder-all\tf84c\n  \tborder-none\tf850\n  \tborder-style\tf853\n  \tbowling-ball\tf436\n  \tbox\tf466\n  \tbox-open\tf49e\n  \tbox-tissue\te05b\n  \tboxes\tf468\n  \tbraille\tf2a1\n  \tbrain\tf5dc\n  \tbread-slice\tf7ec\n  \tbriefcase\tf0b1\n  \tbriefcase-medical\tf469\n  \tbroadcast-tower\tf519\n  \tbroom\tf51a\n  \tbrush\tf55d\n  \tbug\tf188\n  \tbuilding\tf1ad\n  \tbullhorn\tf0a1\n  \tbullseye\tf140\n  \tburn\tf46a\n  \tbus\tf207\n  \tbus-alt\tf55e\n  \tbusiness-time\tf64a\n  \tcalculator\tf1ec\n  \tcalendar\tf133\n  \tcalendar-alt\tf073\n  \tcalendar-check\tf274\n  \tcalendar-day\tf783\n  \tcalendar-minus\tf272\n  \tcalendar-plus\tf271\n  \tcalendar-times\tf273\n  \tcalendar-week\tf784\n  \tcamera\tf030\n  \tcamera-retro\tf083\n  \tcampground\tf6bb\n  \tcandy-cane\tf786\n  \tcannabis\tf55f\n  \tcapsules\tf46b\n  \tcar\tf1b9\n  \tcar-alt\tf5de\n  \tcar-battery\tf5df\n  \tcar-crash\tf5e1\n  \tcar-side\tf5e4\n  \tcaravan\tf8ff\n  \tcaret-down\tf0d7\n  \tcaret-left\tf0d9\n  \tcaret-right\tf0da\n  \tcaret-square-down\tf150\n  \tcaret-square-left\tf191\n  \tcaret-square-right\tf152\n  \tcaret-square-up\tf151\n  \tcaret-up\tf0d8\n  \tcarrot\tf787\n  \tcart-arrow-down\tf218\n  \tcart-plus\tf217\n  \tcash-register\tf788\n  \tcat\tf6be\n  \tcertificate\tf0a3\n  \tchair\tf6c0\n  \tchalkboard\tf51b\n  \tchalkboard-teacher\tf51c\n  \tcharging-station\tf5e7\n  \tchart-area\tf1fe\n  \tchart-bar\tf080\n  \tchart-line\tf201\n  \tchart-pie\tf200\n  \tcheck\tf00c\n  \tcheck-circle\tf058\n  \tcheck-double\tf560\n  \tcheck-square\tf14a\n  \tcheese\tf7ef\n  \tchess\tf439\n  \tchess-bishop\tf43a\n  \tchess-board\tf43c\n  \tchess-king\tf43f\n  \tchess-knight\tf441\n  \tchess-pawn\tf443\n  \tchess-queen\tf445\n  \tchess-rook\tf447\n  \tchevron-circle-down\tf13a\n  \tchevron-circle-left\tf137\n  \tchevron-circle-right\tf138\n  \tchevron-circle-up\tf139\n  \tchevron-down\tf078\n  \tchevron-left\tf053\n  \tchevron-right\tf054\n  \tchevron-up\tf077\n  \tchild\tf1ae\n  \tchurch\tf51d\n  \tcircle\tf111\n  \tcircle-notch\tf1ce\n  \tcity\tf64f\n  \tclinic-medical\tf7f2\n  \tclipboard\tf328\n  \tclipboard-check\tf46c\n  \tclipboard-list\tf46d\n  \tclock\tf017\n  \tclone\tf24d\n  \tclosed-captioning\tf20a\n  \tcloud\tf0c2\n  \tcloud-download-alt\tf381\n  \tcloud-meatball\tf73b\n  \tcloud-moon\tf6c3\n  \tcloud-moon-rain\tf73c\n  \tcloud-rain\tf73d\n  \tcloud-showers-heavy\tf740\n  \tcloud-sun\tf6c4\n  \tcloud-sun-rain\tf743\n  \tcloud-upload-alt\tf382\n  \tcocktail\tf561\n  \tcode\tf121\n  \tcode-branch\tf126\n  \tcoffee\tf0f4\n  \tcog\tf013\n  \tcogs\tf085\n  \tcoins\tf51e\n  \tcolumns\tf0db\n  \tcomment\tf075\n  \tcomment-alt\tf27a\n  \tcomment-dollar\tf651\n  \tcomment-dots\tf4ad\n  \tcomment-medical\tf7f5\n  \tcomment-slash\tf4b3\n  \tcomments\tf086\n  \tcomments-dollar\tf653\n  \tcompact-disc\tf51f\n  \tcompass\tf14e\n  \tcompress\tf066\n  \tcompress-alt\tf422\n  \tcompress-arrows-alt\tf78c\n  \tconcierge-bell\tf562\n  \tcookie\tf563\n  \tcookie-bite\tf564\n  \tcopy\tf0c5\n  \tcopyright\tf1f9\n  \tcouch\tf4b8\n  \tcredit-card\tf09d\n  \tcrop\tf125\n  \tcrop-alt\tf565\n  \tcross\tf654\n  \tcrosshairs\tf05b\n  \tcrow\tf520\n  \tcrown\tf521\n  \tcrutch\tf7f7\n  \tcube\tf1b2\n  \tcubes\tf1b3\n  \tcut\tf0c4\n  \tdatabase\tf1c0\n  \tdeaf\tf2a4\n  \tdemocrat\tf747\n  \tdesktop\tf108\n  \tdharmachakra\tf655\n  \tdiagnoses\tf470\n  \tdice\tf522\n  \tdice-d20\tf6cf\n  \tdice-d6\tf6d1\n  \tdice-five\tf523\n  \tdice-four\tf524\n  \tdice-one\tf525\n  \tdice-six\tf526\n  \tdice-three\tf527\n  \tdice-two\tf528\n  \tdigital-tachograph\tf566\n  \tdirections\tf5eb\n  \tdisease\tf7fa\n  \tdivide\tf529\n  \tdizzy\tf567\n  \tdna\tf471\n  \tdog\tf6d3\n  \tdollar-sign\tf155\n  \tdolly\tf472\n  \tdolly-flatbed\tf474\n  \tdonate\tf4b9\n  \tdoor-closed\tf52a\n  \tdoor-open\tf52b\n  \tdot-circle\tf192\n  \tdove\tf4ba\n  \tdownload\tf019\n  \tdrafting-compass\tf568\n  \tdragon\tf6d5\n  \tdraw-polygon\tf5ee\n  \tdrum\tf569\n  \tdrum-steelpan\tf56a\n  \tdrumstick-bite\tf6d7\n  \tdumbbell\tf44b\n  \tdumpster\tf793\n  \tdumpster-fire\tf794\n  \tdungeon\tf6d9\n  \tedit\tf044\n  \tegg\tf7fb\n  \teject\tf052\n  \tellipsis-h\tf141\n  \tellipsis-v\tf142\n  \tenvelope\tf0e0\n  \tenvelope-open\tf2b6\n  \tenvelope-open-text\tf658\n  \tenvelope-square\tf199\n  \tequals\tf52c\n  \teraser\tf12d\n  \tethernet\tf796\n  \teuro-sign\tf153\n  \texchange-alt\tf362\n  \texclamation\tf12a\n  \texclamation-circle\tf06a\n  \texclamation-triangle\tf071\n  \texpand\tf065\n  \texpand-alt\tf424\n  \texpand-arrows-alt\tf31e\n  \texternal-link-alt\tf35d\n  \texternal-link-square-alt\tf360\n  \teye\tf06e\n  \teye-dropper\tf1fb\n  \teye-slash\tf070\n  \tfan\tf863\n  \tfast-backward\tf049\n  \tfast-forward\tf050\n  \tfaucet\te005\n  \tfax\tf1ac\n  \tfeather\tf52d\n  \tfeather-alt\tf56b\n  \tfemale\tf182\n  \tfighter-jet\tf0fb\n  \tfile\tf15b\n  \tfile-alt\tf15c\n  \tfile-archive\tf1c6\n  \tfile-audio\tf1c7\n  \tfile-code\tf1c9\n  \tfile-contract\tf56c\n  \tfile-csv\tf6dd\n  \tfile-download\tf56d\n  \tfile-excel\tf1c3\n  \tfile-export\tf56e\n  \tfile-image\tf1c5\n  \tfile-import\tf56f\n  \tfile-invoice\tf570\n  \tfile-invoice-dollar\tf571\n  \tfile-medical\tf477\n  \tfile-medical-alt\tf478\n  \tfile-pdf\tf1c1\n  \tfile-powerpoint\tf1c4\n  \tfile-prescription\tf572\n  \tfile-signature\tf573\n  \tfile-upload\tf574\n  \tfile-video\tf1c8\n  \tfile-word\tf1c2\n  \tfill\tf575\n  \tfill-drip\tf576\n  \tfilm\tf008\n  \tfilter\tf0b0\n  \tfingerprint\tf577\n  \tfire\tf06d\n  \tfire-alt\tf7e4\n  \tfire-extinguisher\tf134\n  \tfirst-aid\tf479\n  \tfish\tf578\n  \tfist-raised\tf6de\n  \tflag\tf024\n  \tflag-checkered\tf11e\n  \tflag-usa\tf74d\n  \tflask\tf0c3\n  \tflushed\tf579\n  \tfolder\tf07b\n  \tfolder-minus\tf65d\n  \tfolder-open\tf07c\n  \tfolder-plus\tf65e\n  \tfont\tf031\n  \tfootball-ball\tf44e\n  \tforward\tf04e\n  \tfrog\tf52e\n  \tfrown\tf119\n  \tfrown-open\tf57a\n  \tfunnel-dollar\tf662\n  \tfutbol\tf1e3\n  \tgamepad\tf11b\n  \tgas-pump\tf52f\n  \tgavel\tf0e3\n  \tgem\tf3a5\n  \tgenderless\tf22d\n  \tghost\tf6e2\n  \tgift\tf06b\n  \tgifts\tf79c\n  \tglass-cheers\tf79f\n  \tglass-martini\tf000\n  \tglass-martini-alt\tf57b\n  \tglass-whiskey\tf7a0\n  \tglasses\tf530\n  \tglobe\tf0ac\n  \tglobe-africa\tf57c\n  \tglobe-americas\tf57d\n  \tglobe-asia\tf57e\n  \tglobe-europe\tf7a2\n  \tgolf-ball\tf450\n  \tgopuram\tf664\n  \tgraduation-cap\tf19d\n  \tgreater-than\tf531\n  \tgreater-than-equal\tf532\n  \tgrimace\tf57f\n  \tgrin\tf580\n  \tgrin-alt\tf581\n  \tgrin-beam\tf582\n  \tgrin-beam-sweat\tf583\n  \tgrin-hearts\tf584\n  \tgrin-squint\tf585\n  \tgrin-squint-tears\tf586\n  \tgrin-stars\tf587\n  \tgrin-tears\tf588\n  \tgrin-tongue\tf589\n  \tgrin-tongue-squint\tf58a\n  \tgrin-tongue-wink\tf58b\n  \tgrin-wink\tf58c\n  \tgrip-horizontal\tf58d\n  \tgrip-lines\tf7a4\n  \tgrip-lines-vertical\tf7a5\n  \tgrip-vertical\tf58e\n  \tguitar\tf7a6\n  \th-square\tf0fd\n  \thamburger\tf805\n  \thammer\tf6e3\n  \thamsa\tf665\n  \thand-holding\tf4bd\n  \thand-holding-heart\tf4be\n  \thand-holding-medical\te05c\n  \thand-holding-usd\tf4c0\n  \thand-holding-water\tf4c1\n  \thand-lizard\tf258\n  \thand-middle-finger\tf806\n  \thand-paper\tf256\n  \thand-peace\tf25b\n  \thand-point-down\tf0a7\n  \thand-point-left\tf0a5\n  \thand-point-right\tf0a4\n  \thand-point-up\tf0a6\n  \thand-pointer\tf25a\n  \thand-rock\tf255\n  \thand-scissors\tf257\n  \thand-sparkles\te05d\n  \thand-spock\tf259\n  \thands\tf4c2\n  \thands-helping\tf4c4\n  \thands-wash\te05e\n  \thandshake\tf2b5\n  \thandshake-alt-slash\te05f\n  \thandshake-slash\te060\n  \thanukiah\tf6e6\n  \thard-hat\tf807\n  \thashtag\tf292\n  \that-cowboy\tf8c0\n  \that-cowboy-side\tf8c1\n  \that-wizard\tf6e8\n  \thdd\tf0a0\n  \thead-side-cough\te061\n  \thead-side-cough-slash\te062\n  \thead-side-mask\te063\n  \thead-side-virus\te064\n  \theading\tf1dc\n  \theadphones\tf025\n  \theadphones-alt\tf58f\n  \theadset\tf590\n  \theart\tf004\n  \theart-broken\tf7a9\n  \theartbeat\tf21e\n  \thelicopter\tf533\n  \thighlighter\tf591\n  \thiking\tf6ec\n  \thippo\tf6ed\n  \thistory\tf1da\n  \thockey-puck\tf453\n  \tholly-berry\tf7aa\n  \thome\tf015\n  \thorse\tf6f0\n  \thorse-head\tf7ab\n  \thospital\tf0f8\n  \thospital-alt\tf47d\n  \thospital-symbol\tf47e\n  \thospital-user\tf80d\n  \thot-tub\tf593\n  \thotdog\tf80f\n  \thotel\tf594\n  \thourglass\tf254\n  \thourglass-end\tf253\n  \thourglass-half\tf252\n  \thourglass-start\tf251\n  \thouse-damage\tf6f1\n  \thouse-user\te065\n  \thryvnia\tf6f2\n  \ti-cursor\tf246\n  \tice-cream\tf810\n  \ticicles\tf7ad\n  \ticons\tf86d\n  \tid-badge\tf2c1\n  \tid-card\tf2c2\n  \tid-card-alt\tf47f\n  \tigloo\tf7ae\n  \timage\tf03e\n  \timages\tf302\n  \tinbox\tf01c\n  \tindent\tf03c\n  \tindustry\tf275\n  \tinfinity\tf534\n  \tinfo\tf129\n  \tinfo-circle\tf05a\n  \titalic\tf033\n  \tjedi\tf669\n  \tjoint\tf595\n  \tjournal-whills\tf66a\n  \tkaaba\tf66b\n  \tkey\tf084\n  \tkeyboard\tf11c\n  \tkhanda\tf66d\n  \tkiss\tf596\n  \tkiss-beam\tf597\n  \tkiss-wink-heart\tf598\n  \tkiwi-bird\tf535\n  \tlandmark\tf66f\n  \tlanguage\tf1ab\n  \tlaptop\tf109\n  \tlaptop-code\tf5fc\n  \tlaptop-house\te066\n  \tlaptop-medical\tf812\n  \tlaugh\tf599\n  \tlaugh-beam\tf59a\n  \tlaugh-squint\tf59b\n  \tlaugh-wink\tf59c\n  \tlayer-group\tf5fd\n  \tleaf\tf06c\n  \tlemon\tf094\n  \tless-than\tf536\n  \tless-than-equal\tf537\n  \tlevel-down-alt\tf3be\n  \tlevel-up-alt\tf3bf\n  \tlife-ring\tf1cd\n  \tlightbulb\tf0eb\n  \tlink\tf0c1\n  \tlira-sign\tf195\n  \tlist\tf03a\n  \tlist-alt\tf022\n  \tlist-ol\tf0cb\n  \tlist-ul\tf0ca\n  \tlocation-arrow\tf124\n  \tlock\tf023\n  \tlock-open\tf3c1\n  \tlong-arrow-alt-down\tf309\n  \tlong-arrow-alt-left\tf30a\n  \tlong-arrow-alt-right\tf30b\n  \tlong-arrow-alt-up\tf30c\n  \tlow-vision\tf2a8\n  \tluggage-cart\tf59d\n  \tlungs\tf604\n  \tlungs-virus\te067\n  \tmagic\tf0d0\n  \tmagnet\tf076\n  \tmail-bulk\tf674\n  \tmale\tf183\n  \tmap\tf279\n  \tmap-marked\tf59f\n  \tmap-marked-alt\tf5a0\n  \tmap-marker\tf041\n  \tmap-marker-alt\tf3c5\n  \tmap-pin\tf276\n  \tmap-signs\tf277\n  \tmarker\tf5a1\n  \tmars\tf222\n  \tmars-double\tf227\n  \tmars-stroke\tf229\n  \tmars-stroke-h\tf22b\n  \tmars-stroke-v\tf22a\n  \tmask\tf6fa\n  \tmedal\tf5a2\n  \tmedkit\tf0fa\n  \tmeh\tf11a\n  \tmeh-blank\tf5a4\n  \tmeh-rolling-eyes\tf5a5\n  \tmemory\tf538\n  \tmenorah\tf676\n  \tmercury\tf223\n  \tmeteor\tf753\n  \tmicrochip\tf2db\n  \tmicrophone\tf130\n  \tmicrophone-alt\tf3c9\n  \tmicrophone-alt-slash\tf539\n  \tmicrophone-slash\tf131\n  \tmicroscope\tf610\n  \tminus\tf068\n  \tminus-circle\tf056\n  \tminus-square\tf146\n  \tmitten\tf7b5\n  \tmobile\tf10b\n  \tmobile-alt\tf3cd\n  \tmoney-bill\tf0d6\n  \tmoney-bill-alt\tf3d1\n  \tmoney-bill-wave\tf53a\n  \tmoney-bill-wave-alt\tf53b\n  \tmoney-check\tf53c\n  \tmoney-check-alt\tf53d\n  \tmonument\tf5a6\n  \tmoon\tf186\n  \tmortar-pestle\tf5a7\n  \tmosque\tf678\n  \tmotorcycle\tf21c\n  \tmountain\tf6fc\n  \tmouse\tf8cc\n  \tmouse-pointer\tf245\n  \tmug-hot\tf7b6\n  \tmusic\tf001\n  \tnetwork-wired\tf6ff\n  \tneuter\tf22c\n  \tnewspaper\tf1ea\n  \tnot-equal\tf53e\n  \tnotes-medical\tf481\n  \tobject-group\tf247\n  \tobject-ungroup\tf248\n  \toil-can\tf613\n  \tom\tf679\n  \totter\tf700\n  \toutdent\tf03b\n  \tpager\tf815\n  \tpaint-brush\tf1fc\n  \tpaint-roller\tf5aa\n  \tpalette\tf53f\n  \tpallet\tf482\n  \tpaper-plane\tf1d8\n  \tpaperclip\tf0c6\n  \tparachute-box\tf4cd\n  \tparagraph\tf1dd\n  \tparking\tf540\n  \tpassport\tf5ab\n  \tpastafarianism\tf67b\n  \tpaste\tf0ea\n  \tpause\tf04c\n  \tpause-circle\tf28b\n  \tpaw\tf1b0\n  \tpeace\tf67c\n  \tpen\tf304\n  \tpen-alt\tf305\n  \tpen-fancy\tf5ac\n  \tpen-nib\tf5ad\n  \tpen-square\tf14b\n  \tpencil-alt\tf303\n  \tpencil-ruler\tf5ae\n  \tpeople-arrows\te068\n  \tpeople-carry\tf4ce\n  \tpepper-hot\tf816\n  \tpercent\tf295\n  \tpercentage\tf541\n  \tperson-booth\tf756\n  \tphone\tf095\n  \tphone-alt\tf879\n  \tphone-slash\tf3dd\n  \tphone-square\tf098\n  \tphone-square-alt\tf87b\n  \tphone-volume\tf2a0\n  \tphoto-video\tf87c\n  \tpiggy-bank\tf4d3\n  \tpills\tf484\n  \tpizza-slice\tf818\n  \tplace-of-worship\tf67f\n  \tplane\tf072\n  \tplane-arrival\tf5af\n  \tplane-departure\tf5b0\n  \tplane-slash\te069\n  \tplay\tf04b\n  \tplay-circle\tf144\n  \tplug\tf1e6\n  \tplus\tf067\n  \tplus-circle\tf055\n  \tplus-square\tf0fe\n  \tpodcast\tf2ce\n  \tpoll\tf681\n  \tpoll-h\tf682\n  \tpoo\tf2fe\n  \tpoo-storm\tf75a\n  \tpoop\tf619\n  \tportrait\tf3e0\n  \tpound-sign\tf154\n  \tpower-off\tf011\n  \tpray\tf683\n  \tpraying-hands\tf684\n  \tprescription\tf5b1\n  \tprescription-bottle\tf485\n  \tprescription-bottle-alt\tf486\n  \tprint\tf02f\n  \tprocedures\tf487\n  \tproject-diagram\tf542\n  \tpump-medical\te06a\n  \tpump-soap\te06b\n  \tpuzzle-piece\tf12e\n  \tqrcode\tf029\n  \tquestion\tf128\n  \tquestion-circle\tf059\n  \tquidditch\tf458\n  \tquote-left\tf10d\n  \tquote-right\tf10e\n  \tquran\tf687\n  \tradiation\tf7b9\n  \tradiation-alt\tf7ba\n  \trainbow\tf75b\n  \trandom\tf074\n  \treceipt\tf543\n  \trecord-vinyl\tf8d9\n  \trecycle\tf1b8\n  \tredo\tf01e\n  \tredo-alt\tf2f9\n  \tregistered\tf25d\n  \tremove-format\tf87d\n  \treply\tf3e5\n  \treply-all\tf122\n  \trepublican\tf75e\n  \trestroom\tf7bd\n  \tretweet\tf079\n  \tribbon\tf4d6\n  \tring\tf70b\n  \troad\tf018\n  \trobot\tf544\n  \trocket\tf135\n  \troute\tf4d7\n  \trss\tf09e\n  \trss-square\tf143\n  \truble-sign\tf158\n  \truler\tf545\n  \truler-combined\tf546\n  \truler-horizontal\tf547\n  \truler-vertical\tf548\n  \trunning\tf70c\n  \trupee-sign\tf156\n  \tsad-cry\tf5b3\n  \tsad-tear\tf5b4\n  \tsatellite\tf7bf\n  \tsatellite-dish\tf7c0\n  \tsave\tf0c7\n  \tschool\tf549\n  \tscrewdriver\tf54a\n  \tscroll\tf70e\n  \tsd-card\tf7c2\n  \tsearch\tf002\n  \tsearch-dollar\tf688\n  \tsearch-location\tf689\n  \tsearch-minus\tf010\n  \tsearch-plus\tf00e\n  \tseedling\tf4d8\n  \tserver\tf233\n  \tshapes\tf61f\n  \tshare\tf064\n  \tshare-alt\tf1e0\n  \tshare-alt-square\tf1e1\n  \tshare-square\tf14d\n  \tshekel-sign\tf20b\n  \tshield-alt\tf3ed\n  \tshield-virus\te06c\n  \tship\tf21a\n  \tshipping-fast\tf48b\n  \tshoe-prints\tf54b\n  \tshopping-bag\tf290\n  \tshopping-basket\tf291\n  \tshopping-cart\tf07a\n  \tshower\tf2cc\n  \tshuttle-van\tf5b6\n  \tsign\tf4d9\n  \tsign-in-alt\tf2f6\n  \tsign-language\tf2a7\n  \tsign-out-alt\tf2f5\n  \tsignal\tf012\n  \tsignature\tf5b7\n  \tsim-card\tf7c4\n  \tsink\te06d\n  \tsitemap\tf0e8\n  \tskating\tf7c5\n  \tskiing\tf7c9\n  \tskiing-nordic\tf7ca\n  \tskull\tf54c\n  \tskull-crossbones\tf714\n  \tslash\tf715\n  \tsleigh\tf7cc\n  \tsliders-h\tf1de\n  \tsmile\tf118\n  \tsmile-beam\tf5b8\n  \tsmile-wink\tf4da\n  \tsmog\tf75f\n  \tsmoking\tf48d\n  \tsmoking-ban\tf54d\n  \tsms\tf7cd\n  \tsnowboarding\tf7ce\n  \tsnowflake\tf2dc\n  \tsnowman\tf7d0\n  \tsnowplow\tf7d2\n  \tsoap\te06e\n  \tsocks\tf696\n  \tsolar-panel\tf5ba\n  \tsort\tf0dc\n  \tsort-alpha-down\tf15d\n  \tsort-alpha-down-alt\tf881\n  \tsort-alpha-up\tf15e\n  \tsort-alpha-up-alt\tf882\n  \tsort-amount-down\tf160\n  \tsort-amount-down-alt\tf884\n  \tsort-amount-up\tf161\n  \tsort-amount-up-alt\tf885\n  \tsort-down\tf0dd\n  \tsort-numeric-down\tf162\n  \tsort-numeric-down-alt\tf886\n  \tsort-numeric-up\tf163\n  \tsort-numeric-up-alt\tf887\n  \tsort-up\tf0de\n  \tspa\tf5bb\n  \tspace-shuttle\tf197\n  \tspell-check\tf891\n  \tspider\tf717\n  \tspinner\tf110\n  \tsplotch\tf5bc\n  \tspray-can\tf5bd\n  \tsquare\tf0c8\n  \tsquare-full\tf45c\n  \tsquare-root-alt\tf698\n  \tstamp\tf5bf\n  \tstar\tf005\n  \tstar-and-crescent\tf699\n  \tstar-half\tf089\n  \tstar-half-alt\tf5c0\n  \tstar-of-david\tf69a\n  \tstar-of-life\tf621\n  \tstep-backward\tf048\n  \tstep-forward\tf051\n  \tstethoscope\tf0f1\n  \tsticky-note\tf249\n  \tstop\tf04d\n  \tstop-circle\tf28d\n  \tstopwatch\tf2f2\n  \tstopwatch-20\te06f\n  \tstore\tf54e\n  \tstore-alt\tf54f\n  \tstore-alt-slash\te070\n  \tstore-slash\te071\n  \tstream\tf550\n  \tstreet-view\tf21d\n  \tstrikethrough\tf0cc\n  \tstroopwafel\tf551\n  \tsubscript\tf12c\n  \tsubway\tf239\n  \tsuitcase\tf0f2\n  \tsuitcase-rolling\tf5c1\n  \tsun\tf185\n  \tsuperscript\tf12b\n  \tsurprise\tf5c2\n  \tswatchbook\tf5c3\n  \tswimmer\tf5c4\n  \tswimming-pool\tf5c5\n  \tsynagogue\tf69b\n  \tsync\tf021\n  \tsync-alt\tf2f1\n  \tsyringe\tf48e\n  \ttable\tf0ce\n  \ttable-tennis\tf45d\n  \ttablet\tf10a\n  \ttablet-alt\tf3fa\n  \ttablets\tf490\n  \ttachometer-alt\tf3fd\n  \ttag\tf02b\n  \ttags\tf02c\n  \ttape\tf4db\n  \ttasks\tf0ae\n  \ttaxi\tf1ba\n  \tteeth\tf62e\n  \tteeth-open\tf62f\n  \ttemperature-high\tf769\n  \ttemperature-low\tf76b\n  \ttenge\tf7d7\n  \tterminal\tf120\n  \ttext-height\tf034\n  \ttext-width\tf035\n  \tth\tf00a\n  \tth-large\tf009\n  \tth-list\tf00b\n  \ttheater-masks\tf630\n  \tthermometer\tf491\n  \tthermometer-empty\tf2cb\n  \tthermometer-full\tf2c7\n  \tthermometer-half\tf2c9\n  \tthermometer-quarter\tf2ca\n  \tthermometer-three-quarters\tf2c8\n  \tthumbs-down\tf165\n  \tthumbs-up\tf164\n  \tthumbtack\tf08d\n  \tticket-alt\tf3ff\n  \ttimes\tf00d\n  \ttimes-circle\tf057\n  \ttint\tf043\n  \ttint-slash\tf5c7\n  \ttired\tf5c8\n  \ttoggle-off\tf204\n  \ttoggle-on\tf205\n  \ttoilet\tf7d8\n  \ttoilet-paper\tf71e\n  \ttoilet-paper-slash\te072\n  \ttoolbox\tf552\n  \ttools\tf7d9\n  \ttooth\tf5c9\n  \ttorah\tf6a0\n  \ttorii-gate\tf6a1\n  \ttractor\tf722\n  \ttrademark\tf25c\n  \ttraffic-light\tf637\n  \ttrailer\te041\n  \ttrain\tf238\n  \ttram\tf7da\n  \ttransgender\tf224\n  \ttransgender-alt\tf225\n  \ttrash\tf1f8\n  \ttrash-alt\tf2ed\n  \ttrash-restore\tf829\n  \ttrash-restore-alt\tf82a\n  \ttree\tf1bb\n  \ttrophy\tf091\n  \ttruck\tf0d1\n  \ttruck-loading\tf4de\n  \ttruck-monster\tf63b\n  \ttruck-moving\tf4df\n  \ttruck-pickup\tf63c\n  \ttshirt\tf553\n  \ttty\tf1e4\n  \ttv\tf26c\n  \tumbrella\tf0e9\n  \tumbrella-beach\tf5ca\n  \tunderline\tf0cd\n  \tundo\tf0e2\n  \tundo-alt\tf2ea\n  \tuniversal-access\tf29a\n  \tuniversity\tf19c\n  \tunlink\tf127\n  \tunlock\tf09c\n  \tunlock-alt\tf13e\n  \tupload\tf093\n  \tuser\tf007\n  \tuser-alt\tf406\n  \tuser-alt-slash\tf4fa\n  \tuser-astronaut\tf4fb\n  \tuser-check\tf4fc\n  \tuser-circle\tf2bd\n  \tuser-clock\tf4fd\n  \tuser-cog\tf4fe\n  \tuser-edit\tf4ff\n  \tuser-friends\tf500\n  \tuser-graduate\tf501\n  \tuser-injured\tf728\n  \tuser-lock\tf502\n  \tuser-md\tf0f0\n  \tuser-minus\tf503\n  \tuser-ninja\tf504\n  \tuser-nurse\tf82f\n  \tuser-plus\tf234\n  \tuser-secret\tf21b\n  \tuser-shield\tf505\n  \tuser-slash\tf506\n  \tuser-tag\tf507\n  \tuser-tie\tf508\n  \tuser-times\tf235\n  \tusers\tf0c0\n  \tusers-cog\tf509\n  \tusers-slash\te073\n  \tutensil-spoon\tf2e5\n  \tutensils\tf2e7\n  \tvector-square\tf5cb\n  \tvenus\tf221\n  \tvenus-double\tf226\n  \tvenus-mars\tf228\n  \tvest\te085\n  \tvest-patches\te086\n  \tvial\tf492\n  \tvials\tf493\n  \tvideo\tf03d\n  \tvideo-slash\tf4e2\n  \tvihara\tf6a7\n  \tvirus\te074\n  \tvirus-slash\te075\n  \tviruses\te076\n  \tvoicemail\tf897\n  \tvolleyball-ball\tf45f\n  \tvolume-down\tf027\n  \tvolume-mute\tf6a9\n  \tvolume-off\tf026\n  \tvolume-up\tf028\n  \tvote-yea\tf772\n  \tvr-cardboard\tf729\n  \twalking\tf554\n  \twallet\tf555\n  \twarehouse\tf494\n  \twater\tf773\n  \twave-square\tf83e\n  \tweight\tf496\n  \tweight-hanging\tf5cd\n  \twheelchair\tf193\n  \twifi\tf1eb\n  \twind\tf72e\n  \twindow-close\tf410\n  \twindow-maximize\tf2d0\n  \twindow-minimize\tf2d1\n  \twindow-restore\tf2d2\n  \twine-bottle\tf72f\n  \twine-glass\tf4e3\n  \twine-glass-alt\tf5ce\n  \twon-sign\tf159\n  \twrench\tf0ad\n  \tx-ray\tf497\n  \tyen-sign\tf157\n  </pre>\n  ")}$.extend(freeboard,jQuery.eventEmitter),globalSettingsSchema={type:"object",title:"Settings",properties:{theme:{type:"object",title:"Theme",properties:{"--box-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--main-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--main-bg-image":{type:"string",media:{binaryEncoding:"base64",type:"img/png"}},"--main-font":{type:"string",enum:["FBSans","FBSerif","Chalkboard","Chancery","Pandora","RoughScript","Handwriting","B612","FBMono","Blackletter","FBComic","Pixel","QTBlackForest","Pixel","FBCursive","DIN","PenguinAttack","DSEG7","DSEG14"]},"--title-font":{type:"string",enum:["FBSans","FBSerif","Chalkboard","Chancery","Pandora","RoughScript","Handwriting","B612","FBMono","Blackletter","FBComic","Pixel","QTBlackForest","Pixel","FBCursive","DIN","PenguinAttack","DSEG7","DSEG14"]},"--widget-font":{type:"string",enum:["FBSans","FBSerif","Chalkboard","Chancery","Pandora","RoughScript","Handwriting","B612","FBMono","Blackletter","FBComic","Pixel","QTBlackForest","Pixel","FBCursive","DIN","PenguinAttack","DSEG7","DSEG14"]},"--main-font-size":{type:"string",enum:["small","medium","large","x-large","xx-large","12px","16px","24px","32px","48px","64px","80px"]},"--title-font-size":{type:"string",enum:["small","medium","large","x-large","xx-large","12px","16px","24px","32px","48px","64px","80px"]},"--widget-font-size":{type:"string",enum:["small","medium","large","x-large","xx-large","12px","16px","24px","32px","48px","64px","80px"]},"--fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--widget-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--widget-fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--bar-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--header-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--header-fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--label-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--label-fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--title-shadow":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--border-width":{type:"string",enum:["0px","1px","2px","3px","4px","5px"]},"--header-border-radius":{type:"string",enum:["0em","1em","2em","3em","4em","5em"]},"--header-line-width":{type:"string",enum:["0px","1px","2px","3px"]},"--pane-padding":{type:"string",enum:["0.3em","0.6em","1.2em","2.4em"]},"--pane-border-radius":{type:"string",enum:["0.3em","0.6em","1.2em","2.4em"]},"--widget-border-radius":{type:"string",enum:["0em","0.3em","0.6em","1.2em","2.4em","4.8em"]},"--main-bg-size":{type:"string",enum:["auto","cover","contain"]},"--title-line-height":{type:"string",enum:["20px","40px","60px","80px","100px"]}}}}};var Button=function(t){jsGrid.Field.call(this,t)};function uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}Button.prototype=new jsGrid.Field({align:"center",sorter:function(t,e){return 0},itemTemplate:function(t,e){return $("<input>").on("click",function(){this.fn(e)}).title(this.title)},insertTemplate:function(t,e){return""},editTemplate:function(t,e){return $("<input>").on("click",function(){this.fn(e)}).title(this.title)},insertValue:function(){return""},editValue:function(){return""}}),jsGrid.fields.button=Button,function(){var t=0;freeboard.addStyle(".datagrid","border: 2px solid #3d3d3d;background-color: #222;margin: 10px;"),freeboard.addStyle(".datagrid-label","margin-left: 10px; margin-top: 10px; text-transform: capitalize;"),freeboard.addStyle(".myui-datagrid-handle","width: 1.5em !important; height: 1.5em !important; border-radius: 50%; top: -.4em !important; margin-left:-1.0em !important;"),freeboard.addStyle(".ui-datagrid-range","background: #F90;"),freeboard.loadWidgetPlugin({type_name:"jsGrid",display_name:"jsGrid Data grid View Plugin",description:"Database grid view. Data is an array of objects.",fill_size:!0,settings:[{name:"title",display_name:"Title",type:"text",default_value:""},{name:"backend",display_name:"Data backend(JS Grid CSontroller)",type:"calculated",default_value:""},{name:"selection",display_name:"Selection",description:"Selection gets assigned here. If no selection, empty obj.  Set obj._arrival to save changes back to array(The data doesn't matter, it reads as the time when it was set.)",type:"target",default_value:""},{name:"data",display_name:"Direct data array",description:"",type:"target",default_value:""},{name:"columns",display_name:"Display Columns",type:"array",settings:[{name:"name",display_name:"Data Field(match key on row)",type:"text"},{name:"type",display_name:"Type",type:"option",options:[{name:"Text",value:"text"},{name:"Long Textarea",value:"textarea"},{name:"Number",value:"number"},{name:"Checkbox",value:"checkbox"},{name:"Add/Edit/Del Controls",value:"control"}]}]},{name:"selectionTarget",display_name:"Data target when selection changes. ",description:"Value pushed will be a value, timestamp pair. Value will be the entire selected record object",type:"target"}],newInstance:function(t,n){n(new e(t))}});var e=function(e){if(e.backend&&e.data)throw new Error("Cannot use both the backend and the data options at the same time");var n=this;n.currentSettings=e,n.data=[];var a="datagrid-"+t++,o=$('<div class="datagrid-widget datagrid-label" id="__'+a+'"></div>'),r=$('<h2 class="section-title datagrid-label"></h2>'),s=$("<div>",{id:a}).css("width","90%"),l="#"+a,d="#value-"+a;n.backend=0,n.makeExternalEditRow=function(t){return new Proxy(t,{set:function(t,e,a){"_arrival"==e?(t._arrival=1e3*Date.now(),n.upsert(t),$(l).jsGrid("refresh")):(t.__time=1e3*Date.now(),t[e]=a)}})};var c=function(t){t._uuid=t._uuid||uuidv4(),t._name=t._name||t._uuid,t._time=t._time||parseInt(1e3*Date.now()),t._arrival=t._arrival||t._time};n.upsert=function(t){if(t){for(i of n.data)if(i._uuid==t._uuid){if(_.isMatch(i,t))return;return Object.assign(i,t),void n.dataTargets.data(n.data)}c(t),void 0!=n.data&&""!=n.data||(n.data=[]),n.data.push(t),n.dataTargets.data(n.data)}},n.arrayController={deleteItem:function(t){for(i of(_.isMatch(i.selection,t)&&n.setSelection({}),n.data))i._uuid==t._uuid&&(n.data=_.without(n.data,i));n.dataTargets.data(n.data)},updateItem:n.upsert,insertItem:n.upsert,loadData:function(t){var e=nSQL(n.data||[]).query("select");for(i in t)!t[i]||["sortField","sortOrder","pageIndex","pageSize"].indexOf(i)>-1||(e=e.where(["LOWER("+i+")","=",String(t[i]).toLowerCase()]));t.sortOrder&&(e=e.orderBy([t.sortField+" "+t.sortOrder.toUpperCase()])),e=e.limit(t.pageSize).offset((t.pageIndex-1)*t.pageSize);return async function(){return{data:await e.exec(),itemsCount:n.data.length}}()}},n.setSelection=function(t){n.dataTargets.selection(n.makeExternalEditRow(t))},n.acceptData=function(t){for(f in 0==t&&(t=n.data),n.data=t,n.data)c(f)},n.refreshGrid=function(t){for(f in 0==t&&(t=n.data),n.data=t,n.data)c(f);$(l).jsGrid("destroy");var e=function(){n.dataTargets.data(n.data)};for(i of n.currentSettings.columns||[]){var a={};Object.assign(a,i)}$(l).jsGrid({width:"95%",height:"250px",inserting:!0,editing:!0,sorting:!0,paging:!0,pageLoading:!0,filtering:!0,onItemDeleted:e,onItemUpdated:e,onItemInserted:e,rowClick:function(t){n.setSelection(t.item)},controller:n.backend||n.arrayController,fields:{}})},$(l).jsGrid("refresh"),r.html(n.currentSettings.title),n.value=n.currentSettings.value||0;n.render=function(t){$(t).append(o),r.appendTo(o),s.appendTo(o),n.refreshGrid(0),$(d).html(n.value+n.currentSettings.unit),$(l).removeClass("ui-widget-content")},n.getHeight=function(){return 6},n.onSettingsChanged=function(t){if(t.backend&&t.data)throw new Error("Cannot use both the backend and the data options at the same time");n.currentSettings=t,r.html(_.isUndefined(t.title)?"":t.title),n.currentSettings.unit=n.currentSettings.unit||"",n.setSelection({})},n.onCalculatedValueChanged=function(t,e){"columns"==t&&n.refreshGrid(0),"backend"==t&&(n.backend=e,n.refreshGrid(0)),"data"==t&&(n.acceptData(e||[]),$(l).jsGrid("refresh"))},n.onDispose=function(){$(l).jsGrid("destroy")}}}();var htmlWidget=function(t){var e=this,n=$('<div class="html-widget" style="overflow:auto;height:100%;width:100%;"></div>'),a=t;this.updateData=function(){e.data={},a.data&&"object"==typeof a.data?n.html(Mustache.render(a.html,a.data)):n.html(a.html)},this.render=function(t){$(t).append(n),e.updateData()},this.onSettingsChanged=function(t){a=t,e.updateData()},this.onCalculatedValueChanged=function(t,n){"html"==t&&e.updateData(),"data"==t&&(a.data=n,e.updateData())},this.onDispose=function(){},this.getHeight=function(){return Number(a.height)},this.onSettingsChanged(t)};function uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}freeboard.loadWidgetPlugin({type_name:"html-template",display_name:"Rich Text Content",fill_size:!0,settings:[{name:"html",display_name:"HTML",type:"html-wysywig",description:"HTML template.  You can paste images here, they are stored in the freeboard config itself as base64."},{name:"data",display_name:"Variables to use",type:"calculated",default_value:"={varName: 'value'}",description:"Variables to use in Mustache templating, as a JS object.  Access a var with {{varname}} in your document template, it gets replaced with the value."},{name:"height",display_name:"Height Blocks",type:"number",default_value:4,description:"A height block is around 60 pixels"}],newInstance:function(t,e){e(new htmlWidget(t))}}),function(){var t=0;freeboard.addStyle(".button","border: 2px solid #3d3d3d;background-color: #222;margin: 10px;"),freeboard.addStyle(".button-label","margin-left: 10px; margin-top: 10px; text-transform: capitalize;"),freeboard.addStyle(".myui-button-handle","width: 1.5em !important; height: 1.5em !important; border-radius: 50%; top: -.4em !important; margin-left:-1.0em !important;"),freeboard.addStyle(".ui-button-range","background: #F90;"),freeboard.loadWidgetPlugin({type_name:"button_plugin",display_name:"Button",description:"DataTarget compatible button that can run JS code when clicked",fill_size:!0,settings:[{name:"html",display_name:"Button Contents",type:"calculated",default_value:"<i>Button</i>"},{name:"tooltip",display_name:"Tooltip hint",type:"text",default_value:""},{name:"value",display_name:"Value",description:"This value gets pushed to the target when clicked.  If empty, a simple counter is used.  It recalculated every click.",type:"calculated"},{name:"target",display_name:"Data target when clicked",description:'"value" pushed will be a value,timestamp pair. Value defaults to a click counter',type:"target"}],newInstance:function(t,n){n(new e(t))}});var e=function(e){var n=this;n.currentSettings=e;var a="button-"+t++,i=$('<div class="button-widget button-label" id="__'+a+'"></div>'),o=$("<button/>",{type:"text",pattern:e.pattern,id:a}).html(e.html).css("width","95%"),r="#"+a;n.clickCount=0,n.value="",n.render=function(t){$(t).append(i),o.appendTo(i),$(r).attr("title",n.currentSettings.tooltip),$(r).on("click",async function(t){var a=n.clickCount;$(r).attr("disabled",!0).html(e.html+"(waiting)"),await n.processCalculatedSetting("value"),_.isUndefined(n.currentSettings.value)||(a=n.value),await n.dataTargets.target(a),n.clickCount+=1,$(r).attr("disabled",!1).html(e.html)}),$(r).removeClass("ui-widget-content")},n.getHeight=function(){return"big"==n.currentSettings.size?2:1},n.onSettingsChanged=function(t){n.currentSettings=t,n.currentSettings.unit=n.currentSettings.unit||"",$(r).attr("tooltip",t.placeholder)},n.onCalculatedValueChanged=function(t,e){"html"==t&&$(r).html(e),"value"==t&&(n.value=e)},n.onDispose=function(){}}}(),function(){freeboard.loadDatasourcePlugin({type_name:"document_database_plugin",display_name:"In-browser database",description:"DB for storing JSON records.",settings:[{name:"data",display_name:"Default Data(as JSON or JS expression)",type:"text",default_value:"={}",options:function(){return{"={key: 'value'}":""}},description:"Must be a valid JS =expression that returns an object. Whatever it returns will be the default data.",required:!0}],newInstance:function(e,n,a){n(new t(e,a))}});var t=async function(t,e){var n=this;n.makeDB=async function(){n.db=await nSQL().createDatabase({id:"my-db",mode:"TEMP",tables:[{name:"records",model:{".uuid:uuid":{pk:!0}}}]})},await n.makeDB();n.database=new alasql.Database,n.database.exec("CREATE TABLE one (two INT)"),n.handler={set:function(t,e,n){throw new Error("You can't set anything here, all DB properties are async.")}},n.data={query:function(t){nSQL().useDatabase("my_db");var e=nSQL("records").query("select");for(i in t)e=e.where([i,"=",t[i]]);return e.exec()},set:function(t){var e={};e.assign(t),e[".time"]=e[".time"]|1e3*Date.now(),e[".arrival"]=e[".arrival"]|1e3*Date.now(),e[".name"]=e[".name"]|String(1e3*Date.now()),nSQL().useDatabase("my_db"),nSQL("records").query("upsert",e).exec()}},n.proxy=new Proxy(n.data,n.handler),n.onSettingsChanged=function(t){t,n.data=freeboard.eval(t.data),e(n.proxy)},n.updateNow=function(){var t;t=n.proxy,e(t)},n.onDispose=function(){}}}(),function(){freeboard.loadDatasourcePlugin({type_name:"JSON",settings:[{name:"url",display_name:"URL",type:"text"},{name:"use_thingproxy",display_name:"Try thingproxy",description:'A direct JSON connection will be tried first, if that fails, a JSONP connection will be tried. If that fails, you can use thingproxy, which can solve many connection problems to APIs. <a href="https://github.com/Freeboard/thingproxy" target="_blank">More information</a>.',type:"boolean",default_value:!0},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5},{name:"method",display_name:"Method",type:"option",options:[{name:"GET",value:"GET"},{name:"POST",value:"POST"},{name:"PUT",value:"PUT"},{name:"DELETE",value:"DELETE"}]},{name:"body",display_name:"Body",type:"text",description:"The body of the request. Normally only used if method is POST"},{name:"headers",display_name:"Headers",type:"array",settings:[{name:"name",display_name:"Name",type:"text"},{name:"value",display_name:"Value",type:"text"}]}],newInstance:function(t,e,n){e(new function(t,e){var n=this,a=null,i=t,o=0,r=!1;function s(t){a&&clearInterval(a),a=setInterval(function(){n.updateNow()},t)}s(1e3*i.refresh),this.updateNow=function(){if(!(o>1&&!i.use_thingproxy||o>2)){var t=i.url;2==o&&i.use_thingproxy&&(t=("https:"==location.protocol?"https:":"http:")+"//thingproxy.freeboard.io/fetch/"+encodeURI(i.url));var a=i.body;if(a)try{a=JSON.parse(a)}catch(t){}$.ajax({url:t,dataType:1==o?"JSONP":"JSON",type:i.method||"GET",data:a,beforeSend:function(t){try{_.each(i.headers,function(e){var n=e.name,a=e.value;_.isUndefined(n)||_.isUndefined(a)||t.setRequestHeader(n,a)})}catch(t){}},success:function(t){r=!0,e(t)},error:function(t,e,a){r||(o++,n.updateNow())}})}},this.onDispose=function(){clearInterval(a),a=null},this.onSettingsChanged=function(t){r=!1,o=0,s(1e3*(i=t).refresh),n.updateNow()}}(t,n))}});freeboard.loadDatasourcePlugin({type_name:"openweathermap",display_name:"Open Weather Map API",settings:[{name:"api_key",display_name:"API Key",type:"text",description:"Your personal API Key from Open Weather Map"},{name:"location",display_name:"Location",type:"text",description:"Example: London, UK"},{name:"units",display_name:"Units",type:"option",default:"imperial",options:[{name:"Imperial",value:"imperial"},{name:"Metric",value:"metric"}]},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5}],newInstance:function(t,e,n){e(new function(t,e){var n=this,a=null,i=t;function o(t){a&&clearInterval(a),a=setInterval(function(){n.updateNow()},t)}o(1e3*i.refresh),this.updateNow=function(){$.ajax({url:"http://api.openweathermap.org/data/2.5/weather?APPID="+i.api_key+"&q="+encodeURIComponent(i.location)+"&units="+i.units,dataType:"JSONP",success:function(t){var n,a={place_name:t.name,sunrise:new Date(1e3*t.sys.sunrise).toLocaleTimeString(),sunset:new Date(1e3*t.sys.sunset).toLocaleTimeString(),conditions:(n=t.weather[0].description,n.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})),current_temp:t.main.temp,high_temp:t.main.temp_max,low_temp:t.main.temp_min,pressure:t.main.pressure,humidity:t.main.humidity,wind_speed:t.wind.speed,wind_direction:t.wind.deg};e(a)},error:function(t,e,n){}})},this.onDispose=function(){clearInterval(a),a=null},this.onSettingsChanged=function(t){i=t,n.updateNow(),o(1e3*i.refresh)}}(t,n))}});freeboard.loadDatasourcePlugin({type_name:"dweet_io",display_name:"Dweet.io",external_scripts:["http://dweet.io/client/dweet.io.min.js"],settings:[{name:"thing_id",display_name:"Thing Name",description:"Example: salty-dog-1",type:"text"}],newInstance:function(t,e,n){e(new function(t,e){var n=t;function a(t){e(t)}this.updateNow=function(){dweetio.get_latest_dweet_for(n.thing_id,function(t,e){t||a(e[0].content)})},this.onDispose=function(){},this.onSettingsChanged=function(t){dweetio.stop_listening_for(n.thing_id),n=t,dweetio.listen_for(n.thing_id,function(t){a(t.content)})},this.onSettingsChanged(t)}(t,n))}});freeboard.loadDatasourcePlugin({type_name:"playback",display_name:"Playback",settings:[{name:"datafile",display_name:"Data File URL",type:"text",description:"A link to a JSON array of data."},{name:"is_jsonp",display_name:"Is JSONP",type:"boolean"},{name:"loop",display_name:"Loop",type:"boolean",description:"Rewind and loop when finished"},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5}],newInstance:function(t,e,n){e(new function(t,e){var n,a=this,i=t,o=[],r=0;function s(){o.length>0?(r<o.length&&(e(o[r]),r++),r>=o.length&&i.loop&&(r=0),r<o.length&&(n=setTimeout(s,1e3*i.refresh))):e({})}function l(){o=[],r=0,n&&(clearTimeout(n),n=null)}this.updateNow=function(){l(),$.ajax({url:i.datafile,dataType:i.is_jsonp?"JSONP":"JSON",success:function(t){o=_.isArray(t)?t:[],r=0,s()},error:function(t,e,n){}})},this.onDispose=function(){l()},this.onSettingsChanged=function(t){i=t,a.updateNow()}}(t,n))}});freeboard.loadDatasourcePlugin({type_name:"clock",display_name:"Clock",settings:[{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:1},{name:"strftime",display_name:"Strftime String for custom_value",type:"text",suffix:"seconds",default_value:"%I:%M:%S %p %b %d %Y"}],newInstance:function(t,e,n){e(new function(t,e){var n,a=this,i=t;function o(){n&&(clearTimeout(n),n=null)}function r(){o(),n=setInterval(a.updateNow,1e3*i.refresh)}this.updateNow=function(){var t=new Date,n="";i.strftime&&(n=strftime(i.strftime,t));var a={numeric_value:t.getTime(),custom_value:n,full_string_value:t.toLocaleString(),date_string_value:t.toLocaleDateString(),time_string_value:t.toLocaleTimeString(),date_object:t};e(a)},this.onDispose=function(){o()},this.onSettingsChanged=function(t){i=t,r()},r()}(t,n))}}),freeboard.loadDatasourcePlugin({type_name:"meshblu",display_name:"Octoblu",description:"app.octoblu.com",external_scripts:["http://meshblu.octoblu.com/js/meshblu.js"],settings:[{name:"uuid",display_name:"UUID",type:"text",default_value:"device uuid",description:"your device UUID",required:!0},{name:"token",display_name:"Token",type:"text",default_value:"device token",description:"your device TOKEN",required:!0},{name:"server",display_name:"Server",type:"text",default_value:"meshblu.octoblu.com",description:"your server",required:!0},{name:"port",display_name:"Port",type:"number",default_value:80,description:"server port",required:!0}],newInstance:function(e,n,a){n(new t(e,a))}});var t=function(t,e){var n=t;this.onSettingsChanged=function(t){n=t},this.updateNow=function(){var t;(t=skynet.createConnection({uuid:n.uuid,token:n.token,server:n.server,port:n.port})).on("ready",function(n){t.on("message",function(t){e(t)})})},this.onDispose=function(){}}}(),function(){var t=100,e=["#FF9900","#FFFFFF","#B3B4B4","#6B6B6B","#28DE28","#13F7F9","#E6EE18","#C41204","#CA3CB8","#0B1CFB"];function n(n,a,i){var o=$(n).data().values,r=$(n).data().valueMin,s=$(n).data().valueMax;o||(o=[],r=void 0,s=void 0);var l=function(e,n){o[n]||(o[n]=[]),o[n].length>=t&&o[n].shift(),o[n].push(Number(e)),(void 0===r||e<r)&&(r=e),(void 0===s||e>s)&&(s=e)};_.isArray(a)?_.each(a,l):l(a,0),$(n).data().values=o,$(n).data().valueMin=r,$(n).data().valueMax=s;var d='<span style="color: {{color}}">&#9679;</span> {{y}}',c=!1;_.each(o,function(t,a){$(n).sparkline(t,{type:"line",composite:c,height:"100%",width:"100%",fillColor:!1,lineColor:e[a%e.length],lineWidth:2,spotRadius:3,spotColor:!1,minSpotColor:"#78AB49",maxSpotColor:"#78AB49",highlightSpotColor:"#9D3926",highlightLineColor:"#9D3926",chartRangeMin:r,chartRangeMax:s,tooltipFormat:i&&i[a]?d+" ("+i[a]+")":d}),c=!0})}var a=freeboard.getStyleString("values");freeboard.addStyle(".widget-big-text",a+"font-size:75px;"),freeboard.addStyle(".tw-display","width: 100%; height:100%; display:table; table-layout:fixed;"),freeboard.addStyle(".tw-tr","display:table-row;"),freeboard.addStyle(".tw-tg","display:table-row-group;"),freeboard.addStyle(".tw-tc","display:table-caption;"),freeboard.addStyle(".tw-td","display:table-cell;"),freeboard.addStyle(".tw-value",a+"overflow: hidden;display: inline-block;text-overflow: ellipsis;"),freeboard.addStyle(".tw-unit","display: inline-block;padding-left: 10px;padding-bottom: 1.1em;vertical-align: bottom;"),freeboard.addStyle(".tw-value-wrapper","position: relative;vertical-align: middle;height:100%;"),freeboard.addStyle(".tw-sparkline","height:20px;");var i=function(t){var e=t,a=$('<div class="tw-display"></div>'),i=$('<h2 class="section-title tw-title tw-td"></h2>'),o=$('<div class="tw-value"></div>'),r=$('<div class="tw-unit"></div>'),s=$('<div class="tw-sparkline tw-td"></div>');function l(){_.isUndefined(e.units)||""==e.units?o.css("max-width","100%"):o.css("max-width",a.innerWidth()-r.outerWidth(!0)+"px")}this.render=function(t){$(t).empty(),$(a).append($('<div class="tw-tr"></div>').append(i)).append($('<div class="tw-tr"></div>').append($('<div class="tw-value-wrapper tw-td"></div>').append(o).append(r))).append($('<div class="tw-tr"></div>').append(s)),$(t).append(a),l()},this.onSettingsChanged=function(t){e=t;var n=!_.isUndefined(t.title)&&""!=t.title,a=!_.isUndefined(t.units)&&""!=t.units;t.sparkline?s.attr("style",null):(delete s.data().values,s.empty(),s.hide()),n?(i.html(_.isUndefined(t.title)?"":t.title),i.attr("style",null)):(i.empty(),i.hide()),a?(r.html(_.isUndefined(t.units)?"":t.units),r.attr("style",null)):(r.empty(),r.hide());var d=30;"big"==t.size&&(d=75,t.sparkline&&(d=60)),o.css({"font-size":d+"px"}),l()},this.onSizeChanged=function(){l()},this.onCalculatedValueChanged=function(t,a){"value"==t&&(e.animate?function(t,e,n){var a=$(e).text();if(a!=t)if($.isNumeric(t)&&$.isNumeric(a)){var i=t.toString().split("."),o=0;i.length>1&&(o=i[1].length);var r=0;(i=a.toString().split(".")).length>1&&(r=i[1].length),jQuery({transitionValue:Number(a),precisionValue:r}).animate({transitionValue:Number(t),precisionValue:o},{duration:n,step:function(){$(e).text(this.transitionValue.toFixed(this.precisionValue))},done:function(){$(e).text(t)}})}else $(e).text(t)}(a,o,500):o.text(a),e.sparkline&&n(s,a))},this.onDispose=function(){},this.getHeight=function(){return"big"==e.size||e.sparkline?2:1},this.onSettingsChanged(t)};freeboard.loadWidgetPlugin({type_name:"text_widget",display_name:"Text",settings:[{name:"title",display_name:"Title",type:"text"},{name:"size",display_name:"Size",type:"option",options:[{name:"Regular",value:"regular"},{name:"Big",value:"big"}]},{name:"value",display_name:"Value",type:"calculated"},{name:"sparkline",display_name:"Include Sparkline",type:"boolean"},{name:"animate",display_name:"Animate Value Changes",type:"boolean",default_value:!0},{name:"units",display_name:"Units",type:"text",options:function(){return{lbs:"",kgs:"",psi:"",meters:"",feet:"",mm:"",degC:"",degF:""}}}],newInstance:function(t,e){e(new i(t))}});var o=0;freeboard.addStyle(".gauge-widget-wrapper","width: 100%;text-align: center;"),freeboard.addStyle(".gauge-widget","width:200px;height:160px;display:inline-block;");freeboard.loadWidgetPlugin({type_name:"gauge",display_name:"Gauge",settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated"},{name:"units",display_name:"Units",type:"text"},{name:"min_value",display_name:"Minimum",type:"text",default_value:0},{name:"max_value",display_name:"Maximum",type:"text",default_value:100}],newInstance:function(t,e){e(new function(t){var e,n="gauge-"+o++,a=$('<h2 class="section-title"></h2>'),i=$('<div class="gauge-widget" id="'+n+'"></div>'),r=!1,s=t;function l(){r&&(i.empty(),e=new JustGage({id:n,value:_.isUndefined(s.min_value)?0:s.min_value,min:_.isUndefined(s.min_value)?0:s.min_value,max:_.isUndefined(s.max_value)?0:s.max_value,label:s.units,showInnerShadow:!1,valueFontColor:"#d3d4d4"}))}this.render=function(t){r=!0,$(t).append(a).append($('<div class="gauge-widget-wrapper"></div>').append(i)),l()},this.onSettingsChanged=function(t){t.min_value!=s.min_value||t.max_value!=s.max_value||t.units!=s.units?(s=t,l()):s=t,a.html(t.title)},this.onCalculatedValueChanged=function(t,n){_.isUndefined(e)||e.refresh(Number(n))},this.onDispose=function(){},this.getHeight=function(){return 3},this.onSettingsChanged(t)}(t))}}),freeboard.addStyle(".sparkline","width:100%;height: 75px;");var r=function(t){var a=$('<h2 class="section-title"></h2>'),i=$('<div class="sparkline"></div>'),o=$("<div></div>"),r=t;this.render=function(t){$(t).append(a).append(i).append(o)},this.onSettingsChanged=function(t){r=t,a.html(_.isUndefined(t.title)?"":t.title),t.include_legend&&function(t,n){for(var a=$("<div class='sparkline-legend'></div>"),i=0;i<n.length;i++){var o=e[i%e.length],r=n[i];a.append("<div class='sparkline-legend-value'><span style='color:"+o+"'>&#9679;</span>"+r+"</div>")}t.empty().append(a),freeboard.addStyle(".sparkline-legend","margin:5px;"),freeboard.addStyle(".sparkline-legend-value","color:white; font:10px arial,san serif; float:left; overflow:hidden; width:50%;"),freeboard.addStyle(".sparkline-legend-value span","font-weight:bold; padding-right:5px;")}(o,t.legend.split(","))},this.onCalculatedValueChanged=function(t,e){r.legend?n(i,e,r.legend.split(",")):n(i,e)},this.onDispose=function(){},this.getHeight=function(){var t=0;if(r.include_legend&&r.legend){var e=r.legend.split(",").length;e>4?t=.5*Math.floor((e-1)/4):e&&(t=.5)}return 2+t},this.onSettingsChanged(t)};freeboard.loadWidgetPlugin({type_name:"sparkline",display_name:"Sparkline",settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated",multi_input:"true"},{name:"include_legend",display_name:"Include Legend",type:"boolean"},{name:"legend",display_name:"Legend",type:"text",description:"Comma-separated for multiple sparklines"}],newInstance:function(t,e){e(new r(t))}}),freeboard.addStyle("div.pointer-value","position:absolute;height:95px;margin: auto;top: 0px;bottom: 0px;width: 100%;text-align:center;");freeboard.loadWidgetPlugin({type_name:"pointer",display_name:"Pointer",settings:[{name:"direction",display_name:"Direction",type:"calculated",description:"In degrees"},{name:"value_text",display_name:"Value Text",type:"calculated"},{name:"units",display_name:"Units",type:"text"}],newInstance:function(t,e){e(new function(t){var e,n,a,i,o=$('<div class="widget-big-text"></div>'),r=$("<div></div>");this.render=function(t){a=$(t).width(),i=$(t).height();var s=Math.min(a,i)/2-6,l=(e=Raphael($(t).get()[0],a,i)).circle(a/2,i/2,s);l.attr("stroke","#FF9900"),l.attr("stroke-width",3),(n=e.path(function(t){if(!t||t.length<2)return[];var e=[];e.push(["m",t[0],t[1]]);for(var n=2;n<t.length;n+=2)e.push(["l",t[n],t[n+1]]);return e.push(["z"]),e}([a/2,i/2-s+3,15,20,-30,0]))).attr("stroke-width",0),n.attr("fill","#fff"),$(t).append($('<div class="pointer-value"></div>').append(o).append(r))},this.onSettingsChanged=function(t){r.html(t.units)},this.onCalculatedValueChanged=function(t,e){"direction"==t?_.isUndefined(n)||n.animate({transform:"r"+e+","+a/2+","+i/2},250,"bounce"):"value_text"==t&&o.html(e)},this.onDispose=function(){},this.getHeight=function(){return 4},this.onSettingsChanged(t)}(t))}});freeboard.loadWidgetPlugin({type_name:"picture",display_name:"Picture",fill_size:!0,settings:[{name:"src",display_name:"Image URL",type:"calculated"},{type:"number",display_name:"Refresh every",name:"refresh",suffix:"seconds",description:"Leave blank if the image doesn't need to be refreshed"}],newInstance:function(t,e){e(new function(t){var e,n,a;function i(){n&&(clearInterval(n),n=null)}function o(){if(e&&a){var t=a;$(e).css({"background-image":"url("+t+")"})}}this.render=function(t){$(t).css({width:"100%",height:"100%","background-size":"cover","background-position":"center"}),e=t},this.onSettingsChanged=function(t){i(),t.refresh&&t.refresh>0&&(n=setInterval(o,1e3*Number(t.refresh)))},this.onCalculatedValueChanged=function(t,e){"src"==t&&(a=e),o()},this.onDispose=function(){i()},this.getHeight=function(){return 4},this.onSettingsChanged(t)}(t))}}),freeboard.addStyle(".indicator-light","border-radius:50%;width:22px;height:22px;border:2px solid #3d3d3d;margin-top:5px;float:left;background-color:#222;margin-right:10px;"),freeboard.addStyle(".indicator-light.on","background-color:#FFC773;box-shadow: 0px 0px 15px #FF9900;border-color:#FDF1DF;"),freeboard.addStyle(".indicator-text","margin-top:10px;");freeboard.loadWidgetPlugin({type_name:"indicator",display_name:"Indicator Light",settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated"},{name:"on_text",display_name:"On Text",type:"calculated"},{name:"off_text",display_name:"Off Text",type:"calculated"}],newInstance:function(t,e){e(new function(t){var e,n,a=$('<h2 class="section-title"></h2>'),i=$('<div class="indicator-text"></div>'),o=$('<div class="indicator-light"></div>'),r=t,s=!1;function l(){o.toggleClass("on",s),s?i.text(_.isUndefined(e)?_.isUndefined(r.on_text)?"":r.on_text:e):i.text(_.isUndefined(n)?_.isUndefined(r.off_text)?"":r.off_text:n)}this.render=function(t){$(t).append(a).append(o).append(i)},this.onSettingsChanged=function(t){r=t,a.html(_.isUndefined(t.title)?"":t.title),l()},this.onCalculatedValueChanged=function(t,a){"value"==t&&(s=Boolean(a)),"on_text"==t&&(e=a),"off_text"==t&&(n=a),l()},this.onDispose=function(){},this.getHeight=function(){return 1},this.onSettingsChanged(t)}(t))}}),freeboard.addStyle(".gm-style-cc a","text-shadow:none;"),freeboard.addStyle(".html-widget","white-space:normal;width:100%;height:100%");freeboard.loadWidgetPlugin({type_name:"html",display_name:"Show computed HTML",fill_size:!0,settings:[{name:"html",display_name:"HTML",type:"calculated",description:"Can be literal HTML, or javascript that outputs HTML."},{name:"height",display_name:"Height Blocks",type:"number",default_value:4,description:"A height block is around 60 pixels"}],newInstance:function(t,e){e(new function(t){var e=$('<div class="html-widget"></div>'),n=t;this.render=function(t){$(t).append(e)},this.onSettingsChanged=function(t){n=t},this.onCalculatedValueChanged=function(t,n){"html"==t&&e.html(n)},this.onDispose=function(){},this.getHeight=function(){return Number(n.height)},this.onSettingsChanged(t)}(t))}})}(),function(){freeboard.loadDatasourcePlugin({type_name:"core_scratchpad_plugin",display_name:"Scratchpad Variables",description:"The data is just an empty space.  To set some data, use datasources['scratchpad']['SomeName'] as a data target.  It will be available to read in other widgets.  You can also set the default data using JSON.",settings:[{name:"data",display_name:"Default Data(as JSON or JS expression)",type:"calculated",default_value:"={}",options:function(){return{"={key: 'value'}":""}},description:"Must be a valid JS =expression that returns an object. Whatever it returns will be the default data.",required:!0},{name:"persist",display_name:"Persistance Mode",type:"option",default_value:"off",options:[{name:"Off",value:"off"},{name:"Board",value:"board"}],description:"off: no persistance,  board: changes are passed to the Default Data field and can be exported with the board.",required:!0},{name:"lock",display_name:"Lock data(read only)",type:"boolean",default_value:!1},{name:"",display_name:"",html:"Show current data",type:"button",onclick:function(t,e){freeboard.showDialog(JSON.stringify(e.data),"Debug data for: "+t+" (non-JSON not shown)","OK")},description:""},{name:"",display_name:"",html:"Show current data in JSON editor",type:"button",description:"",onclick:function(t,e){var n=[];freeboard.showDialog($('<div id="fb-global-json-editor">'),"Debug data for: "+t+" (non-JSON not shown)","OK","Cancel",function(){Object.assign(e.proxy,n[0].getValue()),n[0].destroy()},function(){n[0].destroy()});var a=new JSONEditor(document.getElementById("fb-global-json-editor"),{schema:{}});n.push(a),a.setValue(e.data)}}],newInstance:function(e,n,a){n(new t(e,a))}});var t=function(t,e){var n=this,a=t;n.handler={set:function(t,i,o){if(a.lock)throw new Error("Cannot change this. It is locked in the datasource settings");return t[i]=o,e(n.proxy),"board"==a.persist&&(a.data="="+JSON.stringify(t),freeboard.setDatasourceSettings(a.name,t)),!0}},n.data={},n.proxy=new Proxy(n.data,n.handler),n.onSettingsChanged=function(t){a=t,e(n.proxy)},n.onCalculatedSettingChanged=function(t,a){"data"==t&&(n.data=a,n.proxy=new Proxy(n.data,n.handler),e(n.proxy))},n.updateNow=function(){var t;t=n.proxy,e(t)},n.onDispose=function(){}}}(),function(){var t=0;freeboard.addStyle(".slider","border: 2px solid #3d3d3d;background-color: #222;margin: 10px;"),freeboard.addStyle(".slider-label","margin-left: 10px; margin-top: 10px; text-transform: capitalize;"),freeboard.addStyle(".myui-slider-handle","width: 1.5em !important; height: 1.5em !important; border-radius: 50%; top: -.4em !important; margin-left:-1.0em !important;"),freeboard.addStyle(".ui-slider-range","background: #F90;"),freeboard.loadWidgetPlugin({type_name:"slider_plugin",display_name:"Slider",description:"Interactive Slider Plugin with 2-way data binding.  Value is a list of 2 items, the value and the timestamp.",fill_size:!0,settings:[{name:"title",display_name:"Title",type:"text"},{name:"unit",display_name:"Unit of measure",type:"text"},{name:"min",display_name:"Min",type:"calculated",default_value:"0"},{name:"max",display_name:"Max",type:"calculated",default_value:"100"},{name:"step",display_name:"Step",type:"calculated",default_value:"1"},{name:"mode",display_name:"Mode",type:"option",options:[{name:"Real Time",value:"input"},{name:"When Released",value:"change"}]},{name:"target",display_name:"Data target when value changes. ",description:"Value pushed will be a value, timestamp pair.",type:"target"}],newInstance:function(t,n){n(new e(t))}});var e=function(e){var n=this;currentSettings=e,currentSettings.unit=currentSettings.unit||"";var a="slider-"+t++,i=$('<div class="slider-widget slider-label" id="__'+a+'"></div>'),o=$('<h2 class="section-title slider-label"></h2>'),r=$('<div id="value-'+a+'" style="display:inline-block; padding-left: 10px; font-weight:bold; color: #d3d4d4" ></div>'),s=$("<input/>",{type:"range",id:a}),l="#"+a,d="#value-"+a;_.isUndefined(currentSettings.value)||currentSettings.value;o.html(_.isUndefined(currentSettings.title)?"":currentSettings.title),n.min=_.isUndefined(currentSettings.min)?0:currentSettings.min,n.max=_.isUndefined(currentSettings.max)?100:currentSettings.max,n.step=_.isUndefined(currentSettings.step)?100:currentSettings.step,n.value=currentSettings.value||0;n.render=function(t){$(t).append(i),o.appendTo(i),$(o).append(r),s.appendTo(i),$(l).attr("min",n.min),$(l).attr("max",n.max),$(l).attr("step",n.step),$(l).css("width","95%"),$(l).on("input",function(t){$("#value-"+a).html(t.value)}),$(d).html(n.value+currentSettings.unit),$(l).on("change",function(t){n.dataTargets.target(parseFloat(t.target.value))}),$(l).on("input",function(t){n.value=t.target.value,$(d).html(t.target.value+currentSettings.unit),"change"!=currentSettings.mode&&n.dataTargets.target(parseFloat(t.target.value))}),$(l).removeClass("ui-widget-content")},n.getHeight=function(){return"big"==currentSettings.size?2:1},n.onSettingsChanged=function(t){currentSettings=t,o.html(_.isUndefined(t.title)?"":t.title),$(o).append(r),currentSettings.unit=currentSettings.unit||"",$(d).html(n.value+currentSettings.unit)},n.onCalculatedValueChanged=function(t,e){if("target"==t){n.value=e;var a=e;$(r).html(a+currentSettings.unit),a!=$(l).val()&&$(l).val(a)}"step"==t&&(n.step=e,$(l).attr("step",n.step)),"max"==t&&(e>n.min?(n.max=e,$(l).attr("max",e)):(currentSettings.max=n.max,freeboard.showDialog($("<div align='center'> Max value cannot be lower than Min value!</div>"),"Warning!","OK",null,function(){}))),"min"==t&&(e<n.max?(n.min=e,$(l).attr("min",e)):(currentSettings.min=n.min,freeboard.showDialog($("<div align='center'> Min value cannot be greater than Max value!</div>"),"Warning!","OK",null,function(){})))},n.onDispose=function(){}}}(),function(){var t=0;freeboard.loadWidgetPlugin({type_name:"switch_plugin",display_name:"Switch",description:"Interactive on-off switch",settings:[{name:"title",display_name:"Title",type:"text"},{name:"target",display_name:"Data Target",type:"target",description:"Bind state to this datasource"},{name:"on_text",display_name:"On Text",type:"text",default_value:"On"},{name:"off_text",display_name:"Off Text",type:"text",default_value:"Off"}],newInstance:function(t,n){n(new e(t))}}),freeboard.addStyle(".floating-box","display: inline-block; vertical-align: top; width: 78px; background-color: #222;margin-top: 10px; margin-right: 5px;"),freeboard.addStyle(".onoffswitch-title","font-size: 17px; line-height: 29px; width: 65%; height: 29px; padding-left: 10px;border: 1px solid #3d3d3d;"),freeboard.addStyle(".round","border-radius: 50%;");var e=function(e){var n=this,a="onoffswitch-"+t++,i=$('<div class="floating-box"></div>'),o=$('<div class="floating-box onoffswitch-title">'+e.title+"</div>"),r=$('<div class="onoffswitch"><label class="onoffswitch-label" for="'+a+'"><div class="onoffswitch-inner"><span class="on"></span><span class="off"></span></div><div class="onoffswitch-switch round"></div></label></div>');function s(){$("#"+a).prop("checked",n.isOn),console.log(r.find("span.on")),r.find("span.on").text(n.onText),r.find("span.off").text(n.offText)}r.prependTo(i),n.isOn=!1,this.render=function(t){$(t).append(i).append(o);$('<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="'+a+'">').prependTo(r).change(function(t){n.isOn=t.target.checked,n.dataTargets.target(n.isOn)})},this.onSettingsChanged=function(t){t,o.html(_.isUndefined(t.title)?"":t.title),console.log("isUndefined on_text: "+_.isUndefined(t.on_text)),n.onText=t.on_text,n.offText=t.off_text,s()},this.onCalculatedValueChanged=function(t,e){if(console.log(t,e),"target"==t){var a=e;n.isOn=Boolean(a)}s()},this.onDispose=function(){},this.getHeight=function(){return 1},this.onSettingsChanged(e)}}(),function(){var t=0;freeboard.addStyle(".textbox","border: 2px solid #3d3d3d;background-color: #222;margin: 10px;"),freeboard.addStyle(".textbox-label","margin-left: 10px; margin-top: 10px; text-transform: capitalize;"),freeboard.addStyle(".myui-textbox-handle","width: 1.5em !important; height: 1.5em !important; border-radius: 50%; top: -.4em !important; margin-left:-1.0em !important;"),freeboard.addStyle(".ui-textbox-range","background: #F90;"),freeboard.loadWidgetPlugin({type_name:"textbox_plugin",display_name:"Text Box",description:"Interactive Textbox Plugin with 2-way data binding.  Value is a list of 2 items, the value and the timestamp.",fill_size:!0,settings:[{name:"title",display_name:"Title",type:"text",default_value:""},{name:"tooltip",display_name:"Tooltip hint",type:"text",default_value:""},{name:"pattern",display_name:"Validation Regex",type:"text",default_value:".*"},{name:"placeholder",display_name:"Placeholder text",type:"calculated",default_value:""},{name:"mode",display_name:"Mode",type:"option",options:[{name:"Real Time",value:"input"},{name:"When element loses focus",value:"change"}]},{name:"target",display_name:"Data target when value changes. ",description:"Value pushed will be a value, timestamp pair.",type:"target"}],newInstance:function(t,n){n(new e(t))}});var e=function(e){var n=this;n.currentSettings=e;var a="textbox-"+t++,i=$('<div class="textbox-widget textbox-label" id="__'+a+'"></div>'),o=$('<h2 class="section-title textbox-label"></h2>'),r=$("<input/>",{type:"text",pattern:e.pattern,id:a,name:a}).css("width","90%"),s="#"+a,l="#value-"+a;o.html(n.currentSettings.title),n.value="";n.render=function(t){$(t).append(i),o.appendTo(i),r.appendTo(i),$(s).attr("placeholder",n.currentSettings.placeholder),$(s).attr("title",n.currentSettings.tooltip),$(s).attr("pattern",n.currentSettings.pattern),$(l).html(n.value+n.currentSettings.unit),$(s).on("change",function(t){n.dataTargets.target(t.target.value)}),$(s).on("input",function(t){n.value=t.target.value,$(l).html(t.target.value+n.currentSettings.unit),"change"!=n.currentSettings.mode&&(_.isUndefined(n.currentSettings.target)||n.dataTargets.target(t.target.value))}),$(s).removeClass("ui-widget-content")},n.getHeight=function(){return"big"==n.currentSettings.size?2:1},n.onSettingsChanged=function(t){n.currentSettings=t,o.html(_.isUndefined(t.title)?"":t.title),n.currentSettings.unit=n.currentSettings.unit||"",$(s).attr("pattern",t.pattern),$(s).attr("placeholder",t.placeholder),$(s).attr("tooltip",t.placeholder)},n.onCalculatedValueChanged=function(t,e){if("target"==t){n.value=e;var a=e;a!=$(s).val()&&$(s).val(a)}"placeholder"==t&&$(s).attr("placeholder",e)},n.onDispose=function(){}}}();