function DialogBox(e,t,n,a,i,o){var s=$('<div id="modal_overlay" style="display:none;"></div>'),r=$('<div class="modal"></div>');function l(){s.fadeOut(200,function(){$(this).remove()})}var d=$('<h2 class="title">'+t+"</h2>"),c=$("<header></header>");c.append(d),r.append(c),$("<section></section>").appendTo(r).append(e);var u=$("<footer></footer>").appendTo(r);n&&$('<span id="dialog-ok" class="text-button">'+n+"</span>").appendTo(u).click(function(){var e=!1;_.isFunction(i)&&(e=i()),e||l()}),a&&$('<span id="dialog-cancel" class="text-button">'+a+"</span>").appendTo(u).click(function(){_.isFunction(o)&&o(),l()}),s.append(r),$("body").append(s),setTimeout(function(){textFit(d)},10),s.fadeIn(200)}function FreeboardModel(e,t,n){var a=this;this.version=0,this.isEditing=ko.observable(!1),this.allow_edit=ko.observable(!1),this.allow_edit.subscribe(function(e){e?$("#main-header").show():$("#main-header").hide()}),this.header_image=ko.observable(),this.plugins=ko.observableArray(),this.datasources=ko.observableArray(),this.panes=ko.observableArray(),this.datasourceData={};var o={set:function(e,t,n){throw new Error("You cannot directly overwrite a datasource here. Try assigning to one of the properties of the source instead")}};a.protectedDataSourceData=new Proxy(a.datasourceData,o),this.processDatasourceUpdate=function(e,t){var n=e.name();a.datasourceData[n]=t,_.each(a.panes(),function(e){_.each(e.widgets(),function(e){e.processDatasourceUpdate(n)})})},this._datasourceTypes=ko.observable(),this.datasourceTypes=ko.computed({read:function(){a._datasourceTypes();var t=[];return _.each(e,function(e){var n=e.type_name,a=n;_.isUndefined(e.display_name)||(a=e.display_name),t.push({name:n,display_name:a})}),t}}),this._widgetTypes=ko.observable(),this.widgetTypes=ko.computed({read:function(){a._widgetTypes();var e=[];return _.each(t,function(t){var n=t.type_name,a=n;_.isUndefined(t.display_name)||(a=t.display_name),e.push({name:n,display_name:a})}),e}}),this.addPluginSource=function(e){e&&-1==a.plugins.indexOf(e)&&a.plugins.push(e)},this.globalSettings={},this.globalSettingsDefaults={theme:{}},Object.assign(this.globalSettings,this.globalSettingsDefaults),this.globalSettingsHandlers={},this.serialize=function(){var e=[];_.each(a.panes(),function(t){e.push(t.serialize())});var t=[];return _.each(a.datasources(),function(e){t.push(e.serialize())}),{version:1,header_image:a.header_image(),allow_edit:a.allow_edit(),plugins:a.plugins(),panes:e,datasources:t,columns:n.getUserColumns(),globalSettings:a.globalSettings}},this.setGlobalSettings=function(e){for(var t in Object.assign(a.globalSettings,e),a.globalSettingsHandlers)a.globalSettingsHandlers[t](a.globalSettings)},this.globalSettingsHandlers.css=function(e){for(i in e.theme){var t=e.theme[i];i.includes("-image")&&t&&(t="url("+t+")"),document.body.style.setProperty(i,t)}for(i in e.imageData=e.imageData||{},e.imageData){(t=e.imageData[i])&&(t="url("+t+")"),document.body.style.setProperty(i,t)}$("#board-logo").html(getComputedStyle(document.documentElement).getPropertyValue("--logo-text")),setTimeout(function(){n.processResize(!0)},30)},this.deserialize=async function(i,o){async function s(){n.setUserColumns(i.columns),_.isUndefined(i.allow_edit)?a.allow_edit(!0):a.allow_edit(i.allow_edit),a.version=i.version||0,a.header_image(i.header_image),_.each(i.datasources,async function(t){var n=new DatasourceModel(a,e);await Promise.resolve(n.deserialize(t)),a.addDatasource(n)});var s=_.sortBy(i.panes,function(e){return n.getPositionForScreenSize(e).row});for(var r in _.each(s,function(e){var n=new PaneModel(a,t);n.deserialize(e),a.panes.push(n)}),a.allow_edit()&&0==a.panes().length&&a.setEditing(!0),_.isFunction(o)&&await Promise.resolve(o()),a.globalSettings)delete a.globalSettings[r];Object.assign(a.globalSettings,a.globalSettingsDefaults),a.setGlobalSettings(i.globalSettings||{})}a.clearDashboard(),_.each(i.plugins,function(e){a.addPluginSource(e)}),_.isArray(i.plugins)&&i.plugins.length>0?head.js(i.plugins,async function(){await s()}):await s()},this.clearDashboard=function(){n.removeAllPanes(),_.each(a.datasources(),function(e){e.dispose()}),_.each(a.panes(),function(e){e.dispose()}),a.plugins.removeAll(),a.datasources.removeAll(),a.panes.removeAll()},this.loadDashboard=function(e,t){n.showLoadingIndicator(!0),a.deserialize(e,function(){n.showLoadingIndicator(!1),_.isFunction(t)&&t(),freeboard.emit("dashboard_loaded")})},this.loadDashboardFromLocalFile=function(){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var e=document.createElement("input");e.type="file",$(e).on("change",function(e){var t=e.target.files;if(t&&t.length>0){var n=t[0],i=new FileReader;i.addEventListener("load",function(e){var t=e.target,n=JSON.parse(t.result);a.loadDashboard(n),a.setEditing(!1)}),i.readAsText(n)}}),$(e).trigger("click")}else alert("Unable to load a file in this browser.")},this.downloadDashboardClicked=function(){var e=$(event.currentTarget),t=e.data("siblings-shown")||!1;t?$(event.currentTarget).siblings("label").fadeOut("slow"):$(event.currentTarget).siblings("label").fadeIn("slow"),e.data("siblings-shown",!t)},this.downloadDashboard=function(e,t){var n=$(t.currentTarget).data("pretty"),i=document.createElement("a");if(n)var o=new Blob([JSON.stringify(a.serialize(),null,"\t")],{type:"application/octet-stream"});else o=new Blob([JSON.stringify(a.serialize())],{type:"application/octet-stream"});document.body.appendChild(i),i.href=window.URL.createObjectURL(o),i.download="dashboard.json",i.target="_self",i.click()},this.addDatasource=function(e){a.datasources.push(e)},this.deleteDatasource=function(e){delete a.datasourceData[e.name()],e.dispose(),a.datasources.remove(e)},this.createPane=function(){var e=new PaneModel(a,t);a.addPane(e)},this.addGridColumnLeft=function(){n.addGridColumnLeft()},this.addGridColumnRight=function(){n.addGridColumnRight()},this.subGridColumnLeft=function(){n.subGridColumnLeft()},this.subGridColumnRight=function(){n.subGridColumnRight()},this.addPane=function(e){a.panes.push(e)},this.deletePane=function(e){e.dispose(),a.panes.remove(e)},this.deleteWidget=function(e){ko.utils.arrayForEach(a.panes(),function(t){t.widgets.remove(e)}),e.dispose()},this.setEditing=function(e,t){if(a.allow_edit()||!e){a.isEditing(e),_.isUndefined(t)&&(t=!0);var i=t?250:0,o=$("#admin-bar").outerHeight();e?($("#toggle-header-icon").addClass("icon-chevron-up").removeClass("icon-wrench"),$(".gridster .gs_w").css({cursor:"pointer"}),$("#main-header").animate({top:"0px"},i),$("#board-content").animate({top:o+20+"px"},i),$("#main-header").data().shown=!0,n.attachWidgetEditIcons($(".sub-section")),n.enableGrid()):($("#toggle-header-icon").addClass("icon-wrench").removeClass("icon-chevron-up"),$(".gridster .gs_w").css({cursor:"default"}),$("#main-header").animate({top:"-"+o+"px"},i),$("#board-content").animate({top:"20"},i),$("#main-header").data().shown=!1,$(".sub-section").unbind(),n.disableGrid()),n.showPaneEditIcons(e,t)}},this.toggleEditing=function(){var e=!a.isEditing();a.setEditing(e)}}function FreeboardUI(){var e,t=10,n=300,a=3,i=t+n+t,o=a,s=$('<div class="wrapperloading"><div class="loading up" ></div><div class="loading down"></div></div>');function r(t){var n=u(),a=function(){};t&&(a=function(t){var a=ko.dataFor(this),i=b(a);$(this).attr("data-sizex",Math.min(a.col_width(),n,e.cols)).attr("data-row",i.row).attr("data-col",i.col),a.processSizeChange()}),p(Math.min(n,o)),h(a),c();try{textFit($("#board-logo")),textFit($(".gs_w header h1")),textFit($("#datasources h2")),textFit($("#globalSettingsDialog h2")),textFit($(".jsgrid-header-cell:not(.jsgrid-control-field)"))}catch(e){console.log(e)}try{textFit($(".fullwidth-button"),{alignHoriz:!0,alignVert:!0})}catch(e){console.log(e)}}function l(t){p(e.cols+1)&&h(function(){var n,a=ko.dataFor(this),i=e.cols>1?e.cols-1:1,o=a.col[i],s=a.row[i];t?(leftPreviewCol=!0,n={row:s,col:o<e.cols?o+1:e.cols}):(rightPreviewCol=!0,n={row:s,col:o});$(this).attr("data-sizex",Math.min(a.col_width(),e.cols)).attr("data-row",n.row).attr("data-col",n.col)}),c(),o=e.cols}function d(t){p(e.cols-1)&&h(function(){var n,a=ko.dataFor(this),i=e.cols+1,o=a.col[i],s=a.row[i];t?n={row:s,col:o>1?o-1:1}:n={row:s,col:o<=e.cols?o:e.cols};$(this).attr("data-sizex",Math.min(a.col_width(),e.cols)).attr("data-row",n.row).attr("data-col",n.col)}),c(),o=e.cols}function c(){var t=$(".column-tool"),n=$("#board-content").width(),o=Math.floor(n/i);e.cols<=a?t.addClass("min"):t.removeClass("min"),e.cols>=o?t.addClass("max"):t.removeClass("max")}function u(){var e=$("#board-content").width();return Math.floor(e/i)}function p(t){(void 0===t||t<a)&&(t=a);var n=u();t>n&&(t=n);var o=i*t+t;return $(".responsive-column-width").css("max-width",o),t!==e.cols}function h(a){var i=e.$el;i.find("> li").unbind().removeData(),$(".responsive-column-width").css("width",""),e.generate_grid_and_stylesheet(),i.find("> li").each(a),e.init(),$(".responsive-column-width").css("width",e.cols*n+e.cols*t*2)}function g(t,n,a){var i=e.cols;_.isUndefined(n)||(t.row[i]=n),_.isUndefined(a)||(t.col[i]=a)}function f(e,t){_.isUndefined(t)&&(t=!0);var n=t?250:0;e?($(".pane-tools").fadeIn(n),$("#column-tools").fadeIn(n)):($(".pane-tools").fadeOut(n),$("#column-tools").fadeOut(n))}function m(e,t){t?$(e).find(".sub-section-tools").fadeIn(250):$(e).find(".sub-section-tools").fadeOut(250)}function b(t){var n=e.cols;if(_.isNumber(t.row)&&_.isNumber(t.col)){var a={};a[n]=t.row,t.row=a,(a={})[n]=t.col,t.col=a}var i=1,o=1e3;for(var s in t.col){if(s==n)return{row:t.row[s],col:t.col[s]};if(t.col[s]>n)i=n;else{var r=n-s;r<o&&(i=s,o=r)}}return i in t.col&&i in t.row?{row:t.row[i],col:t.col[i]}:{row:1,col:i}}return ko.bindingHandlers.grid={init:function(a,i,o,s,l){e=$(a).gridster({widget_margins:[t,t],widget_base_dimensions:[n,10],resize:{enabled:!1,axes:"x"}}).data("gridster"),r(!1),e.disable()}},{showLoadingIndicator:function(e){!function(e){e?s.fadeOut(0).appendTo("body").fadeIn(500):s.fadeOut(500).remove()}(e)},showPaneEditIcons:function(e,t){f(e,t)},attachWidgetEditIcons:function(e){!function(e){$(e).hover(function(){m(this,!0)},function(){m(this,!1)})}(e)},getPositionForScreenSize:function(e){return b(e)},processResize:function(e){r(e)},disableGrid:function(){e.disable()},enableGrid:function(){e.enable()},addPane:function(t,n,a){!function(t,n,a){var i=b(n),o=i.col,s=i.row,r=Number(n.width()),l=Number(n.getCalculatedHeight());e.add_widget(t,r,l,o,s),a&&f(!0),g(n,s,o),$(t).attrchange({trackValues:!0,callback:function(e){"data-row"==e.attributeName?g(n,Number(e.newValue),void 0):"data-col"==e.attributeName&&g(n,void 0,Number(e.newValue))}})}(t,n,a)},updatePane:function(t,n){!function(t,n){var a=n.getCalculatedHeight(),i=Number($(t).attr("data-sizey")),o=Number($(t).attr("data-sizex"));a==i&&n.col_width()==o||e.resize_widget($(t),n.col_width(),a,function(){e.set_dom_grid_height()})}(t,n)},removePane:function(t){e.remove_widget(t)},removeAllPanes:function(){e.remove_all_widgets()},addGridColumnLeft:function(){l(!0)},addGridColumnRight:function(){l(!1)},subGridColumnLeft:function(){d(!0)},subGridColumnRight:function(){d(!1)},getUserColumns:function(){return o},setUserColumns:function(e){!function(e){o=Math.max(a,e)}(e)}}}function PaneModel(e,t){var n=this;this.title=ko.observable(),this.width=ko.observable(1),this.row={},this.col={},this.col_width=ko.observable(1),this.title.subscribe(function(e){freeboard.ui.processResize()}),this.col_width.subscribe(function(e){n.processSizeChange()}),this.widgets=ko.observableArray(),this.addWidget=function(e){this.widgets.push(e)},this.widgetCanMoveUp=function(e){return n.widgets.indexOf(e)>=1},this.widgetCanMoveDown=function(e){return n.widgets.indexOf(e)<n.widgets().length-1},this.moveWidgetUp=function(e){if(n.widgetCanMoveUp(e)){var t=n.widgets.indexOf(e),a=n.widgets();n.widgets.splice(t-1,2,a[t],a[t-1])}},this.moveWidgetDown=function(e){if(n.widgetCanMoveDown(e)){var t=n.widgets.indexOf(e),a=n.widgets();n.widgets.splice(t,2,a[t+1],a[t])}},this.processSizeChange=function(){setTimeout(function(){_.each(n.widgets(),function(e){e.processSizeChange()})},1e3)},this.getCalculatedHeight=function(){var e=_.reduce(n.widgets(),function(e,t){return e+t.height()},0);e*=6,e+=3,e*=10;var t=getComputedStyle(document.documentElement).getPropertyValue("--pane-header-line-height");t=t.substring(0,t.length-2);var a=Math.ceil((e+parseFloat(t))/30);return Math.max(4,a)},this.serialize=function(){var e=[];return _.each(n.widgets(),function(t){e.push(t.serialize())}),{title:n.title(),width:n.width(),row:n.row,col:n.col,col_width:Number(n.col_width()),widgets:e}},this.deserialize=function(a){n.title(a.title),n.width(a.width),n.row=a.row,n.col=a.col,n.col_width(a.col_width||1),_.each(a.widgets,function(a){var i=new WidgetModel(e,t);i.deserialize(a),n.widgets.push(i)})},this.dispose=function(){_.each(n.widgets(),function(e){e.dispose()})}}function WidgetModel(e,t){var n=function(t){if(!t)return new Function("datasources","value","");var n="";t.includes("=")||t.includes("(")||(n="=value");var a=new Function("datasources","value",t+n);return function(t){return a(e.protectedDataSourceData,t)}};var a=this;this.datasourceRefreshNotifications={},this.calculatedSettingScripts={},this.dataTargets={},this.title=ko.observable(),this.fillSize=ko.observable(!1),this.type="",this.setType=async function(e,n){if(a.type!=e&&(a.type=e,_.isUndefined(a.widgetInstance)||(_.isFunction(a.widgetInstance.onDispose)&&a.widgetInstance.onDispose(),a.widgetInstance=void 0),await a.updateCalculatedSettings(),e in t&&_.isFunction(t[e].newInstance))){var i=t[e];async function o(){await i.newInstance(a.calculatedSettings,function(e){a.fillSize(!0===i.fill_size),a.widgetInstance=e,a.widgetInstance.dataTargets=a.dataTargets,a.widgetInstance.processCalculatedSetting=a.processCalculatedSetting,a.shouldRender(!0),a._heightUpdate.valueHasMutated()})}i.external_scripts?head.js(i.external_scripts.slice(0),o):o()}},this.settings={},this.calculatedSettings={},this.setSettings=async function(e){if(this.settings=e,Object.assign(this.calculatedSettings,this.settings),await a.updateCalculatedSettings(),!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.onSettingsChanged))try{await a.widgetInstance.onSettingsChanged(this.settings)}catch(e){throw freeboard.showDialog($("<pre>").text(String(e)),"Error changing settings","OK"),e}a._heightUpdate.valueHasMutated()},this.processDatasourceUpdate=function(e){var t=a.datasourceRefreshNotifications[e];_.isArray(t)&&_.each(t,function(e){a.processCalculatedSetting(e)})},this.callValueFunction=function(t){return t.call(void 0,e.datasourceData)},this.processSizeChange=function(){!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.onSizeChanged)&&a.widgetInstance.onSizeChanged()},this.processCalculatedSetting=async function(e,t){if(_.isFunction(a.calculatedSettingScripts[e])){var n=void 0;try{n=a.callValueFunction(a.calculatedSettingScripts[e])}catch(o){var i=a.settings[e];o instanceof ReferenceError&&/^\w+$/.test(i)&&(n=i),t&&(freeboard.showDialog(o,"Error with: "+e,"OK"),freeboard.playSound("error"))}var o=await n;a.calculatedSettings[e]=o,await async function(t){if(!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.onCalculatedValueChanged)&&!_.isUndefined(t))try{await a.widgetInstance.onCalculatedValueChanged(e,t)}catch(e){console.log(e.toString())}}(o)}},this.updateCalculatedSettings=async function(){if(a.datasourceRefreshNotifications={},a.calculatedSettingScripts={},a.type){var e=t[a.type].settings,o=new RegExp("=\\s*datasources.([\\w_-]+)|datasources\\[['\"]([^'\"]+)","g"),s=a.settings;for(var r in e){var l=e[r];if("calculated"==l.type||"target"==l.type){var d=s[l.name];if(_.isUndefined(d))a.dataTargets[l.name]=function(e){};else{var c,u=0,p=0;if(_.isArray(d)){p=1;var h=[];for(i in d)"="==i[0]?h.push(i.substring(1)):"target"==l.type?h.push(i):h.push(JSON.stringify(i));d="["+h.join(",")+"]"}if(d)if("="==d[0]||"target"==l.type||p){"="==d[0]&&(d=d.substring(1));var g,f=d;(d.match(/;/g)||[]).length<=1&&-1==d.indexOf("return")&&(f="return "+d);try{g=new Function("datasources",f)}catch(e){console.log(" arg "+f+"\nlooks like a function but won't compile, treating as text"),u=1}}else u=1;else g=new Function("datasources","return undefined;");if(u){var m=s[l.name].replace(/"/g,'\\"').replace(/[\r\n]/g," \\\n");g=new Function("datasources",'return "'+m+'";')}if(a.calculatedSettingScripts[l.name]=g,"target"==l.type)try{a.dataTargets[l.name]=n(d)}catch(e){console.log("Bad data target: "+d),console.log(e),a.dataTargets[l.name]=function(e){}}for(await a.processCalculatedSetting(l.name,"calculated"==l.type);c=o.exec(d);){var b=c[1]||c[2],v=a.datasourceRefreshNotifications[b];_.isUndefined(v)&&(v=[],a.datasourceRefreshNotifications[b]=v),-1==_.indexOf(v,l.name)&&v.push(l.name)}}}}}},this._heightUpdate=ko.observable(),this.height=ko.computed({read:function(){return a._heightUpdate(),!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.getHeight)?a.widgetInstance.getHeight():1}}),this.shouldRender=ko.observable(!1),this.render=async function(e){a.shouldRender(!1),!_.isUndefined(a.widgetInstance)&&_.isFunction(a.widgetInstance.render)&&(a.widgetInstance.render(e),await a.updateCalculatedSettings())},this.dispose=function(){},this.serialize=function(){return{title:a.title(),type:a.type,settings:a.settings}},this.deserialize=async function(e){a.title(e.title),await a.setSettings(e.settings),await a.setType(e.type)}}freeboardTemplates={blank:{version:1,allow_edit:!0,plugins:[],panes:[],datasources:[],columns:3,globalSettings:{theme:{}}},example:{version:1,allow_edit:!0,plugins:[],panes:[{title:"HTML Template rendering",width:1,row:{3:1},col:{3:2},col_width:2,widgets:[{type:"html-template",settings:{html:'<p><span style="font-size: 1em; white-space: pre-wrap; background-color: var(--box-bg-color); color: var(--fg-color); font-family: Stencil;">The text the user entered is</span>: <span style="font-family: Chalkboard;">{{txt}}</span></p>',data:'={txt: datasources["vars"]["txt"]}',background:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:1,toolbar:!0}},{type:"textbox_plugin",settings:{title:"Enter Some Text",tooltip:"",pattern:".*",placeholder:"",mode:"input",target:'datasources["vars"].txt'}}]},{title:"Switch and LED with SFX",width:1,row:{3:1},col:{3:1},col_width:1,widgets:[{type:"switch_plugin",settings:{title:"A switch",target:'datasources["vars"].sw',on_text:"On",off_text:"Off",sound:"low-click"}},{type:"indicator",settings:{title:"An indicator light",value:'=datasources["vars"]["sw"]'}}]},{title:"Sum",width:1,row:{3:7},col:{3:1},col_width:1,widgets:[{type:"gauge",settings:{title:"A+B",heading:"Sum",style:{pointerCircleInner:"rgb(57,43,21)",pointerCircleInnerEnd:"rgb(57,43,21)",pointerCircleOuter:"rgb(87,63,41)",pointerCircleOuterEnd:"rgb(57,43,21)",pointerShadowTop:"#000000",pointerShadowBottom:"#000000",pointerColor:"#000000",pointerTipColor:"#002000",fgColor:"rgb(57,43,21)",borderInner:"rgb(77,68,56)",borderInnerEnd:"rgb(59,44,36)",borderMiddle:"rgb(202,192,155)",borderMiddleEnd:"rgb(163,145,96)",borderOuter:"rgb(102,90,67)",borderOuterEnd:"rgb(57,41,34)",borderInnerWidth:2,borderMiddleWidth:3,borderOuterWidth:2,borderShadow:"#000000",plateColor:"rgb(204,198,190)",plateColorEnd:"rgb(195,190,180)",fontTitleSize:32,fontValueSize:40,size:4},value:'=datasources["vars"]["a"]+datasources["vars"]["b"]',min_value:0,max_value:"200",tick_interval:"25",minor_ticks:5,digits:4}},{type:"slider_plugin",settings:{title:"Input B",unit:"",min:"0",max:"100",step:"1",default:"0",mode:"input",target:'datasources["vars"]["a"]'}},{type:"slider_plugin",settings:{title:"Input A",unit:"",min:"0",max:"100",step:"1",default:"0",mode:"input",target:'datasources["vars"]["b"]'}}]},{width:1,row:{3:7},col:{3:2},col_width:1,widgets:[{type:"text_widget",settings:{title:"Count",size:"regular",value:'=datasources["vars"].btn',animate:!1}},{type:"button_plugin",settings:{html:"<i>Button</i>",tooltip:"",target:'datasources["vars"]["btn"]',sound:"",height:30}}]}],datasources:[{name:"vars",type:"core_scratchpad_plugin",settings:{data:"={}",persist:"off",lock:!1}}],columns:3,globalSettings:{theme:{},imageData:{}}}},DatasourceModel=function(e,t){var n=this;function a(){_.isUndefined(n.datasourceInstance)||(_.isFunction(n.datasourceInstance.onDispose)&&n.datasourceInstance.onDispose(),n.datasourceInstance=void 0)}this.name=ko.observable(),this.latestData=ko.observable(),this.settings={},this.setSettings=async function(e){if(n.settings=e,!_.isUndefined(n.datasourceInstance)&&_.isFunction(n.datasourceInstance.onSettingsChanged))try{await n.datasourceInstance.onSettingsChanged(e)}catch(e){throw freeboard.showDialog($("<pre>").text(String(e)),"Error changing settings","OK"),e}},this.updateCallback=function(t){e.processDatasourceUpdate(n,t),n.latestData(t);var a=new Date;n.last_updated(a.toLocaleTimeString())},this.type="",this.setType=async function(e){if(n.type!=e&&(n.type=e,a(),e in t&&_.isFunction(t[e].newInstance))){var i=t[e];async function o(){await i.newInstance(n.settings,function(e){n.datasourceInstance=e,e.updateNow()},n.updateCallback)}i.external_scripts?head.js(i.external_scripts.slice(0),o):await o()}},this.last_updated=ko.observable("never"),this.last_error=ko.observable(),this.serialize=function(){return{name:n.name(),type:n.type,settings:n.settings}},this.deserialize=async function(e){await n.setSettings(e.settings),n.name(e.name),await n.setType(e.type)},this.getDataRepresentation=function(e){return new Function("data","return "+e+";").call(void 0,n.latestData())},this.updateNow=function(){!_.isUndefined(n.datasourceInstance)&&_.isFunction(n.datasourceInstance.updateNow)&&n.datasourceInstance.updateNow()},this.dispose=function(){a()}},DeveloperConsole=function(e){return{showDeveloperConsole:function(){!function(){var t=[],n=$("<div></div>"),a=$('<div class="table-operation text-button">ADD</div>'),i=$('<table class="table table-condensed sub-table"></table>');i.append($('<thead style=""><tr><th>Plugin Script URL</th></tr></thead>'));var o=$("<tbody></tbody>");function s(e){var n=$("<tr></tr>"),a=$('<ul class="board-toolbar"></ul>'),i=$('<input class="table-row-value" style="width:100%;" type="text">'),s=$('<li><i class="icon-trash icon-white"></i></li>').click(function(e){t=_.without(t,i),n.remove()});t.push(i),e&&i.val(e),a.append(s),o.append(n.append($("<td></td>").append(i)).append($('<td class="table-row-operation">').append(a)))}i.append(o),n.append($("<p>Here you can add references to other scripts to load datasource or widget plugins.</p>")).append(i).append(a).append('<p>To learn how to build plugins for freeboard, please visit <a target="_blank" href="http://freeboard.github.io/freeboard/docs/plugin_example.html">http://freeboard.github.io/freeboard/docs/plugin_example.html</a></p>'),_.each(e.plugins(),function(e){s(e)}),a.click(function(e){s()}),new DialogBox(n,"Developer Console","OK",null,function(){_.each(e.plugins(),function(e){$('script[src^="'+e+'"]').remove()}),e.plugins.removeAll(),_.each(t,function(t){var n=t.val();n&&n.length>0&&(e.addPluginSource(n),head.js(n+"?"+Date.now()))})})}()}}},JSEditor=function(){function e(e){e}return{displayJSEditor:function(e,t){!function(e,t){var n='// Example: Convert temp from C to F and truncate to 2 decimal places.\n// return (datasources["MyDatasource"].sensor.tempInF * 1.8 + 32).toFixed(2);';e||(e=n);var a=$('<div class="code-window"></div>'),i=$('<div class="code-mirror-wrapper"></div>'),o=$('<div class="code-window-footer"></div>'),s=$('<div class="code-window-header cm-s-ambiance">This javascript will be re-evaluated any time a datasource referenced here is updated, and the value you <code><span class="cm-keyword">return</span></code> will be displayed in the widget. You can assume this javascript is wrapped in a function of the form <code><span class="cm-keyword">function</span>(<span class="cm-def">datasources</span>)</code> where datasources is a collection of javascript objects (keyed by their name) corresponding to the most current data in a datasource.</div>');a.append([s,i,o]),$("body").append(a);var r=CodeMirror(i.get(0),{value:e,mode:"javascript",theme:"ambiance",indentUnit:4,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0}),l=$('<span id="dialog-cancel" class="text-button">Close</span>').click(function(){if(t){var e=r.getValue();e===n&&(e=""),t(e),a.remove()}});o.append(l)}(e,t)},setAssetRoot:function(t){e(t)}}},PluginEditor=function(e,t){function n(e,t){var n=$('<div class="validation-error"></div>').html(t);$("#setting-value-container-"+e).append(n)}function a(n,a,i,o,s,r){var l=$("<textarea></textarea>");i.multi_input?l.change(function(){var e=[];$(n).find("textarea").each(function(){var t=$(this).val();t&&(e=e.concat(t))}),a.settings[i.name]=e}):l.change(function(){a.settings[i.name]=$(this).val()}),o&&l.val(o),t.createValueEditor(l);var d=$('<ul class="board-toolbar datasource-input-suffix"></ul>'),c=$('<div class="calculated-setting-row"></div>');if(c.append(l).append(d),r)var u=$('<li><i class="icon-plus icon-white"></i><label>DATATARGET</label></li>').mousedown(function(e){e.preventDefault(),$(l).is(":focus")?$(l).insertAtCaret('datasources["').trigger("freeboard-eval"):$(l).val("").focus().insertAtCaret('datasources["').trigger("freeboard-eval")});else u=$('<li><i class="icon-plus icon-white"></i><label>DATASOURCE</label></li>').mousedown(function(e){e.preventDefault(),0==$(l).val().length&&$(l).insertAtCaret("="),$(l).insertAtCaret('datasources["').trigger("freeboard-eval")});if(d.append(u),!r){var p=$('<li><i class="icon-fullscreen icon-white"></i><label>.JS EDITOR</label></li>').mousedown(function(t){t.preventDefault(),e.displayJSEditor(l.val(),function(e){l.val(e),l.change()})});d.append(p)}if(s){var h=$('<li class="remove-setting-row"><i class="icon-minus icon-white"></i><label></label></li>').mousedown(function(e){e.preventDefault(),c.remove(),$(n).find("textarea:first").change()});d.prepend(h)}$(n).append(c)}function i(e,t,i,o,s){var r,l={type:i,settings:{}};function d(e,t,n){var a=$('<div id="setting-row-'+e+'" class="form-row"></div>').appendTo(c);return a.append('<div class="form-label"><label class="control-label">'+t+"</label></div>"),$('<div id="setting-value-container-'+e+'" class="form-value"></div>').appendTo(a)}var c=$("<div></div>"),u=$('<div id="plugin-description"></div>').hide();c.append(u);var p=[];function h(e,t,n){_.each(e,function(e){!_.isUndefined(e.default_value)&&_.isUndefined(o[e.name])&&(o[e.name]=e.default_value);var i=e.name;_.isUndefined(e.display_name)||(i=e.display_name);var s=d(e.name,i);switch(e.type){case"array":{var r=$('<div class="form-table-value-subtable"></div>').appendTo(s),c=$('<table class="table table-condensed sub-table"></table>').appendTo(r),u=$("<thead></thead>").hide().appendTo(c),h=$("<tr></tr>").appendTo(u),g=$("<tbody></tbody>").appendTo(c),f=[];function m(){l.settings[e.name].length>0?u.show():u.hide()}function b(t){var n=$("<tr></tr>").appendTo(g),a={};_.isArray(l.settings[e.name])||(l.settings[e.name]=[]),l.settings[e.name].push(a),_.each(e.settings,function(i){var r=$("<td></td>").appendTo(n),l="";if(_.isUndefined(t[i.name])||(l=t[i.name]),a[i.name]=l,"option"==i.type){var d=$("<select></select>").appendTo($('<div class="styled-select"></div>').appendTo(r)).change(function(){a[i.name]=$(this).val()});_.each(i.options,function(e){var t,n;_.isObject(e)?(t=e.name,n=e.value):t=e,_.isUndefined(n)&&(n=t),_.isUndefined(x)&&(x=n),$("<option></option>").text(t).attr("value",n).appendTo(d)}),d.val(o[l])}else if("color"==i.type){var c=$("<div>EDIT</div>").attr("id",i.name+"-picker").appendTo(s),u=document.querySelector("#"+i.name+"-picker"),p=l||"black";c.css({color:p});var h=new Picker({parent:u,color:p});a[i.name]=l||"rgb(0,0,0)",h.onChange=function(e){a[i.name]=e.rgbastring,e.css({color:e.rgbastring})}}else $('<input class="table-row-value" type="text">').appendTo(r).val(l).attr("list",e.name+i.name+"ac").change(function(){a[i.name]=$(this).val()})}),n.append($('<td class="table-row-operation"></td>').append($('<ul class="board-toolbar"></ul>').append($("<li></li>").append($('<i class="icon-trash icon-white"></i>').click(function(){var t=l.settings[e.name].indexOf(a);-1!=t&&(l.settings[e.name].splice(t,1),n.remove(),m())}))))),r.scrollTop(r[0].scrollHeight),m()}_.each(e.settings,function(t){var n=t.name;_.isUndefined(t.display_name)||(n=t.display_name),$("<th>"+n+"</th>").appendTo(h),["text","datasource","target"].indexOf(t.type)>-1&&t.options&&($("<datalist></datalist>").attr("id",e.name+t.name+"ac").appendTo(h),$.each(t.options(),function(n,a){$("#"+e.name+t.name+"ac").append($("<option>").attr("value",n).text(a))}))}),e.name in o&&(f=o[e.name]),$('<div class="table-operation text-button">ADD</div>').appendTo(s).click(function(){var t={};_.each(e.settings,function(e){t[e.name]=""}),b(t)}),_.each(f,function(e,t){b(e)});break}case"html-wysywig":$.trumbowyg.svgPath=!1,$.trumbowyg.hideButtonTexts=!0,l.settings[e.name]=o[e.name];$("<div><label>"+e.name+'</label> <br> <textarea id="'+e.name+'-trumbo"></textarea></div>').appendTo(s);var v=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd"];$("#"+e.name+"-trumbo").trumbowyg({btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["foreColor","backColor"],["link"],["base64"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"],["fontsize","fontfamily","preformatted"],["emoji","table","specialChars"]],plugins:{colors:{displayAsList:!0,foreColorList:v,backColorList:v},fontfamily:{fontList:[{name:"Seriff",family:"FBSerif"},{name:"Color Emoji",family:"NotoColorEmoji"},{name:"Sans",family:"FBSans"},{name:"Monospace",family:"FBMono"},{name:"Cursive",family:"FBCursive"},{name:"Pandora",family:"Pandora"},{name:"Chalkboard",family:"Chalkboard"},{name:"Handwriting",family:"Handwriting"},{name:"Rough Script",family:"RoughScript"},{name:"Chancery",family:"Chancery"},{name:"Comic",family:"FBComic"},{name:"Blackletter",family:"Blackletter"},{name:"Stencil",family:"Stencil"},{name:"Pixel",family:"Pixel"},{name:"B612",family:"B612"},{name:"DIN",family:"DIN"},{name:"Penguin Attack",family:"PenguinAttack"},{name:"DSEG7",family:"DSEG7"},{name:"DSEG14",family:"DSEG14"}]}}}),$("#"+e.name+"-trumbo").on("tbwchange",function(t){l.settings[e.name]=$("#"+e.name+"-trumbo").trumbowyg("html")}),$("#"+e.name+"-trumbo").on("tbwblur",function(t){l.settings[e.name]=$("#"+e.name+"-trumbo").trumbowyg("html")}),e.name in o&&$("#"+e.name+"-trumbo").trumbowyg("html",o[e.name]),p.push($("#editor").trumbowyg);break;case"boolean":l.settings[e.name]=o[e.name];var w=$('<div class="onoffswitch"><label class="onoffswitch-label" for="'+e.name+'-onoff"><div class="onoffswitch-inner"><span class="on">YES</span><span class="off">NO</span></div><div class="onoffswitch-switch"></div></label></div>').appendTo(s),y=$('<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="'+e.name+'-onoff">').prependTo(w).change(function(){l.settings[e.name]=this.checked});e.name in o&&y.prop("checked",o[e.name]);break;case"json":l.settings[e.name]=o[e.name];y=$("<button>EDIT</button>").appendTo(s).on("click",function(){var t=[];freeboard.showDialog($('<div id="fb-global-json-editor">'),e,name,"OK","Cancel",function(){l.settings[e.name]=t[0].getValue(),t[0].destroy()},function(){t[0].destroy()});var n=new JSONEditor(document.getElementById("fb-global-json-editor"),{schema:e.schema});t.push(n);try{n.setValue(l.settings[e.name]||{})}catch(e){console.log(e)}});break;case"button":y=$("<button></button>").appendTo($('<div class="styled-select"></div>').appendTo(s)).html(e.html).on("click",function(){e.onclick(o,freeboard.getDatasourceInstance(o.name))});break;case"option":var x=o[e.name];y=$("<select></select>").appendTo($('<div class="styled-select"></div>').appendTo(s)).change(function(){l.settings[e.name]=$(this).val()});_.each(e.options,function(e){var t,n;_.isObject(e)?(t=e.name,n=e.value):t=e,_.isUndefined(n)&&(n=t),_.isUndefined(x)&&(x=n),$("<option></option>").text(t).attr("value",n).appendTo(y)}),l.settings[e.name]=x,e.name in o&&y.val(o[e.name]);break;default:if(l.settings[e.name]=o[e.name],"calculated"==e.type||"target"==e.type){var S="target"==e.type;if(e.name in o){var k=o[e.name];if(e.multi_input&&_.isArray(k))for(var C=!1,T=0;T<k.length;T++)a(s,l,e,k[T],C,S),C=!0;else a(s,l,e,k,!1,S)}else a(s,l,e,null,!1,S);if(e.multi_input){var D=$('<ul class="board-toolbar"><li class="add-setting-row"><i class="icon-plus icon-white"></i><label>ADD</label></li></ul>').mousedown(function(t){t.preventDefault(),a(s,l,e,null,!0,S)});$(s).siblings(".form-label").append(D)}}else{if("name"==e.name)var I="[a-zA-Z][a-zA-Z0-9_]+";else I=null;var E=e.regex;_.isUndefined(e.regex)&&(E=I),e.options&&($("<datalist></datalist>").attr("id",e.name+"ac").appendTo(s),$.each(e.options(),function(t,n){$("#"+e.name+"ac").append($("<option>").attr("value",t).text(n||t))}));y=$('<input type="text">').appendTo(s).attr("pattern",E).attr("list",e.name+"ac").change(function(){"number"==e.type?l.settings[e.name]=Number($(this).val()):l.settings[e.name]=$(this).val()});if("integer"==e.type&&y.attr("type","number"),e.name in o&&y.val(o[e.name]),t&&e.typeahead_data_field&&y.addClass("typeahead_data_field-"+e.typeahead_data_field),t&&e.typeahead_field){var F=[];y.keyup(function(e){e.which>=65&&e.which<=91&&y.trigger("change")}),$(y).autocomplete({source:F,select:function(e,t){y.val(t.item.value),y.trigger("change")}}),y.change(function(a){var i=y.val(),o=_.template(t)({input:i});$.get(o,function(t){if(n&&(t=t[n]),t=_.select(t,function(t){return t[e.typeahead_field][0]==i[0]}),F=_.map(t,function(t){return t[e.typeahead_field]}),$(y).autocomplete("option","source",F),1==t.length)for(var a in t=t[0])if(t.hasOwnProperty(a)){var o=$(_.template("input.typeahead_data_field-<%= field %>")({field:a}));o&&(o.val(t[a]),o.val()!=y.val()&&o.trigger("change"))}})})}}}_.isUndefined(e.suffix)||s.append($('<div class="input-suffix">'+e.suffix+"</div>")),_.isUndefined(e.description)||s.append($('<div class="setting-description">'+e.description+"</div>"))})}for(var g of(new DialogBox(c,e,"Save","Cancel",function(){$(".validation-error").remove();for(var e=0;e<r.settings.length;e++){var t=r.settings[e];if(t.required&&(_.isUndefined(l.settings[t.name])||""==l.settings[t.name]))return n(t.name,"This is required."),!0;if("integer"==t.type&&l.settings[t.name]%1!=0)return n(t.name,"Must be a whole number."),!0;if("number"==t.type&&(a=l.settings[t.name],isNaN(parseFloat(a))||!isFinite(a)))return n(t.name,"Must be a number."),!0}var a;_.isFunction(s)&&s(l)}),p))g("destroy");var f,m=_.keys(t);if(m.length>1){var b=d("plugin-types","Type");(f=$("<select></select>").appendTo($('<div class="styled-select"></div>').appendTo(b))).append($("<option>Select a type...</option>").attr("value","undefined")),_.each(t,function(e){f.append($("<option></option>").text(e.display_name).attr("value",e.type_name))}),f.change(function(){l.type=$(this).val(),l.settings={},$("#setting-row-instance-name").length?$("#setting-row-instance-name").nextAll().remove():$("#setting-row-plugin-types").nextAll().remove(),r=t[f.val()],_.isUndefined(r)?($("#setting-row-instance-name").hide(),$("#dialog-ok").hide()):($("#setting-row-instance-name").show(),r.description&&r.description.length>0?u.html(r.description).show():u.hide(),$("#dialog-ok").show(),h(r.settings,r.typeahead_source,r.typeahead_data_segment))})}else 1==m.length&&(r=t[m[0]],l.type=r.type_name,l.settings={},h(r.settings));f&&(_.isUndefined(i)?($("#setting-row-instance-name").hide(),$("#dialog-ok").hide()):($("#dialog-ok").show(),f.val(i).trigger("change")))}return{createPluginEditor:function(e,t,n,a,o,s){i(e,t,n,a,o)}}},ValueEditor=function(e){var t=new RegExp('.*datasources\\["([^"]*)("\\])?(.*)$'),n=null,a=0,i=[],o=null,s={ANY:"any",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean"};function r(e,t){return!(!_.isArray(e)&&!_.isObject(e))||l(e,t)}function l(e,t){switch(t){case s.ANY:return!0;case s.ARRAY:return _.isArray(e);case s.OBJECT:return _.isObject(e);case s.STRING:return _.isString(e);case s.NUMBER:return _.isNumber(e);case s.BOOLEAN:return _.isBoolean(e)}}function d(e,t){$(e).parent().find(".validation-error").remove(),l(o,t)||$(e).parent().append("<div class='validation-error'>This field expects an expression that evaluates to type "+t+".</div>")}function c(s,l){var c=$(s).val().substring(0,$(s).getCaretPosition());if(function(e,n,a,s){var l=t.exec(e),d=[];if(l)if(""==l[1]){var c="";""==e&&(c="="),_.each(n,function(e){d.push({value:c+e.name(),entity:void 0,precede_char:"",follow_char:'"]'})})}else if(""!=l[1]&&_.isUndefined(l[2])){var u=l[1];_.each(n,function(e){var t=e.name();t!=u&&0==t.indexOf(u)&&d.push({value:t,entity:void 0,precede_char:"",follow_char:'"]'})})}else{var p=_.find(n,function(e){return e.name()===l[1]});if(!_.isUndefined(p)){var h="data",g="";if(!_.isUndefined(l[2])){var f=l[3].lastIndexOf("]")+1;h+=l[3].substring(0,f),g=(g=(g=l[3].substring(f,l[3].length)).replace(/^[\[\"]*/,"")).replace(/[\"\]]*$/,"")}var m=p.getDataRepresentation(h);if(o=m,_.isArray(m)){for(var b=0;b<m.length;b++)if(0==b.toString().indexOf(g)){var v=m[b];r(v,a)&&d.push({value:b,entity:v,precede_char:"[",follow_char:"]",preview:v.toString()})}}else _.isObject(m)&&_.each(m,function(e,t){0==t.indexOf(g)&&r(e,a)&&d.push({value:t,entity:e,precede_char:'["',follow_char:'"]'})})}}i=d}(c=c.replace(String.fromCharCode(160)," "),e.datasources(),l),i.length>0){n||(n=$('<ul id="value-selector" class="value-dropdown"></ul>').insertAfter(s).width($(s).outerWidth()-2).css("left",$(s).position().left).css("top",$(s).position().top+$(s).outerHeight()-1)),n.empty(),n.scrollTop(0);var u=!0;a=0,_.each(i,function(e,t){var i=function(e,t,i,s){var r=i.value;i.preview&&(r=r+"<span class='preview'>"+i.preview+"</span>");return $("<li>"+r+"</li>").appendTo(n).mouseenter(function(){$(this).trigger("freeboard-select")}).mousedown(function(e){$(this).trigger("freeboard-insertValue"),e.preventDefault()}).data("freeboard-optionIndex",s).data("freeboard-optionValue",i.value).bind("freeboard-insertValue",function(){var t=i.value;t=i.precede_char+t+i.follow_char,$(e).insertAtCaret(t),o=i.entity,$(e).triggerHandler("mouseup")}).bind("freeboard-select",function(){$(this).parent().find("li.selected").removeClass("selected"),$(this).addClass("selected"),a=$(this).data("freeboard-optionIndex")})}(s,0,e,t);u&&($(i).addClass("selected"),u=!1)})}else d(s,l),$(s).next("ul#value-selector").remove(),n=null,a=-1}function u(e,t){$(e).addClass("calculated-value-input").bind("keyup mouseup freeboard-eval",function(a){!n||"keyup"!=a.type||38!=a.keyCode&&40!=a.keyCode&&13!=a.keyCode?c(e,t):a.preventDefault()}).focus(function(){$(e).css({"z-index":3001}),function(e){var t=($(e).val().match(/\n/g)||[]).length,n=Math.min(200,20*(t+1));$(e).css({height:n+"px"})}(e)}).focusout(function(){d(e,t),$(e).css({height:"","z-index":3e3}),$(e).next("ul#value-selector").remove(),n=null,a=-1}).bind("keydown",function(e){if(n)if(38==e.keyCode||40==e.keyCode){e.preventDefault();var t=$(n).find("li");38==e.keyCode?a--:40==e.keyCode&&a++,a<0?a=t.size()-1:a>=t.size()&&(a=0);var i=$(t).eq(a);i.trigger("freeboard-select"),$(n).scrollTop($(i).position().top)}else 13==e.keyCode&&(e.preventDefault(),-1!=a&&$(n).find("li").eq(a).trigger("freeboard-insertValue"))})}return{createValueEditor:function(e,t){u(e,t||s.ANY)},EXPECTED_TYPE:s}},function(e){var t=window.MutationObserver||window.WebKitMutationObserver;e.fn.attrchange=function(n){var a={trackValues:!1,callback:e.noop};if("function"==typeof n?a.callback=n:e.extend(a,n),a.trackValues&&e(this).each(function(t,n){for(var a,i={},o=(t=0,n.attributes),s=o.length;t<s;t++)i[(a=o.item(t)).nodeName]=a.value;e(this).data("attr-old-value",i)}),t){var i={subtree:!1,attributes:!0,attributeOldValue:a.trackValues},o=new t(function(t){t.forEach(function(t){var n=t.target;a.trackValues&&(t.newValue=e(n).attr(t.attributeName)),a.callback.call(n,t)})});return this.each(function(){o.observe(this,i)})}return function(){var e=document.createElement("p"),t=!1;if(e.addEventListener)e.addEventListener("DOMAttrModified",function(){t=!0},!1);else{if(!e.attachEvent)return!1;e.attachEvent("onDOMAttrModified",function(){t=!0})}return e.setAttribute("id","target"),t}()?this.on("DOMAttrModified",function(e){e.originalEvent&&(e=e.originalEvent),e.attributeName=e.attrName,e.oldValue=e.prevValue,a.callback.call(this,e)}):"onpropertychange"in document.body?this.on("propertychange",function(t){t.attributeName=window.event.propertyName,function(t,n){if(t){var a=this.data("attr-old-value");if(n.attributeName.indexOf("style")>=0){a.style||(a.style={});var i=n.attributeName.split(".");n.attributeName=i[0],n.oldValue=a.style[i[1]],n.newValue=i[1]+":"+this.prop("style")[e.camelCase(i[1])],a.style[i[1]]=n.newValue}else n.oldValue=a[n.attributeName],n.newValue=this.attr(n.attributeName),a[n.attributeName]=n.newValue;this.data("attr-old-value",a)}}.call(e(this),a.trackValues,t),a.callback.call(this,t)}):this}}(jQuery),function(e){e.eventEmitter={_JQInit:function(){this._JQ=e(this)},emit:function(e,t){!this._JQ&&this._JQInit(),this._JQ.trigger(e,t)},once:function(e,t){!this._JQ&&this._JQInit(),this._JQ.one(e,t)},on:function(e,t){!this._JQ&&this._JQInit(),this._JQ.bind(e,t)},off:function(e,t){!this._JQ&&this._JQInit(),this._JQ.unbind(e,t)}}}(jQuery);var freeboard=function(){var e={},t={},n=new FreeboardUI,a=new FreeboardModel(e,t,n),o=new JSEditor,s=new ValueEditor(a),r=new PluginEditor(o,s),l=new DeveloperConsole(a),d={values:{"font-family":'"HelveticaNeue-UltraLight", "Helvetica Neue Ultra Light", "Helvetica Neue", sans-serif',color:"#d3d4d4","font-weight":100}};function c(){var e=$("<select></select>");for(i in freeboard.templates)e.append($("<option>"+i+"</option>"));freeboard.showDialog(e,"Load example board(deleting the current board?)","Load","Cancel",function(){freeboard.loadDashboard(freeboard.templates[e.val()])})}return ko.bindingHandlers.pluginEditor={init:function(i,o,s,l,d){var c=ko.unwrap(o()),u={},p=void 0,h="";"datasource"==c.type?(u=e,h="Datasource"):"widget"==c.type?(u=t,h="Widget"):"pane"==c.type&&(h="Pane"),$(i).click(function(o){if("delete"==c.operation){new DialogBox($("<p>Are you sure you want to delete this "+h+"?</p>"),"Confirm Delete","Yes","No",function(){"datasource"==c.type?a.deleteDatasource(l):"widget"==c.type?a.deleteWidget(l):"pane"==c.type&&a.deletePane(l)})}else{var s=void 0;"datasource"==c.type?"add"==c.operation?p={}:(s=l.type,(p=l.settings).name=l.name()):"widget"==c.type?"add"==c.operation?p={}:(s=l.type,p=l.settings):"pane"==c.type&&(p={},"edit"==c.operation&&(p.title=l.title(),p.col_width=l.col_width()),u={settings:{settings:[{name:"title",display_name:"Title",type:"text"},{name:"col_width",display_name:"Columns",type:"integer",default_value:1,required:!0}]}}),r.createPluginEditor(h,u,s,p,async function(o){if("add"==c.operation){if("datasource"==c.type){var s=new DatasourceModel(a,e);a.addDatasource(s),s.name(o.settings.name),delete o.settings.name,await s.setSettings(o.settings),await s.setType(o.type)}else if("widget"==c.type){s=new WidgetModel(a,t);await s.setSettings(o.settings),await s.setType(o.type),l.widgets.push(s),n.attachWidgetEditIcons(i)}}else"edit"==c.operation&&("pane"==c.type?(l.title(o.settings.title),l.col_width(o.settings.col_width),n.processResize(!1)):("datasource"==c.type&&(l.name(o.settings.name),delete o.settings.name),await l.setType(o.type),await l.setSettings(o.settings)))})}})}},ko.virtualElements.allowedBindings.datasourceTypeSettings=!0,ko.bindingHandlers.datasourceTypeSettings={update:function(e,t,n,a,i){processPluginSettings(e,t,n,a,i)}},ko.bindingHandlers.pane={init:function(e,t,i,o,s){a.isEditing()&&$(e).css({cursor:"pointer"}),n.addPane(e,o,s.$root.isEditing())},update:function(e,t,i,o,s){-1==a.panes.indexOf(o)&&n.removePane(e),n.updatePane(e,o)}},ko.bindingHandlers.widget={init:function(e,t,i,o,s){a.isEditing()&&n.attachWidgetEditIcons($(e).parent())},update:function(e,t,n,a,i){a.shouldRender()&&($(e).empty(),a.render(e))}},$(function(){var e;function t(){n.processResize(!0)}n.showLoadingIndicator(!0),$(window).resize(function(){clearTimeout(e),e=setTimeout(t,500)})}),{model:a,setGlobalSettings:setGlobalSettings=a.setGlobalSettings,globalSettingsHandlers:globalSettingsHandlers=a.globalSettingsHandlers,globalSettings:globalSettings=a.globalSettings,showTemplatesPage:c=c,templates:templates=freeboardTemplates,ui:ui=n,defaultSounds:defaultSounds={"low-click":"sounds/333429__brandondelehoy__ui-series-another-basic-click.opus","scifi-beep":"sounds/220176__gameaudio__confirm-click-spacey.opus",error:"sounds/423166__plasterbrain__minimalist-sci-fi-ui-error.opus","soft-chime":"sounds/419493__plasterbrain__bell-chime-alert.opus",drop:"sounds/DM-CGS-32.opus",bamboo:"sounds/DM-CGS-50.opus",snap:"333431__brandondelehoy__ui-series-miscellaneous-01.opus",click:"333427__brandondelehoy__ui-series-gravel-y-click.opus",typewriter:"380137__yottasounds__typewriter-single-key-type-2.opus","scifi-descending":"422515__nightflame__menu-fx-03-descending.opus","scifi-ascending":"422515__nightflame__menu-fx-03-ascending.opus","scifi-flat":"422515__nightflame__menu-fx-03-normal.opus"},getAvailableCSSImageVars:getAvailableCSSImageVars=function(){var e={},t=a.globalSettings;if(t.imageData)for(var n in t.imageData)e["var("+n+")"]="Uploaded Image";if(t.theme){for(n in t.theme){var i=t.theme[n];n.includes("-image")&&i&&(e["var("+n+")"]="Image from settings")}document.body.style.setProperty(n,i)}return e},getAvailableSounds:getAvailableSounds=function(){var e={},t=a.globalSettings;for(var n in freeboard.defaultSounds)e[n]="Builtin";if(t.soundData)for(var n in t.soundData)e[n]="Custom";return e},genUUID:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))},playSound:function(e,t){if(e){t=t||.8;var n=a.globalSettings;n.externalSounds?n.externalSounds[e]&&(e=n.externalSounds[e]):n.soundData?n.soundData[e]&&(e=n.soundData[e]):freeboard.defaultSounds[e]&&(e=freeboard.defaultSounds[e]),new Howl({src:[e],html5:"file:"==window.location.protocol,volume:t}).play()}},getDatasourceInstance:function(e){for(var t of freeboard.model.datasources())if(t.name()==e)return t.datasourceInstance},eval:function(e){return"string"==typeof e&&"="==e[0]?this.compile("return "+e.substring(1))():e},compile:function(e){var t=new Function("datasources","ds",e);return function(){return t(a.datasources,a.datasources)}},initialize:function(e,t){ko.applyBindings(a);var i=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("load");""!=i?$.ajax({url:i,success:function(e){a.loadDashboard(e),_.isFunction(t)&&t()}}):(a.allow_edit(e),a.setEditing(e),n.showLoadingIndicator(!1),_.isFunction(t)&&t(),freeboard.emit("initialized"),n.processResize())},newDashboard:function(){a.loadDashboard({allow_edit:!0})},loadDashboard:function(e,t){a.loadDashboard(e,t)},serialize:function(){return a.serialize()},setEditing:function(e,t){a.setEditing(e,t)},isEditing:function(){return a.isEditing()},loadDatasourcePlugin:function(t){_.isUndefined(t.display_name)&&(t.display_name=t.type_name),t.settings.unshift({name:"name",display_name:"Name",type:"text",required:!0}),a.addPluginSource(t.source),e[t.type_name]=t,a._datasourceTypes.valueHasMutated()},resize:function(){n.processResize(!0)},loadWidgetPlugin:function(e){_.isUndefined(e.display_name)&&(e.display_name=e.type_name),a.addPluginSource(e.source),t[e.type_name]=e,a._widgetTypes.valueHasMutated()},setAssetRoot:function(e){o.setAssetRoot(e)},addStyle:function(e,t){var n=e+"{"+t+"}",a=$("style#fb-styles");0==a.length&&(a=$('<style id="fb-styles" type="text/css"></style>'),$("head").append(a)),a[0].styleSheet?a[0].styleSheet.cssText+=n:a.text(a.text()+n)},showLoadingIndicator:function(e){n.showLoadingIndicator(e)},showDialog:function(e,t,n,a,i,o){new DialogBox(e,t,n,a,i,o)},getDatasourceSettings:function(e){var t=a.datasources(),n=_.find(t,function(t){return t.name()===e});return n?n.settings:null},setDatasourceSettings:function(e,t){var n=a.datasources(),i=_.find(n,function(t){return t.name()===e});if(i){var o=_.defaults(t,i.settings);i.setSettings(o)}else console.log("Datasource not found")},getStyleString:function(e){var t="";return _.each(d[e],function(e,n){t=t+n+":"+e+";"}),t},getStyleObject:function(e){return d[e]},showDeveloperConsole:function(){l.showDeveloperConsole()}}}();$.extend(freeboard,jQuery.eventEmitter);var fontlist=["FBSans","FBSerif","Chalkboard","Chancery","Pandora","RoughScript","Handwriting","B612","FBMono","Blackletter","FBComic","Pixel","QTBlackForest","Pixel","FBCursive","DIN","PenguinAttack","DSEG7","DSEG14"],freeboardFontsList=fontlist;function generateFreeboardHelp(){return $('\n<div style="overflow:scroll; height:50em;">\n\n<h2>Data targets</h2>\n\n<p>Input widgets use a data target to do something with the data.\nIf the target is just the name of a field of a datasource, it will try to write it there.</p>\n\n<p>If the target contains any javascript, like assignments or function calls,\nit will be interpreted as a function to call to handle new data.\nYou can access the value itself simply by using the variable called \'value\'.</p>\n\n<p>Nonexistant targets just create that target when the user enters some data, otherwise they have an empty or default value.   This means you don\'t always need ot worry\nabout declaring values.</p>\n\n<h2>Calculated values</h2>\n\n<p>These update in real time if the value of the expression changes.\nMuch like a spreadsheet, they must begin with an equals sign,\nor else they get interpreted as just literal data.</p>\n\n\n<h2> Data Tables </h2>\n<p>FreeBoard works with table-like data using the nanoSQl2 library which is always available to the user.   The following 4 special fields are reserved and may be added\n    to rows when used with widgets: time, the microseconds modification time of the record, arrival, the microseconds time the record arrived on the local node,\n    uuid, a canonical UUID for the record, and name, a nonunique name.<p>\n\n\n<p>When using the table widget in the raw data mode, all you need to worry about is your application data, the special fields are added automatically by the table widget.</p>\n\n<p>Table widgets have a data target for their selected row.  This row acts just like a the data rows in your input array, however, you can write\nthe changes back to the original data table by setting the arrival property to anything you want(The actual value will be changed to the current time).</p>\n\n<p>Where there is no selection, the selection is just an empty object, with all of the special underscore keys, and a random UUID.  Setting arrival on this will\ncreate a new entry, as this triggers entering the row into whatever is managing the database.</p>\n\n<p>All database backends should understand this spec, so to make a database form, you use a table to find the record you want, assign the selection\nto a scratchpad data source, and use the usual controls to edit that selection.  When you\'re done, use a button widget to set the arrival property, and everything gets saved.</p>\n\n<p>The tableview widget itself will act as the backend if you use the raw data array mode.</p>\n\n\n<h2>Using Global Settings</h2>\n\n<p>There are many "hidden" settings. If you click "Object properties", you will see a list of ones to enable.  Most in the theme category are fairly obvious</p>\n\n<p>In addition, the settings panel is used to store images and sounds directly in the board config data.</p>\n\n<h3>Images</h3>\n<p>Images are stored as CSS data URLs. to upload one, to the main "properties" and enable imageData.</p>\n\n<p>Each image within the imageData section is it\'s own "Setting" you can enable, using the "add" toolbar in the propperties</p>\n\n<p>Image names must start with --, as in --my-awesome-background.  Once you have added the image, there will be a prompt to upload a file.</p>\n\n<p>The image will now be available in the Rich Text widget backgrounds list. Other uses coming soon!</p>\n\n<p>Internally, they are made available as global CSS data URIs.</p>\n\n<p>Note that images can also be uploaded directly to the Rich Text Content widget</p>\n\n<h3>Sounds</h3>\n\n<p>Sounds work the same way. Enable the soundData category, add a setting, upload.  The sound will be available in the Button and Switch widgets as a sound effect.</p>\n\n<p>This feature makes it very easy to create a basic "sound board"</p>\n\n\n\n\n\n<h2>Mustache Templates(Use in the rich text edit component,  3rdparty doc, MIT)</h2>\n<pre>\nNAME\nmustache - Logic-less templates.\n\nSYNOPSIS\nA typical Mustache template:\n\nHello {{name}}\nYou have just won {{value}} dollars!\n{{#in_ca}}\nWell, {{taxed_value}} dollars, after taxes.\n{{/in_ca}}\nGiven the following hash:\n\n{\n  "name": "Chris",\n  "value": 10000,\n  "taxed_value": 10000 - (10000 * 0.4),\n  "in_ca": true\n}\nWill produce the following:\n\nHello Chris\nYou have just won 10000 dollars!\nWell, 6000.0 dollars, after taxes.\nDESCRIPTION\nMustache can be used for HTML, config files, source code - anything. It works by expanding tags in a template using values provided in a hash or object.\n\nWe call it "logic-less" because there are no if statements, else clauses, or for loops. Instead there are only tags. Some tags are replaced with a value, some nothing, and others a series of values. This document explains the different types of Mustache tags.\n\nTAG TYPES\nTags are indicated by the double mustaches. {{person}} is a tag, as is {{#person}}. In both examples, we\'d refer to person as the key or tag key. Let\'s talk about the different types of tags.\n\nVariables\nThe most basic tag type is the variable. A {{name}} tag in a basic template will try to find the name key in the current context. If there is no name key, the parent contexts will be checked recursively. If the top context is reached and the name key is still not found, nothing will be rendered.\n\nAll variables are HTML escaped by default. If you want to return unescaped HTML, use the triple mustache: {{{name}}}.\n\nYou can also use & to unescape a variable: {{& name}}. This may be useful when changing delimiters (see "Set Delimiter" below).\n\nBy default a variable "miss" returns an empty string. This can usually be configured in your Mustache library. The Ruby version of Mustache supports raising an exception in this situation, for instance.\n\nTemplate:\n\n* {{name}}\n* {{age}}\n* {{company}}\n* {{{company}}}\nHash:\n\n{\n  "name": "Chris",\n  "company": "<b>GitHub</b>"\n}\nOutput:\n\n* Chris\n*\n* &lt;b&gt;GitHub&lt;/b&gt;\n* <b>GitHub</b>\nSections\nSections render blocks of text one or more times, depending on the value of the key in the current context.\n\nA section begins with a pound and ends with a slash. That is, {{#person}} begins a "person" section while {{/person}} ends it.\n\nThe behavior of the section is determined by the value of the key.\n\nFalse Values or Empty Lists\n\nIf the person key exists and has a value of false or an empty list, the HTML between the pound and slash will not be displayed.\n\nTemplate:\n\nShown.\n{{#person}}\n  Never shown!\n{{/person}}\nHash:\n\n{\n  "person": false\n}\nOutput:\n\nShown.\nNon-Empty Lists\n\nIf the person key exists and has a non-false value, the HTML between the pound and slash will be rendered and displayed one or more times.\n\nWhen the value is a non-empty list, the text in the block will be displayed once for each item in the list. The context of the block will be set to the current item for each iteration. In this way we can loop over collections.\n\nTemplate:\n\n{{#repo}}\n  <b>{{name}}</b>\n{{/repo}}\nHash:\n\n{\n  "repo": [\n    { "name": "resque" },\n    { "name": "hub" },\n    { "name": "rip" }\n  ]\n}\nOutput:\n\n<b>resque</b>\n<b>hub</b>\n<b>rip</b>\nLambdas\n\nWhen the value is a callable object, such as a function or lambda, the object will be invoked and passed the block of text. The text passed is the literal block, unrendered. {{tags}} will not have been expanded - the lambda should do that on its own. In this way you can implement filters or caching.\n\nTemplate:\n\n{{#wrapped}}\n  {{name}} is awesome.\n{{/wrapped}}\nHash:\n\n{\n  "name": "Willy",\n  "wrapped": function() {\n    return function(text, render) {\n      return "<b>" + render(text) + "</b>"\n    }\n  }\n}\nOutput:\n\n<b>Willy is awesome.</b>\nNon-False Values\n\nWhen the value is non-false but not a list, it will be used as the context for a single rendering of the block.\n\nTemplate:\n\n{{#person?}}\n  Hi {{name}}!\n{{/person?}}\nHash:\n\n{\n  "person?": { "name": "Jon" }\n}\nOutput:\n\nHi Jon!\nInverted Sections\nAn inverted section begins with a caret (hat) and ends with a slash. That is {{^person}} begins a "person" inverted section while {{/person}} ends it.\n\nWhile sections can be used to render text one or more times based on the value of the key, inverted sections may render text once based on the inverse value of the key. That is, they will be rendered if the key doesn\'t exist, is false, or is an empty list.\n\nTemplate:\n\n{{#repo}}\n  <b>{{name}}</b>\n{{/repo}}\n{{^repo}}\n  No repos :(\n{{/repo}}\nHash:\n\n{\n  "repo": []\n}\nOutput:\n\nNo repos :(\nComments\nComments begin with a bang and are ignored. The following template:\n\n<h1>Today{{! ignore me }}.</h1>\nWill render as follows:\n\n<h1>Today.</h1>\nComments may contain newlines.\n\nPartials\nPartials begin with a greater than sign, like {{> box}}.\n\nPartials are rendered at runtime (as opposed to compile time), so recursive partials are possible. Just avoid infinite loops.\n\nThey also inherit the calling context. Whereas in an [ERB](http://en.wikipedia.org/wiki/ERuby) file you may have this:\n\n<%= partial :next_more, :start => start, :size => size %>\nMustache requires only this:\n\n{{> next_more}}\nWhy? Because the next_more.mustache file will inherit the size and start methods from the calling context.\n\nIn this way you may want to think of partials as includes, imports, template expansion, nested templates, or subtemplates, even though those aren\'t literally the case here.\n\nFor example, this template and partial:\n\nbase.mustache:\n<h2>Names</h2>\n{{#names}}\n  {{> user}}\n{{/names}}\n\nuser.mustache:\n<strong>{{name}}</strong>\nCan be thought of as a single, expanded template:\n\n<h2>Names</h2>\n{{#names}}\n  <strong>{{name}}</strong>\n{{/names}}\nSet Delimiter\nSet Delimiter tags start with an equal sign and change the tag delimiters from {{ and }} to custom strings.\n\nConsider the following contrived example:\n\n* {{default_tags}}\n{{=<% %>=}}\n* <% erb_style_tags %>\n<%={{ }}=%>\n* {{ default_tags_again }}\nHere we have a list with three items. The first item uses the default tag style, the second uses erb style as defined by the Set Delimiter tag, and the third returns to the default style after yet another Set Delimiter declaration.\n\nAccording to ctemplates, this "is useful for languages like TeX, where double-braces may occur in the text and are awkward to use for markup."\n\nCustom delimiters may not contain whitespace or the equals sign.\n\nCOPYRIGHT\nMustache is Copyright (C) 2009 Chris Wanstrath\n\nOriginal CTemplate by Google\n\nSEE ALSO\nmustache(1), http://mustache.github.io/\n</pre>\n\n')}function generateFreeboardEmojiCheats(){return $("<h2>Smileys</h2>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>People</h2>\n  <p></p>\n  <h2>Cats</h2>\n  <p></p>\n  <h2>Creatures</h2>\n  <p></p>\n  <h2>Effects</h2>\n  <p></p>\n  <h2>Body</h2>\n  <p></p>\n  <h2>Figures</h2>\n  <p></p>\n  <p></p>\n  <h2>Fashion</h2>\n  <p></p>\n  <h2>Love</h2>\n  <p></p>\n  <h2>SocialMedia</h2>\n  <p></p>\n  <h2>Animals</h2>\n  <p>\n  </p>\n  <p></p>\n  <h2>Earth and Space</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Parties</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Items</h2>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>Arts</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Games</h2>\n  <p></p>\n  <p><br></p>\n  <h2>Food and Drink</h2>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>Symbols</h2>\n  <p>1234567890#</p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p></p>\n  <p><br></p>\n  <h2>Astrology</h2>\n  <p></p>\n  <p><br></p>\n  <h2>More Symbols</h2>\n  <p></p>\n  <p><br></p>\n  <p></p>\n  <p><br></p>\n  \n  \n<h2>Pictographs</h2>\n                             <br>\n                             <br>\n                            <br>\n                               <br>\n                              <br>\n                  <br>\n\n\n\n<h2>Currency Symbols</h2>\n$                                      \n\n\n<h2>Stars and Circles</h2>\n                         <br>\n                         <br>\n                           <br>\n\n<h2>Nature</h2>\n                          <br>\n                             <br>\n                             <br>\n                           <br>\n                             <br> \n                          <br>\n                       <br>\n\n  </pre>\n  ")}globalSettingsSchema={type:"object",title:"Settings",properties:{soundData:{type:"object",title:"Sounds(saved as part of board)",additionalProperties:{type:"string",media:{binaryEncoding:"base64"}}},imageData:{type:"object",title:"Images(name must start with --)",additionalProperties:{type:"string",media:{binaryEncoding:"base64"}}},theme:{type:"object",title:"Theme",properties:{"--box-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--main-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--main-bg-image":{type:"string",media:{binaryEncoding:"base64",type:"img/png"}},"--widget-bg-image":{type:"string",media:{binaryEncoding:"base64",type:"img/png"}},"--box-bg-image":{type:"string",media:{binaryEncoding:"base64",type:"img/png"}},"--bar-bg-image":{type:"string",media:{binaryEncoding:"base64",type:"img/png"}},"--logo-image":{type:"string",media:{binaryEncoding:"base64",type:"img/png"}},"--logo-text":{type:"string"},"--box-backdrop":{type:"string",enum:["","blur(1px)","blur(2px)","blur(4px)","blur(8px)","blur(16px)"]},"--main-font":{type:"string",enum:fontlist},"--header-font":{type:"string",enum:fontlist},"--widget-font":{type:"string",enum:fontlist},"--main-font-size":{type:"string",enum:["small","medium","large","x-large","xx-large","12px","16px","24px","32px","48px","64px","80px"]},"--header-font-size":{type:"string",enum:["small","medium","large","x-large","xx-large","12px","16px","24px","32px","48px","64px","80px"]},"--widget-font-size":{type:"string",enum:["small","medium","large","x-large","xx-large","12px","16px","24px","32px","48px","64px","80px"]},"--fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--widget-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--widget-fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--bar-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--pane-header-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--header-fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--label-bg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--label-fg-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb"}}},"--header-shadow":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--pane-shadow":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--widget-shadow":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--widget-text-shadow":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--border-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--widget-border-color":{type:"string",format:"color",options:{colorpicker:{editorFormat:"rgb",alpha:!0}}},"--border-width":{type:"string",enum:["0px","1px","2px","3px","4px","5px"]},"--header-border-radius":{type:"string",enum:["0em","0.3em","0.6em","1em","2em","3em","4em","5em"]},"--logo-border-radius":{type:"string",enum:["0em","0.3em","0.6em","1em","2em","3em","4em","5em"]},"--header-line-width":{type:"string",enum:["0px","1px","2px","3px"]},"--pane-padding":{type:"string",enum:["0.1em","0.2em"," 0.3em","0.6em","1.2em","2.4em"]},"--pane-border-radius":{type:"string",enum:["0.1em","0.2em","0.3em","0.6em","1.2em","2.4em"]},"--widget-border-radius":{type:"string",enum:["0em","0.15em","0.3em","0.6em","1.2em","2.4em","4.8em"]},"--main-bg-size":{type:"string",enum:["auto","cover","contain"]},"--pane-header-line-height":{type:"string",enum:["20px","40px","60px","80px","100px"]}}}}};