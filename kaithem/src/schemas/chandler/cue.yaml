$schema: http://json-schema.org/draft-04/schema#
type: object

# All of these keys correspond
properties:
  number:
    type: integer
    description: The actual value times 1000, because we use fixed point rather than deal with decimals.

  shortcut:
    type: string
    default: ''

  checkpoint:
    type: boolean
    default: false
    description: If true, when entering this cue, save it to disk to jump back later.

  fade_in:
    type: number
    default: 0

  sound_fade_out:
    type: number
    default: 0

  sound_fade_in:
    type: number
    default: 0

  length:
    anyOf:
      - { "type": "number" }
      - { "type": "string" }
    default: 0

  track:
    type: boolean
    default: true

  next_cue:
    anyOf:
      - { "type": "number" }
      - { "type": "string" }
      - { "type": "null" }
    default: ''

  sound:
    type: string
    default: ''

  slide:
    type: string
    default: ''

  notes:
    type: string
    default: ''
    description: Notes intended for the designer or operator.

  markdown:
    type: string
    default: ''
    description: Some rich text that could be displayed in the sidebar

  sound_output:
    type: string
    default: ''

  sound_start_position:
    type: number
    default: 0

  media_speed:
    type: number
    default: 1

  media_wind_up:
    type: number
    default: 0

  media_wind_down:
    type: number
    default: 0

  # Todo: migrate to CamelCase or migrate others to snake_case?
  rel_length:
    type: boolean
    default: false

  reentrant:
    description: "If false, the system will block entering the cue if already in the cue"
    type: boolean
    default: true

  length_randomize:
    type: number
    default: 0

  inherit_rules:
    type: string
    default: ''

  rules:
    type: array
    default: []

  probability:
    type: string
    default: ''
    description: When the cue is a possibility for random selection, determines the weight.  Unset has weight 1.

  values:
    type: object
    default: {}
    additionalProperties:
      type: object
      additionalProperties:
        anyOf:
          - { "type": "number" }
          - { "type": "string" }
          - { "type": "null" }

  sound_volume:
    anyOf:
      - { "type": "number" }
      - { "type": "string" }
    default: 1

  sound_loops:
    type: integer
    default: 0

  trigger_shortcut:
    type: string
    default: ''

  named_for_sound:
    type: boolean
    default: false

required:
  - number